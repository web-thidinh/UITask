!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("reselect")):"function"==typeof define&&define.amd?define(["reselect"],t):"object"==typeof exports?exports.ReduxRequests=t(require("reselect")):e.ReduxRequests=t(e.Reselect)}(self,(function(e){return(()=>{var t={527:e=>{function t(){return e.exports=t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},t.apply(this,arguments)}e.exports=t},834:e=>{e.exports=function(e,t){if(null==e)return{};var r,n,o={},u=Object.keys(e);for(n=0;n<u.length;n++)r=u[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}},103:(e,t,r)=>{"use strict";r.r(t),r.d(t,{abort:()=>A,abortRequests:()=>W,addWatcher:()=>N,clearRequestsCache:()=>k,closeWebsocket:()=>G,createRequestsStore:()=>ze,error:()=>S,getMutation:()=>Ve,getMutationSelector:()=>Xe,getQuery:()=>ae,getQuerySelector:()=>Fe,getWebsocketState:()=>Ye,handleRequests:()=>Ge,isRequestAction:()=>T,isRequestActionQuery:()=>_,isResponseAction:()=>j,joinRequest:()=>B,openWebsocket:()=>I,removeWatcher:()=>x,resetRequests:()=>L,stopPolling:()=>Q,stopSubscriptions:()=>H,success:()=>O});var n=r(527),o=r.n(n),u="_SUCCESS",s="_ERROR",a="_ABORT",i="CLEAR_REQUESTS_CACHE",c="RESET_REQUESTS",l="ABORT_REQUESTS",d="SET_DOWNLOAD_PROGRESS",f="SET_UPLOAD_PROGRESS",p="ADD_WATCHER",m="REMOVE_WATCHER",y="JOIN_REQUEST",v="STOP_POLLING",q="WEBSOCKET_OPENED",g="WEBSOCKET_CLOSED",h="OPEN_WEBSOCKET",b="CLOSE_WEBSOCKET",E="STOP_SUBSCRIPTIONS",R=function(e){return function(t){return t+e}},O=R(u),S=R(s),A=R(a),P=function(e){return!!e.payload},w=function(e,t){return o()({type:S(e.type)},P(e)?{payload:t,error:!0}:{error:t},{meta:o()({},e.meta,{requestAction:e})})},D=function(e){return void 0===e.payload?e:e.payload},T=function(e){var t=D(e);return!(null==t||!t.request||!(Array.isArray(t.request)||t.request.url||t.request.query||t.request.promise||t.request.response||t.request.error)||t.response||t instanceof Error)},j=function(e){var t;return!(null==(t=e.meta)||!t.requestAction)},K=function(e){return e.meta.requestAction},z=function(e){return j(e)&&e.type.endsWith(u)},M=function(e){return j(e)&&e.type.endsWith(s)},C=function(e){return!e.query&&(!e.method||"get"===e.method.toLowerCase())||e.query&&!e.query.trim().startsWith("mutation")},_=function(e){var t,r=D(e).request;return void 0!==(null==(t=e.meta)?void 0:t.asMutation)?!e.meta.asMutation:!!(Array.isArray(r)?r.every(C):C(r))},k=function(e){return void 0===e&&(e=null),{type:i,requests:e}},L=function(e,t,r){return void 0===e&&(e=null),void 0===t&&(t=!0),void 0===r&&(r=!0),{type:c,requests:e,abortPending:t,resetCached:r}},W=function(e){return void 0===e&&(e=null),{type:l,requests:e}},Q=function(e){return void 0===e&&(e=null),{type:v,requests:e}},N=function(e){return{type:p,requestType:e}},x=function(e){return{type:m,requestType:e}},B=function(e,t){return void 0===t&&(t=!1),{type:y,requestType:e,rehydrate:t}},U=function(){return{type:q}},I=function(e){return void 0===e&&(e=null),{type:h,props:e}},G=function(e){return void 0===e&&(e=1e3),{type:b,code:e}},H=function(e){return void 0===e&&(e=null),{type:E,subscriptions:e}};const J={driver:null,onRequest:null,onSuccess:null,onError:null,onAbort:null,cache:!1,ssr:null,disableRequestsPromise:!1,isRequestAction:T,isRequestActionQuery:_,takeLatest:_,normalize:!1,getNormalisationObjectKey:function(e){return e.id},shouldObjectBeNormalized:function(e){return void 0!==e.id},subscriber:null};var $=r(834),V=r.n($),F=r(573),X=function e(t,r,n,o,u){return void 0===u&&(u=""),o||(o=new Set),"string"==typeof t&&t.startsWith("@@")?(o.add(t),e(r[t],r,n,o,u)):Array.isArray(t)?t.forEach((function(t){return e(t,r,n,o,u)})):null!==t&&"object"==typeof t&&(n[u]?Object.entries(t).filter((function(e){var t=e[0];return n[u].includes(t)})):Object.entries(t)).forEach((function(t){var s=t[0],a=t[1];e(a,r,n,o,u+"."+s)})),o},Y=function e(t,r,n,o){return void 0===o&&(o=""),"string"==typeof t&&t.startsWith("@@")?e(r[t],r,n,o):Array.isArray(t)?t.map((function(t){return e(t,r,n,o)})):null!==t&&"object"==typeof t?(n[o]?Object.entries(t).filter((function(e){var t=e[0];return n[o].includes(t)})):Object.entries(t)).reduce((function(t,u){var s=u[0],a=u[1];return t[s]=e(a,r,n,o+"."+s),t}),{}):t};function Z(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ee=(0,F.createSelectorCreator)(F.defaultMemoize,(function(e,t){if(e.data!==t.data||e.pending!==t.pending||e.error!==t.error||e.pristine!==t.pristine||e.downloadProgress!==t.downloadProgress||e.uploadProgress!==t.uploadProgress)return!1;if(null===e.data&&(e.multiple!==t.multiple||e.defaultData!==t.defaultData))return!1;if(e.normalized&&e.normalizedData!==t.normalizedData){var r=X(e.data,e.normalizedData,e.usedKeys),n=X(t.data,t.normalizedData,t.usedKeys);if(r.size!==n.size)return!1;for(var o,u=function(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return Z(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Z(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(r=e[Symbol.iterator]()).next.bind(r)}(r);!(o=u()).done;){var s=o.value;if(!n.has(s)||e.normalizedData[s]!==t.normalizedData[s])return!1}}return!0})),te=function(e,t,r){return null!==e?e:void 0!==r?r:t?[]:e},re=function(e,t,r){return void 0===r&&(r=""),e.requests.queries[t+r]},ne={data:null,pending:0,loading:!1,error:null,pristine:!0,downloadProgress:null,uploadProgress:null},oe=o()({},ne,{data:[]}),ue=new Map,se=new WeakMap;const ae=function(e,t){var r=t.type,n=t.requestKey,u=t.defaultData,s=t.multiple,a=void 0!==s&&s,i=re(e,r,n);return i?(se.get(i.ref)||se.set(i.ref,function(e,t){return ee((function(r,n,o){var u,s,a=re(r,e,t);return{data:a.data,pending:a.pending,error:a.error,pristine:a.pristine,normalized:a.normalized,usedKeys:a.usedKeys,multiple:o,defaultData:n,normalizedData:r.requests.normalizedData,downloadProgress:null!=(u=r.requests.downloadProgress[e+(t||"")])?u:null,uploadProgress:null!=(s=r.requests.uploadProgress[e+(t||"")])?s:null}}),(function(e){var t=e.data,r=e.pending,n=e.error,o=e.pristine,u=e.usedKeys,s=e.normalized,a=e.normalizedData,i=e.defaultData,c=e.multiple,l=e.downloadProgress,d=e.uploadProgress;return{data:s?Y(te(t,c,i),a,u):te(t,c,i),pending:r,loading:r>0,error:n,pristine:o,downloadProgress:l,uploadProgress:d}}))}(r,n)),se.get(i.ref)(e,u,a)):function(e,t){if(void 0!==e&&ue.get(e))return ue.get(e);if(void 0!==e){var r=o()({},ne,{data:e});return ue.set(e,r),r}return t?oe:ne}(u,a)};var ie=r(714),ce=r.n(ie),le={arrayMerge:function(e,t){return t},clone:!1},de=function(e,t){return ce()(e,t,le)},fe=function e(t,r,n){return void 0===n&&(n=!0),Array.isArray(t)?t.map((function(t){return e(t,r)})):null!==t&&"object"==typeof t?r.shouldObjectBeNormalized(t)&&n?"@@"+r.getNormalisationObjectKey(t):Object.entries(t).reduce((function(t,n){var o=n[0],u=n[1];return t[o]=e(u,r),t}),{}):t},pe=function e(t,r,n,o){return void 0===r&&(r=J),void 0===o&&(o=""),n=n||{},Array.isArray(t)?[t.reduce((function(t,u){return[].concat(t,e(u,r,n,o)[0])}),[]),n]:null!==t&&"object"==typeof t?(r.shouldObjectBeNormalized(t)&&(n[o]=Object.keys(t)),[Object.entries(t).reduce((function(t,u){var s=u[0],a=u[1];return[].concat(t,e(a,r,n,o+"."+s)[0])}),r.shouldObjectBeNormalized(t)?[t]:[]),n]):[[],n]},me=function(e,t){void 0===t&&(t=J);var r=pe(e,t),n=r[0],o=r[1];return[fe(e,t,!0),n.reduce((function(e,r){var n=t.getNormalisationObjectKey(r);return e["@@"+n]=e["@@"+n]?de(e["@@"+n],fe(r,t,!1)):fe(r,t,!1),e}),{}),o]},ye=function(e){return"function"==typeof e?e:e.updateData?e.updateData:null};function ve(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:String(t)}var qe=function(e){return e.payload?e.payload.data:e.response.data},ge=function(e,t){var r;return void 0!==(null==(r=e.meta)?void 0:r.normalize)?e.meta.normalize:t.normalize},he=function(e,t,r,n,u){var s,a,i,c,l,d,f,p,m;if(void 0===e&&(e={data:null,pending:0,error:null,pristine:!0,ref:{},normalized:m=ge(t,n),usedKeys:m?{}:null}),null!=(s=t.meta)&&null!=(a=s.mutations)&&a[r]){var y,v=t.meta.mutations[r],q=function(e,t,r){if(j(t)){if(z(t)){var n=ye(r);return n?n(e,t.payload?t.payload.data:t.response.data):e}return r.revertData?r.revertData(e):e}return r.updateDataOptimistic?r.updateDataOptimistic(e):r.local?ye(r)(e):e}(e.normalized?ae({requests:{normalizedData:u,queries:(y={},y[r]=e,y),downloadProgress:{},uploadProgress:{}}},{type:r}).data:e.data,t,v);return q===e.data?e:o()({},e,{data:q})}switch(t.type){case O(r):return null!=(i=t.meta)&&i.ssrResponse||null!=(c=t.meta)&&c.cacheResponse?e:o()({},e,{data:qe(t),pending:e.pending-1,error:null});case S(r):return null!=(l=t.meta)&&l.ssrError?e:o()({},e,{data:null,pending:e.pending-1,error:t.payload?t.payload:t.error});case A(r):if(1===e.pending&&null===e.data&&null===e.error)return;return o()({},e,{pending:e.pending-1});default:return null!=(d=t.meta)&&d.ssrResponse||null!=(f=t.meta)&&f.ssrError||null!=(p=t.meta)&&p.cacheResponse?e:o()({},e,{pending:e.pending+1,error:null,pristine:!1})}};var be=function(e){return"function"==typeof e?e.toString():e};const Ee=function(e,t){if(t.type===i)return t.requests?(e=o()({},e),(r=t.requests,r.map((function(e){return"object"==typeof e?be(e.requestType)+e.requestKey:be(e)}))).forEach((function(t){delete e[t]})),e):{};var r,n;if(z(t)&&t.meta.cache&&!t.meta.cacheResponse&&!t.meta.ssrResponse){var u,s=K(t);return o()({},e,((u={})[function(e){return e.type+(e.meta.requestKey||"")}(s)]={timeout:(n=t.meta.cache,!0===n?null:1e3*n+Date.now()),cacheKey:t.meta.cacheKey},u))}return e};var Re=function(e,t){return Object.entries(e).reduce((function(e,r){var n=r[0],o=r[1],u=t(n,o);return void 0===u||(e[n]=u),e}),{})},Oe=function(e){return"function"==typeof e?e.toString():e},Se=function(e){return 0===e.pending?void 0:o()({},e,{error:null})},Ae=function(e,t){var r;return e.cacheKey===(null==(r=t.meta)?void 0:r.cacheKey)&&(null===e.timeout||Date.now()<=e.timeout)};const Pe=function(e,t,r){var n,o;if(void 0===e&&(e=[]),void 0===r&&(r=J),"server"===r.ssr&&j(t))return[].concat(e,[K(t).type+(t.meta.requestKey||"")]);if("server"===r.ssr&&t.type===y&&t.rehydrate)return[].concat(e,[{requestType:t.requestType,duplicate:!0}]);if("client"===r.ssr&&r.isRequestAction(t)&&(null!=(n=t.meta)&&n.ssrResponse||null!=(o=t.meta)&&o.ssrError)){var u=e.findIndex((function(e){return(e.requestType||e)===t.type+(t.meta.requestKey||"")}));if(u>=0)return e.filter((function(e,t){return t!==u}))}return e};function we(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:String(t)}const De=function(e,t,r){if("server"===r.ssr)return e;var n,u;if(t.type===p)return o()({},e,((n={})[t.requestType]=void 0===e[t.requestType]?1:e[t.requestType]+1,n));if(t.type===m&&1===e[t.requestType]){var s=t.requestType;return e[s],V()(e,[s].map(we))}return t.type===m&&1!==e[t.requestType]?o()({},e,((u={})[t.requestType]=e[t.requestType]-1,u)):e},Te=function(e,t,r){return"server"===r.ssr?e:t.type===q?{pristine:!1,connected:!0}:t.type===g?{pristine:1e3===t.code,connected:!1}:e};var je={queries:{},mutations:{},normalizedData:{},cache:{},downloadProgress:{},uploadProgress:{},requestsKeys:{},watchers:{},websocket:{pristine:!0,connected:!1}};const Ke=function(e){return void 0===e&&(e=J),function(t,r){void 0===t&&(t=je);var n=function(e,t,r){var n;void 0===r&&(r=J);var u=function(e,t,r){var n,o;if(r.isRequestAction(t)&&null!=(n=t.meta)&&n.optimisticData){var u=me(t.meta.optimisticData,r)[1];return de(e,u)}if(j(t)&&M(t)&&t.meta.revertedData){var s=me(t.meta.revertedData,r)[1];return de(e,s)}if(j(t)&&z(t)&&ge(t,r)&&!r.isRequestActionQuery(K(t))){var a=me(qe(t),r)[1];return de(e,a)}if(null!=(o=t.meta)&&o.localData){var i=me(t.meta.localData,r)[1];return de(e,i)}return e}(e.normalizedData,t,r);if(null!=(n=t.meta)&&n.mutations)return{queries:o()({},e.queries,Object.keys(t.meta.mutations).filter((function(t){return!!e.queries[t]})).reduce((function(n,s){var a=he(e.queries[s],t,s,r,u);if(a.normalized&&a.data!==e.queries[s].data){var i=me(a.data,r),c=i[0],l=i[1],d=i[2];u=de(u,l),n[s]=o()({},a,{data:c,usedKeys:d})}else n[s]=a;return n}),{})),normalizedData:u};var s=function(e,t){return t.isRequestAction(e)&&t.isRequestActionQuery(e)?e.type:j(e)&&t.isRequestActionQuery(K(e))?K(e).type:null}(t,r);if(s){var a,i,c=void 0!==(null==(a=t.meta)?void 0:a.requestKey)?s+t.meta.requestKey:s,l=he(e.queries[c],t,s,r);if(void 0===l){var d=e.queries;return d[c],{queries:V()(d,[c].map(ve)),normalizedData:u}}if(l.normalized&&l.data&&(!e.queries[c]||e.queries[c].data!==l.data)){var f,p=me(l.data,r),m=p[0],y=p[1],v=p[2];return{queries:o()({},e.queries,(f={},f[c]=o()({},l,{data:m,usedKeys:v}),f)),normalizedData:de(u,y)}}return{queries:o()({},e.queries,(i={},i[c]=l,i)),normalizedData:u}}return e.normalizedData===u?e:o()({},e,{normalizedData:u})}({queries:t.queries,normalizedData:t.normalizedData},r,e),u=n.queries,s=n.normalizedData,i=t.mutations;return(e.isRequestAction(r)&&!e.isRequestActionQuery(r)||j(r)&&!e.isRequestActionQuery(K(r)))&&(i=function(e,t){var r,n;if(!j(t)){var u,s,i=t.type+(null!=(u=t.meta)&&u.requestKey?t.meta.requestKey:"");return o()({},e,((s={})[i]={error:null,pending:(e[i]?e[i].pending:0)+1,ref:e[i]?e[i].ref:{}},s))}var c,l=K(t).type+(null!=(r=t.meta)&&r.requestKey?t.meta.requestKey:"");return M(t)?o()({},e,((c={})[l]={error:t.payload?t.payload:t.error,pending:e[l].pending-1,ref:e[l].ref},c)):function(e){return j(e)&&e.type.endsWith(a)}(t)&&1===e[l].pending&&null===e[l].error?e:o()({},e,((n={})[l]={error:null,pending:e[l].pending-1,ref:e[l].ref},n))}(i,r)),o()({},function(e,t,r){var n;if(void 0===r&&(r=J),r.isRequestAction(t)&&void 0!==(null==(n=t.meta)?void 0:n.requestKey)){var u,s,a=e.queries,i=e.mutations,c=e.cache,l=e.requestsKeys;if(l=l[t.type]?o()({},l,((u={})[t.type]=[].concat(l[t.type].filter((function(e){return e!==t.meta.requestKey})),[t.meta.requestKey]),u)):o()({},l,((s={})[t.type]=[t.meta.requestKey],s)),t.meta.requestsCapacity&&l[t.type].length>t.meta.requestsCapacity){var d=r.isRequestActionQuery(t),f=d?a:i,p=l[t.type].length-t.meta.requestsCapacity;if(p>0){var m=l[t.type].slice(0,p).filter((function(e){var r=f[t.type+e];return!r||0===r.pending}));if(m.length>0){var y;l=o()({},l,((y={})[t.type]=l[t.type].filter((function(e){return!m.includes(e)})),y));var v=o()({},f);if(m.forEach((function(e){delete v[t.type+e]})),d){a=v;var q=o()({},c);m.forEach((function(e){delete q[t.type+e]})),c=q}else i=v}}}return{queries:a,mutations:i,cache:c,requestsKeys:l,downloadProgress:e.downloadProgress,uploadProgress:e.uploadProgress}}return e}(o()({},function(e,t){if(t.type!==c)return e;var r=e.queries,n=e.mutations,u=e.cache,s=e.downloadProgress,a=e.uploadProgress,i=!t.requests,l=!i&&t.requests.map((function(e){return"object"==typeof e?Oe(e.requestType)+(e.requestKey||""):Oe(e)}));return r=Re(r,(function(e,r){var n,s=u[e];return(i||l.includes(e))&&(t.resetCached||void 0===s||s&&!Ae(s,t))?0===(n=r).pending?void 0:o()({},n,{data:null,error:null,pristine:!0,usedKeys:n.normalized?{}:null}):r})),n=Re(n,(function(e,t){return i||l.includes(e)?Se(t):t})),u=i&&t.resetCached?{}:Re(u,(function(e,r){var n=u[e];if(!i&&!l.includes(e)||!(t.resetCached||void 0===n||n&&!Ae(n,t)))return r})),s=i?{}:Re(s,(function(e,t){return i||l.includes(e)?Se(t):t})),a=i?{}:Re(a,(function(e,t){return i||l.includes(e)?Se(t):t})),{queries:r,mutations:n,cache:u,downloadProgress:s,uploadProgress:a}}(o()({queries:u,mutations:i,cache:Ee(t.cache,r)},function(e,t,r){var n,u,s,a,i,c,l,p;return t.type===d?o()({},e,{downloadProgress:o()({},e.downloadProgress,(s={},s[t.requestType]=t.progress,s))}):t.type===f?o()({},e,{uploadProgress:o()({},e.uploadProgress,(a={},a[t.requestType]=t.progress,a))}):r.isRequestAction(t)&&null!=(n=t.meta)&&n.measureDownloadProgress?o()({},e,{downloadProgress:o()({},e.downloadProgress,(c={},c[t.type+((null==(i=t.meta)?void 0:i.requestKey)||"")]=0,c))}):r.isRequestAction(t)&&null!=(u=t.meta)&&u.measureUploadProgress?o()({},e,{uploadProgress:o()({},e.uploadProgress,(p={},p[t.type+((null==(l=t.meta)?void 0:l.requestKey)||"")]=0,p))}):e}({downloadProgress:t.downloadProgress,uploadProgress:t.uploadProgress},r,e)),r),{requestsKeys:t.requestsKeys}),r,e),{normalizedData:s,ssr:e.ssr?Pe(t.ssr,r,e):null,watchers:De(t.watchers,r,e),websocket:Te(t.websocket,r,e)})}},ze=function(e){return o()({},e,{dispatchRequest:e.dispatch})};var Me=function(e,t){var r;return void 0!==(null==(r=e.meta)?void 0:r.normalize)?e.meta.normalize:t},Ce=function(){function e(e,t,r){this.ws=new r(e,t),this.onError=null,this.onOpen=null,this.onClose=null,this.onMessage=null,this.killed=!1,this.sentMessages=this.ws.sentMessages}var t=e.prototype;return t.addEventListener=function(e,t){var r=this;"error"===e?this.onError=t:"close"===e?this.onClose=function(e){r.killed||(r.killed=!0,t(e),r.removeAllListeners())}:"open"===e?this.onOpen=t:"message"===e&&(this.onMessage=t),this.ws.addEventListener(e,"close"===e?this.onClose:t)},t.removeAllListeners=function(){this.onError&&this.ws.removeEventListener("error",this.onError),this.onMessage&&this.ws.removeEventListener("message",this.onMessage),this.onOpen&&this.ws.removeEventListener("open",this.onOpen),this.onClose&&this.ws.removeEventListener("close",this.onClose)},t.close=function(e){this.onClose&&this.onClose({code:e}),this.ws.close(e)},t.send=function(e){this.ws.send(e)},t.sendToClient=function(e){this.ws.sendToClient(e)},t.open=function(){this.ws.open()},t.error=function(e){this.ws.error(e)},e}();const _e=function(e){var t,r=e.normalize,n=void 0!==r&&r,u=e.subscriber,s=(u=void 0===u?{}:u).WS,a=void 0===s?"undefined"==typeof WebSocket?void 0:WebSocket:s,i=u.url,c=u.protocols,l=u.onOpen,d=u.onClose,f=u.onError,p=u.onMessage,m=u.onSend,y=u.activateOn,v=u.getData,R=u.onStopSubscriptions,O=u.lazy,S=void 0!==O&&O,A=u.isHeartbeatMessage,P=u.heartbeatTimeout,w=void 0===P?20:P,T=u.reconnectTimeout,j=void 0===T?5:T,K={},z=!1,M=null,C=null,_=null,k=function(){C&&(clearTimeout(C),C=null)},L=function(){M&&(clearTimeout(M),M=null)};return function(e){return function(r){return function(u){var s;if(u.type===h&&(_=u),!t&&a&&i&&!S||u.type===h){var O=ze(e);k(),L(),t&&t.close(1e3),(t=new Ce(i,c,a)).addEventListener("open",(function(){y||(e.dispatch(U()),z=!0),l&&l(O,t,u.type===h?u.props:null),A&&(L(),M=setTimeout((function(){e.dispatch(G(3e3))}),1e3*w))})),t.addEventListener("error",(function(e){f&&f(e,O,t)})),t.addEventListener("close",(function(r){var n;e.dispatch((n=r.code,{type:g,code:n})),z=!1,k(),L(),d&&d(r,O,t),1e3!==r.code&&j&&(C=setTimeout((function(){e.dispatch(_?u:I())}),1e3*j))})),t.addEventListener("message",(function(t){!z&&y&&y(t)&&(e.dispatch(U()),z=!0),A&&A(t)&&(L(),M=setTimeout((function(){e.dispatch(G(3e3))}),1e3*w));var r=JSON.parse(t.data);v&&(r=v(r)),p&&p(r,t,O);var o,u,s,a=K[r.type];a&&(null!=(o=a.meta)&&o.getData&&(r=a.meta.getData(r)),null!=(u=a.meta)&&u.onMessage&&a.meta.onMessage(r,t,O),(null!=(s=a.meta)&&s.mutations||Me(a,n))&&e.dispatch(function(e,t,r,n){var o,u={};return Me(e,n)&&(u.localData=t),null!=(o=e.meta)&&o.mutations&&(u.mutations=Re(e.meta.mutations,(function(e,n){return{local:!0,updateData:function(e){return n(e,t,r)}}}))),{type:e.type+"_MUTATION",meta:u}}(a,r,t,n)))}))}if("GET_WEBSOCKET"===u.type)return t;if(t&&u.type===b){k(),L();var P=r(u);return t.close(u.code),t=null,P}if(u.type===q)Object.values(K).forEach((function(e){var r=D(e);r.subscription&&t.send(JSON.stringify(m?m(r.subscription,e):r.subscription))}));else if(u.type===E){var T=ze(e);u.subscriptions?(R&&R(u.subscriptions,u,t,T),K=Re(K,(function(e,t){return u.subscriptions.includes(e)?void 0:t}))):(R&&R(Object.keys(K),u,t,T),K={})}else if(void 0!==u.subscription||void 0!==(null==(s=u.payload)?void 0:s.subscription)){var W,Q,N,x;(null!=(W=u.meta)&&W.onMessage||null!=(Q=u.meta)&&Q.mutations||Me(u,n))&&(K=o()({},K,((x={})[u.type+((null==(N=u.meta)?void 0:N.requestKey)||"")]=u,x)));var B=D(u);B.subscription&&t&&z&&t.send(JSON.stringify(m?m(B.subscription,u):B.subscription))}return r(u)}}}};var ke=function(e){var t;return e.type+((null==(t=e.meta)?void 0:t.requestKey)||"")};const Le=function(e){void 0===e&&(e=J);var t={};return function(r){return function(n){return function(u){var s,a;if(u.type===v||u.type===c)if(u.requests){var i=u.requests.map((function(e){return"object"==typeof e?e.requestType.toString()+(e.requestKey||""):e.toString()})),l=o()({},t);i.forEach((function(e){clearInterval(l[e]),delete l[e]})),t=l}else Object.values(t).forEach(clearInterval),t={};else if(e.isRequestAction(u)&&e.isRequestActionQuery(u)&&(null==(s=u.meta)||!s.polled)&&t[ke(u)]){var d=o()({},t);clearInterval(t[ke(u)]),delete d[ke(u)],t=d}return e.isRequestAction(u)&&e.isRequestActionQuery(u)&&null!=(a=u.meta)&&a.poll&&!u.meta.polled&&(t[ke(u)]=setInterval((function(){r.dispatch(o()({},u,{meta:o()({},u.meta,{polled:!0})}))}),1e3*u.meta.poll)),n(u)}}}},We=function(e,t){void 0===t&&(t=J);var r=0,n=[],o=[];return function(){return function(u){return function(s){var a;if(t.isRequestAction(s))r+=void 0!==(null==(a=s.meta)?void 0:a.dependentRequestsNumber)?s.meta.dependentRequestsNumber+1:1;else if(j(s))return s=u(s),z(s)?(n.push(s),r-=s.meta.isDependentRequest?2:1):(o.push(s),r-=void 0!==s.meta.dependentRequestsNumber?s.meta.dependentRequestsNumber+1:1,r-=s.meta.isDependentRequest?1:0),0===r&&(o.length>0?e.reject({successActions:n,errorActions:o}):e.resolve(n)),s;return u(s)}}}},Qe=function(e){return void 0===e&&(e=J),function(t){return function(r){return function(n){var u;if(!e.isRequestAction(n))return r(n);var s=t.getState(),a=s.requests.ssr.find((function(e){var t;return(e.requestType||e)===n.type+((null==(t=n.meta)?void 0:t.requestKey)||"")}));if(!a)return r(n);var i=ae(s,{type:n.type,requestKey:null==(u=n.meta)?void 0:u.requestKey});return n.meta=a.duplicate?o()({},n.meta,{ssrDuplicate:!0}):n.meta,i.error?r(o()({},n,{meta:o()({},n.meta,{ssrError:i.error})})):r(o()({},n,{meta:o()({},n.meta,{ssrResponse:{data:i.data}})}))}}}},Ne=function(e){return void 0===e&&(e=J),function(t){return function(r){return function(n){var u;if(e.isRequestAction(n)&&null!=(u=n.meta)&&u.cache&&!n.meta.ssrResponse){var s=function(e){return e.type+(e.meta.requestKey||"")}(n),a=t.getState(),i=a.requests.cache[s];if(void 0!==i&&function(e,t){return e.cacheKey===t.meta.cacheKey&&(null===e.timeout||Date.now()<=e.timeout)}(i,n)){var c,l=ae(a,{type:n.type,requestKey:null==(c=n.meta)?void 0:c.requestKey});return r(o()({},n,{meta:o()({},n.meta,{cacheResponse:{data:l.data}})}))}}return r(n)}}}};var xe=function(e){return"function"==typeof e?e.toString():e},Be=function(e){var t;return e.type+(null!=(t=e.meta)&&t.requestKey?e.meta.requestKey:"")},Ue=function(e){var t,r,n;return!!(null!=(t=e.meta)&&t.cacheResponse||null!=(r=e.meta)&&r.ssrResponse||null!=(n=e.meta)&&n.ssrError)};const Ie=function(e){var t={},r={};return function(n){return function(u){return function(s){var a,i,p,m=D(s),v=ze(n);if(s.type===y)return u(s),r[s.requestType]||new Promise((function(e){return setTimeout(e,10)}));if(s.type===l||s.type===c&&m.abortPending)return function(e,t){var r=D(e),n=!!r.requests&&r.requests.map((function(e){return"object"==typeof e?xe(e.requestType)+(e.requestKey||""):xe(e)}));r.requests?Object.entries(t).filter((function(e){var t=e[0];return n.includes(t)})).forEach((function(e){return e[1].forEach((function(e){return e.cancel()}))})):Object.values(t).forEach((function(e){return e.forEach((function(e){return e.cancel()}))}))}(s,t),u(s);if(e.isRequestAction(s)){var q=Be(s);r[q]=((p=new Promise((function(e,t){a=e,i=t}))).resolve=a,p.reject=i,p);var g=function(e,t,r,n){var o,u,s,a=D(e),i=Array.isArray(a.request);if(null!=(o=e.meta)&&o.cacheResponse)return[Promise.resolve(e.meta.cacheResponse)];if(null!=(u=e.meta)&&u.ssrResponse)return[Promise.resolve(e.meta.ssrResponse)];if(null!=(s=e.meta)&&s.ssrError)return[Promise.reject(e.meta.ssrError)];var c=i?{}:function(e,t){var r,n,o={};return null!=(r=e.meta)&&r.measureDownloadProgress&&(o.setDownloadProgress=function(r){var n;return t.dispatch(function(e,t){return{type:d,requestType:e,progress:t}}(e.type+((null==(n=e.meta)?void 0:n.requestKey)||""),r))}),null!=(n=e.meta)&&n.measureUploadProgress&&(o.setUploadProgress=function(r){var n;return t.dispatch(function(e,t){return{type:f,requestType:e,progress:t}}(e.type+((null==(n=e.meta)?void 0:n.requestKey)||""),r))}),o}(e,n),l=function(e,t){var r;return null!=(r=t.meta)&&r.driver?e.driver[t.meta.driver]:e.driver.default||e.driver}(t,e),p=Be(e);(function(e,t){var r;return void 0!==(null==(r=e.meta)?void 0:r.takeLatest)?e.meta.takeLatest:"function"==typeof t.takeLatest?t.takeLatest(e):t.takeLatest})(e,t)&&r[p]&&r[p].forEach((function(e){return e.cancel()}));var m=i?a.request.map((function(t){return l(t,e,c)})):[l(a.request,e,c)];return m[0].cancel&&(r[p]=m),m}(s=function(e,t){return e.meta&&e.meta.silent||(e=t(e)),e}(s=function(e,t){var r,n=D(e);return null!=(r=e.meta)&&r.onRequest&&!e.meta.ssrDuplicate?e.request?o()({},e,{request:e.meta.onRequest(n.request,e,t)}):o()({},e,{payload:o()({},e.payload,{request:e.meta.onRequest(n.request,e,t)})}):e}(s=function(e,t,r){var n=D(e);return!t.onRequest||e.meta&&(!1===e.meta.runOnRequest||e.meta.ssrDuplicate)?e:e.request?o()({},e,{request:t.onRequest(n.request,e,r)}):o()({},e,{payload:o()({},e.payload,{request:t.onRequest(n.request,e,r)})})}(s,e,v),v),u),e,t,n);return Promise.all(g).catch((function(e){return function(e,t){var r;if("REQUEST_ABORTED"!==t&&!Ue(e)&&null!=(r=e.meta)&&r.getError)throw e.meta.getError(t);throw t}(s,e)})).catch((function(t){return function(e,t,r,n){if("REQUEST_ABORTED"!==n&&t.onError&&(!e.meta||!1!==e.meta.runOnError&&!e.meta.ssrDuplicate))return Promise.all([t.onError(n,e,r)]);throw n}(s,e,v,t)})).catch((function(e){return function(e,t,r){var n;if("REQUEST_ABORTED"!==r&&null!=(n=e.meta)&&n.onError&&!e.meta.ssrDuplicate)return Promise.all([e.meta.onError(r,e,t)]);throw r}(s,v,e)})).catch((function(t){return function(e,t,r,n){throw"REQUEST_ABORTED"!==n||!t.onAbort||e.meta&&!1===e.meta.runOnAbort||t.onAbort(e,r),n}(s,e,v,t)})).catch((function(e){return function(e,t,r){var n;throw"REQUEST_ABORTED"===r&&null!=(n=e.meta)&&n.onAbort&&e.meta.onAbort(e,t),r}(s,v,e)})).catch((function(e){if("REQUEST_ABORTED"===e){var t=function(e){return{type:A(e.type),meta:o()({},e.meta,{requestAction:e})}}(s);throw s.meta&&s.meta.silent||n.dispatch(t),r[q].resolve({action:t,isAborted:!0}),{action:t,isAborted:!0}}var u=w(s,e);throw s.meta&&s.meta.silent||n.dispatch(u),r[q].resolve({action:u,error:e}),{action:u,error:e}})).then((function(e){return e=function(e,t){var r=D(e),n=Array.isArray(r.request),o=Object.keys(t[0]);return n&&!Ue(e)?t.reduce((function(e,t){return o.forEach((function(r){e[r].push(t[r])})),e}),function(e){return e.reduce((function(e,t){return e[t]=[],e}),{})}(o)):t[0]}(s,e),function(e,t,r){var n;if(!Ue(e)&&null!=(n=e.meta)&&n.getData){var u,s=ae(t.getState(),{type:e.type,requestKey:null==(u=e.meta)?void 0:u.requestKey});return o()({},r,{data:e.meta.getData(r.data,s.data)})}return r}(s,n,e)})).then((function(t){return function(e,t,r,n){if(t.onSuccess&&(!e.meta||!1!==e.meta.runOnSuccess&&!e.meta.ssrDuplicate)){var o=t.onSuccess(n,e,r);if(!Ue(e))return o}return n}(s,e,v,t)})).then((function(e){return function(e,t,r){var n;if(null!=(n=e.meta)&&n.onSuccess&&!e.meta.ssrDuplicate){var o=e.meta.onSuccess(r,e,t);if(!Ue(e))return o}return r}(s,v,e)})).then((function(e){var t=function(e,t){return o()({type:O(e.type)},P(e)?{payload:t}:{response:t},{meta:o()({},e.meta,{requestAction:e})})}(s,e);return s.meta&&s.meta.silent||n.dispatch(t),r[q].resolve(o()({action:t},e)),o()({action:t},e)})).catch((function(e){if(e&&e.action)return e;throw e}))}return u(s)}}}},Ge=function(e){var t,r,n,u=o()({},J,e),s="server"!==u.ssr||u.disableRequestsPromise?null:((n=new Promise((function(e,n){t=e,r=n}))).resolve=t,n.reject=r,n);return{requestsReducer:Ke(u),requestsMiddleware:["server"!==u.ssr&&u.subscriber&&_e(u),"server"!==u.ssr&&Le(u),"server"===u.ssr&&!u.disableRequestsPromise&&We(s,u),"client"===u.ssr&&Qe(u),u.cache&&Ne(u),Ie(u)].filter(Boolean),requestsPromise:s}};var He={loading:!1,pending:0,error:null,downloadProgress:null,uploadProgress:null},Je=function(e,t,r){return void 0===r&&(r=""),e.requests.mutations[t+r]},$e=new WeakMap;const Ve=function(e,t){var r=t.type,n=t.requestKey,o=Je(e,r,n);return o?($e.get(o.ref)||$e.set(o.ref,function(e,t){return(0,F.createSelector)((function(r){return Je(r,e,t)}),(function(r){var n;return null!=(n=r.requests.downloadProgress[e+(t||"")])?n:null}),(function(r){var n;return null!=(n=r.requests.uploadProgress[e+(t||"")])?n:null}),(function(e,t,r){return{pending:e.pending,loading:e.pending>0,error:e.error,downloadProgress:t,uploadProgress:r}}))}(r,n)),$e.get(o.ref)(e)):He},Fe=function(e){return function(t){return ae(t,e)}},Xe=function(e){return function(t){return Ve(t,e)}},Ye=function(e){return e.requests.websocket}},714:e=>{"use strict";var t=function(e){return function(e){return!!e&&"object"==typeof e}(e)&&!function(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||function(e){return e.$$typeof===r}(e)}(e)},r="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function n(e,t){return!1!==t.clone&&t.isMergeableObject(e)?a((r=e,Array.isArray(r)?[]:{}),e,t):e;var r}function o(e,t,r){return e.concat(t).map((function(e){return n(e,r)}))}function u(e){return Object.keys(e).concat(function(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter((function(t){return e.propertyIsEnumerable(t)})):[]}(e))}function s(e,t){try{return t in e}catch(e){return!1}}function a(e,r,i){(i=i||{}).arrayMerge=i.arrayMerge||o,i.isMergeableObject=i.isMergeableObject||t,i.cloneUnlessOtherwiseSpecified=n;var c=Array.isArray(r);return c===Array.isArray(e)?c?i.arrayMerge(e,r,i):function(e,t,r){var o={};return r.isMergeableObject(e)&&u(e).forEach((function(t){o[t]=n(e[t],r)})),u(t).forEach((function(u){(function(e,t){return s(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))})(e,u)||(s(e,u)&&r.isMergeableObject(t[u])?o[u]=function(e,t){if(!t.customMerge)return a;var r=t.customMerge(e);return"function"==typeof r?r:a}(u,r)(e[u],t[u],r):o[u]=n(t[u],r))})),o}(e,r,i):n(r,i)}a.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce((function(e,r){return a(e,r,t)}),{})};var i=a;e.exports=i},573:t=>{"use strict";t.exports=e}},r={};function n(e){if(r[e])return r[e].exports;var o=r[e]={exports:{}};return t[e](o,o.exports,n),o.exports}return n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n(103)})()}));
//# sourceMappingURL=redux-requests.min.js.map