{"version":3,"sources":["webpack://ReduxRequests/webpack/universalModuleDefinition","webpack://ReduxRequests/../node_modules/@babel/runtime/helpers/extends.js","webpack://ReduxRequests/../node_modules/@babel/runtime/helpers/objectWithoutPropertiesLoose.js","webpack://ReduxRequests/./src/constants.js","webpack://ReduxRequests/./src/actions.js","webpack://ReduxRequests/./src/default-config.js","webpack://ReduxRequests/./src/normalizers/get-dependent-keys.js","webpack://ReduxRequests/./src/normalizers/denormalize.js","webpack://ReduxRequests/./src/selectors/get-query.js","webpack://ReduxRequests/./src/normalizers/merge-data.js","webpack://ReduxRequests/./src/normalizers/normalize.js","webpack://ReduxRequests/./src/reducers/update-data.js","webpack://ReduxRequests/./src/reducers/queries-reducer.js","webpack://ReduxRequests/./src/reducers/cache-reducer.js","webpack://ReduxRequests/./src/helpers.js","webpack://ReduxRequests/./src/reducers/requests-reset-reducer.js","webpack://ReduxRequests/./src/reducers/ssr-reducer.js","webpack://ReduxRequests/./src/reducers/watchers-reducer.js","webpack://ReduxRequests/./src/reducers/websocket-reducer.js","webpack://ReduxRequests/./src/reducers/requests-reducer.js","webpack://ReduxRequests/./src/reducers/mutations-reducer.js","webpack://ReduxRequests/./src/reducers/requests-keys-reducer.js","webpack://ReduxRequests/./src/reducers/progress-reducer.js","webpack://ReduxRequests/./src/middleware/create-requests-store.js","webpack://ReduxRequests/./src/middleware/create-subscriptions-middleware.js","webpack://ReduxRequests/./src/middleware/create-polling-middleware.js","webpack://ReduxRequests/./src/middleware/create-server-ssr-middleware.js","webpack://ReduxRequests/./src/middleware/create-client-ssr-middleware.js","webpack://ReduxRequests/./src/middleware/create-requests-cache-middleware.js","webpack://ReduxRequests/./src/middleware/create-send-requests-middleware.js","webpack://ReduxRequests/./src/handle-requests.js","webpack://ReduxRequests/./src/selectors/get-mutation.js","webpack://ReduxRequests/./src/selectors/get-query-selector.js","webpack://ReduxRequests/./src/selectors/get-mutation-selector.js","webpack://ReduxRequests/./src/selectors/get-websocket-state.js","webpack://ReduxRequests/../node_modules/deepmerge/dist/cjs.js","webpack://ReduxRequests/external {\"commonjs\":\"reselect\",\"commonjs2\":\"reselect\",\"amd\":\"reselect\",\"root\":\"Reselect\"}","webpack://ReduxRequests/webpack/bootstrap","webpack://ReduxRequests/webpack/startup","webpack://ReduxRequests/webpack/runtime/compat get default export","webpack://ReduxRequests/webpack/runtime/define property getters","webpack://ReduxRequests/webpack/runtime/hasOwnProperty shorthand","webpack://ReduxRequests/webpack/runtime/make namespace object"],"names":["root","factory","exports","module","require","define","amd","self","__WEBPACK_EXTERNAL_MODULE__573__","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","excluded","sourceKeys","keys","indexOf","SUCCESS_SUFFIX","ERROR_SUFFIX","ABORT_SUFFIX","CLEAR_REQUESTS_CACHE","RESET_REQUESTS","ABORT_REQUESTS","SET_DOWNLOAD_PROGRESS","SET_UPLOAD_PROGRESS","ADD_WATCHER","REMOVE_WATCHER","JOIN_REQUEST","STOP_POLLING","WEBSOCKET_OPENED","WEBSOCKET_CLOSED","OPEN_WEBSOCKET","CLOSE_WEBSOCKET","STOP_SUBSCRIPTIONS","getActionWithSuffix","suffix","actionType","success","error","abort","isFSA","action","payload","createErrorAction","errorData","type","meta","requestAction","getActionPayload","undefined","isRequestAction","actionPayload","request","Array","isArray","url","query","promise","response","Error","isResponseAction","getRequestActionFromResponse","isSuccessAction","endsWith","isErrorAction","isRequestQuery","method","toLowerCase","trim","startsWith","isRequestActionQuery","asMutation","every","clearRequestsCache","requests","resetRequests","abortPending","resetCached","abortRequests","stopPolling","addWatcher","requestType","removeWatcher","joinRequest","rehydrate","websocketOpened","openWebsocket","props","closeWebsocket","code","stopSubscriptions","subscriptions","driver","onRequest","onSuccess","onError","onAbort","cache","ssr","disableRequestsPromise","takeLatest","normalize","getNormalisationObjectKey","obj","id","shouldObjectBeNormalized","subscriber","getDependentKeys","data","normalizedData","usedKeys","dependentKeys","path","Set","add","forEach","v","entries","filter","k","includes","denormalize","map","reduce","prev","createCustomSelector","createSelectorCreator","defaultMemoize","currentVal","previousVal","pending","pristine","downloadProgress","uploadProgress","multiple","defaultData","normalized","currentDependencies","previousDependencies","size","has","getData","getQueryState","state","requestKey","queries","defaultQuery","loading","defaultQueryMultiple","defaultQueriesWithCustomData","Map","querySelectors","WeakMap","queryState","get","ref","set","createQuerySelector","getDefaultQuery","mergeOptions","arrayMerge","destinationArray","sourceArray","clone","mergeData","oldData","newData","deepmerge","stipFromDeps","config","getDependencies","defaultConfig","current","dependencies","getDataUpdater","mutationConfig","updateData","getDataFromResponseAction","shouldBeNormalized","queryReducer","mutations","dataUpdater","revertData","updateDataOptimistic","local","getQuery","ssrResponse","cacheResponse","ssrError","getRequestTypeString","toString","getRequestKey","timeout","Date","now","cacheKey","mapObject","callback","newValue","resetMutation","mutation","isCacheValid","duplicate","indexToRemove","findIndex","_","connected","defaultState","requestsKeys","watchers","websocket","optimisticData","newNormalizedData","revertedData","localData","updateNormalizedData","updatedQuery","newdata","queryActionType","maybeGetQueryActionType","queryType","queriesReducer","mutationType","isAbortAction","mutationsReducer","requestsCapacity","isQuery","requestsStorage","numberOfExceedingRequests","exceedingRequestsKeys","slice","exceededRequest","copiedStorage","copiedCache","requestKeysReducer","clearAll","cacheValue","requestsResetReducer","cacheReducer","progress","measureDownloadProgress","measureUploadProgress","progressReducer","ssrReducer","watchersReducer","websocketReducer","store","dispatchRequest","dispatch","globalNormalize","CleanableWebsocket","protocols","WS","ws","onOpen","onClose","onMessage","killed","sentMessages","addEventListener","e","removeAllListeners","removeEventListener","close","send","message","sendToClient","open","WebSocket","onSend","activateOn","onStopSubscriptions","lazy","isHeartbeatMessage","heartbeatTimeout","reconnectTimeout","active","lastHeartbeatTimeout","lastReconnectTimeout","lastOpenWebsocketAction","clearLastReconnectTimeout","clearTimeout","clearLastHeartbeatTimeout","next","requestsStore","createRequestsStore","setTimeout","JSON","parse","subscription","subscriptionAction","subscriptionData","transformIntoLocalMutation","values","stringify","getIntervalKey","intervals","intervalsCopy","clearInterval","polled","poll","setInterval","requestsPromise","index","successActions","errorActions","dependentRequestsNumber","push","isDependentRequest","reject","resolve","getState","actionToIgnore","find","ssrDuplicate","getKey","getLastActionKey","isActionRehydrated","pendingRequests","allPendingRequests","res","rej","Promise","r","cancel","abortPendingRequests","lastActionKey","responsePromises","isBatchedRequest","driverActions","setDownloadProgress","setUploadProgress","getDriverActions","getDriver","isTakeLatest","getResponsePromises","silent","maybeDispatchRequestAction","maybeCallOnRequestMeta","runOnRequest","maybeCallOnRequestInterceptor","all","getError","maybeCallGetError","runOnError","maybeCallOnErrorInterceptor","maybeCallOnErrorMeta","runOnAbort","maybeCallOnAbortInterceptor","maybeCallOnAbortMeta","abortAction","createAbortAction","isAborted","errorAction","then","responseKeys","getInitialBatchObject","maybeTransformBatchRequestResponse","maybeCallGetData","runOnSuccess","result","maybeCallOnSuccessInterceptor","maybeCallOnSuccessMeta","successAction","createSuccessAction","userConfig","requestsReducer","requestsMiddleware","createSubscriptionsMiddleware","createPollingMiddleware","createServerSsrMiddleware","createClientSsrMiddleware","createRequestsCacheMiddleware","createSendRequestsMiddleware","Boolean","defaultMutation","getMutationState","mutationSelectors","mutationState","createSelector","createMutationSelector","getMutation","isMergeableObject","value","isNonNullObject","stringValue","$$typeof","REACT_ELEMENT_TYPE","isReactElement","isSpecial","Symbol","for","cloneUnlessOtherwiseSpecified","options","val","defaultArrayMerge","concat","element","getKeys","getOwnPropertySymbols","symbol","propertyIsEnumerable","getEnumerableOwnPropertySymbols","propertyIsOnObject","object","property","sourceIsArray","destination","propertyIsUnsafe","customMerge","getMergeFunction","mergeObject","array","deepmerge_1","__webpack_module_cache__","__webpack_require__","moduleId","__webpack_modules__","n","getter","__esModule","d","a","definition","o","defineProperty","enumerable","prop","toStringTag"],"mappings":"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","file":"redux-requests.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"reselect\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"reselect\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ReduxRequests\"] = factory(require(\"reselect\"));\n\telse\n\t\troot[\"ReduxRequests\"] = factory(root[\"Reselect\"]);\n})(self, function(__WEBPACK_EXTERNAL_MODULE__573__) {\nreturn ","function _extends() {\n  module.exports = _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nmodule.exports = _extends;","function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nmodule.exports = _objectWithoutPropertiesLoose;","export const SUCCESS_SUFFIX = '_SUCCESS';\nexport const ERROR_SUFFIX = '_ERROR';\nexport const ABORT_SUFFIX = '_ABORT';\nexport const CLEAR_REQUESTS_CACHE = 'CLEAR_REQUESTS_CACHE';\nexport const RESET_REQUESTS = 'RESET_REQUESTS';\nexport const ABORT_REQUESTS = 'ABORT_REQUESTS';\nexport const SET_DOWNLOAD_PROGRESS = 'SET_DOWNLOAD_PROGRESS';\nexport const SET_UPLOAD_PROGRESS = 'SET_UPLOAD_PROGRESS';\nexport const ADD_WATCHER = 'ADD_WATCHER';\nexport const REMOVE_WATCHER = 'REMOVE_WATCHER';\nexport const JOIN_REQUEST = 'JOIN_REQUEST';\nexport const STOP_POLLING = 'STOP_POLLING';\nexport const WEBSOCKET_OPENED = 'WEBSOCKET_OPENED';\nexport const WEBSOCKET_CLOSED = 'WEBSOCKET_CLOSED';\nexport const GET_WEBSOCKET = 'GET_WEBSOCKET';\nexport const OPEN_WEBSOCKET = 'OPEN_WEBSOCKET';\nexport const CLOSE_WEBSOCKET = 'CLOSE_WEBSOCKET';\nexport const STOP_SUBSCRIPTIONS = 'STOP_SUBSCRIPTIONS';\n","import {\n  SUCCESS_SUFFIX,\n  ERROR_SUFFIX,\n  ABORT_SUFFIX,\n  CLEAR_REQUESTS_CACHE,\n  RESET_REQUESTS,\n  ABORT_REQUESTS,\n  SET_DOWNLOAD_PROGRESS,\n  SET_UPLOAD_PROGRESS,\n  ADD_WATCHER,\n  REMOVE_WATCHER,\n  JOIN_REQUEST,\n  STOP_POLLING,\n  WEBSOCKET_OPENED,\n  WEBSOCKET_CLOSED,\n  GET_WEBSOCKET,\n  OPEN_WEBSOCKET,\n  CLOSE_WEBSOCKET,\n  STOP_SUBSCRIPTIONS,\n} from './constants';\n\nconst getActionWithSuffix = suffix => actionType => actionType + suffix;\n\nexport const success = getActionWithSuffix(SUCCESS_SUFFIX);\n\nexport const error = getActionWithSuffix(ERROR_SUFFIX);\n\nexport const abort = getActionWithSuffix(ABORT_SUFFIX);\n\nconst isFSA = action => !!action.payload;\n\nexport const createSuccessAction = (action, response) => ({\n  type: success(action.type),\n  ...(isFSA(action) ? { payload: response } : { response }),\n  meta: {\n    ...action.meta,\n    requestAction: action,\n  },\n});\n\nexport const createErrorAction = (action, errorData) => ({\n  type: error(action.type),\n  ...(isFSA(action)\n    ? {\n        payload: errorData,\n        error: true,\n      }\n    : {\n        error: errorData,\n      }),\n  meta: {\n    ...action.meta,\n    requestAction: action,\n  },\n});\n\nexport const createAbortAction = action => ({\n  type: abort(action.type),\n  meta: {\n    ...action.meta,\n    requestAction: action,\n  },\n});\n\nexport const getActionPayload = action =>\n  action.payload === undefined ? action : action.payload;\n\n// eslint-disable-next-line import/no-unused-modules\nexport const getResponseFromSuccessAction = action =>\n  action.payload ? action.payload : action.response;\n\nexport const isRequestAction = action => {\n  const actionPayload = getActionPayload(action);\n\n  return (\n    !!actionPayload?.request &&\n    !!(\n      Array.isArray(actionPayload.request) ||\n      actionPayload.request.url ||\n      actionPayload.request.query ||\n      actionPayload.request.promise ||\n      actionPayload.request.response ||\n      actionPayload.request.error\n    ) &&\n    !actionPayload.response &&\n    !(actionPayload instanceof Error)\n  );\n};\n\nexport const isResponseAction = action => !!action.meta?.requestAction;\n\nexport const getRequestActionFromResponse = action => action.meta.requestAction;\n\nexport const isSuccessAction = action =>\n  isResponseAction(action) && action.type.endsWith(SUCCESS_SUFFIX);\n\nexport const isErrorAction = action =>\n  isResponseAction(action) && action.type.endsWith(ERROR_SUFFIX);\n\nexport const isAbortAction = action =>\n  isResponseAction(action) && action.type.endsWith(ABORT_SUFFIX);\n\nconst isRequestQuery = request =>\n  (!request.query &&\n    (!request.method || request.method.toLowerCase() === 'get')) ||\n  (request.query && !request.query.trim().startsWith('mutation'));\n\nexport const isRequestActionQuery = action => {\n  const { request } = getActionPayload(action);\n\n  if (action.meta?.asMutation !== undefined) {\n    return !action.meta.asMutation;\n  }\n\n  return !!(Array.isArray(request)\n    ? request.every(isRequestQuery)\n    : isRequestQuery(request));\n};\n\nexport const clearRequestsCache = (requests = null) => ({\n  type: CLEAR_REQUESTS_CACHE,\n  requests,\n});\n\nexport const resetRequests = (\n  requests = null,\n  abortPending = true,\n  resetCached = true,\n) => ({\n  type: RESET_REQUESTS,\n  requests,\n  abortPending,\n  resetCached,\n});\n\nexport const abortRequests = (requests = null) => ({\n  type: ABORT_REQUESTS,\n  requests,\n});\n\nexport const stopPolling = (requests = null) => ({\n  type: STOP_POLLING,\n  requests,\n});\n\nexport const setDownloadProgress = (requestType, progress) => ({\n  type: SET_DOWNLOAD_PROGRESS,\n  requestType,\n  progress,\n});\n\nexport const setUploadProgress = (requestType, progress) => ({\n  type: SET_UPLOAD_PROGRESS,\n  requestType,\n  progress,\n});\n\nexport const addWatcher = requestType => ({\n  type: ADD_WATCHER,\n  requestType,\n});\n\nexport const removeWatcher = requestType => ({\n  type: REMOVE_WATCHER,\n  requestType,\n});\n\nexport const joinRequest = (requestType, rehydrate = false) => ({\n  type: JOIN_REQUEST,\n  requestType,\n  rehydrate,\n});\n\nexport const websocketOpened = () => ({ type: WEBSOCKET_OPENED });\n\nexport const websocketClosed = code => ({ type: WEBSOCKET_CLOSED, code });\n\nexport const getWebsocket = () => ({ type: GET_WEBSOCKET });\n\nexport const openWebsocket = (props = null) => ({\n  type: OPEN_WEBSOCKET,\n  props,\n});\n\nexport const closeWebsocket = (code = 1000) => ({\n  type: CLOSE_WEBSOCKET,\n  code,\n});\n\nexport const stopSubscriptions = (subscriptions = null) => ({\n  type: STOP_SUBSCRIPTIONS,\n  subscriptions,\n});\n","import { isRequestActionQuery, isRequestAction } from './actions';\n\nexport default {\n  driver: null,\n  onRequest: null,\n  onSuccess: null,\n  onError: null,\n  onAbort: null,\n  cache: false,\n  ssr: null,\n  disableRequestsPromise: false,\n  isRequestAction,\n  isRequestActionQuery,\n  takeLatest: isRequestActionQuery,\n  normalize: false,\n  getNormalisationObjectKey: obj => obj.id,\n  shouldObjectBeNormalized: obj => obj.id !== undefined,\n  subscriber: null,\n};\n","export const getDependentKeys = (\n  data,\n  normalizedData,\n  usedKeys,\n  dependentKeys,\n  path = '',\n) => {\n  if (!dependentKeys) {\n    dependentKeys = new Set();\n  }\n\n  if (typeof data === 'string' && data.startsWith('@@')) {\n    dependentKeys.add(data);\n    getDependentKeys(\n      normalizedData[data],\n      normalizedData,\n      usedKeys,\n      dependentKeys,\n      path,\n    );\n  } else if (Array.isArray(data)) {\n    data.forEach(v =>\n      getDependentKeys(v, normalizedData, usedKeys, dependentKeys, path),\n    );\n  } else if (data !== null && typeof data === 'object') {\n    const objectEntries = usedKeys[path]\n      ? Object.entries(data).filter(([k]) => usedKeys[path].includes(k))\n      : Object.entries(data);\n\n    objectEntries.forEach(([k, v]) => {\n      getDependentKeys(\n        v,\n        normalizedData,\n        usedKeys,\n        dependentKeys,\n        `${path}.${k}`,\n      );\n    });\n  }\n\n  return dependentKeys;\n};\n","export const denormalize = (data, normalizedData, usedKeys, path = '') => {\n  if (typeof data === 'string' && data.startsWith('@@')) {\n    return denormalize(normalizedData[data], normalizedData, usedKeys, path);\n  }\n\n  if (Array.isArray(data)) {\n    return data.map(v => denormalize(v, normalizedData, usedKeys, path));\n  }\n\n  if (data !== null && typeof data === 'object') {\n    const objectEntries = usedKeys[path]\n      ? Object.entries(data).filter(([k]) => usedKeys[path].includes(k))\n      : Object.entries(data);\n\n    return objectEntries.reduce((prev, [k, v]) => {\n      prev[k] = denormalize(v, normalizedData, usedKeys, `${path}.${k}`);\n      return prev;\n    }, {});\n  }\n\n  return data;\n};\n","import { createSelectorCreator, defaultMemoize } from 'reselect';\n\nimport { denormalize, getDependentKeys } from '../normalizers';\n\nconst isQueryEqual = (currentVal, previousVal) => {\n  if (\n    currentVal.data !== previousVal.data ||\n    currentVal.pending !== previousVal.pending ||\n    currentVal.error !== previousVal.error ||\n    currentVal.pristine !== previousVal.pristine ||\n    currentVal.downloadProgress !== previousVal.downloadProgress ||\n    currentVal.uploadProgress !== previousVal.uploadProgress\n  ) {\n    return false;\n  }\n\n  if (\n    currentVal.data === null &&\n    (currentVal.multiple !== previousVal.multiple ||\n      currentVal.defaultData !== previousVal.defaultData)\n  ) {\n    return false;\n  }\n\n  if (\n    currentVal.normalized &&\n    currentVal.normalizedData !== previousVal.normalizedData\n  ) {\n    const currentDependencies = getDependentKeys(\n      currentVal.data,\n      currentVal.normalizedData,\n      currentVal.usedKeys,\n    );\n    const previousDependencies = getDependentKeys(\n      previousVal.data,\n      previousVal.normalizedData,\n      previousVal.usedKeys,\n    );\n\n    if (currentDependencies.size !== previousDependencies.size) {\n      return false;\n    }\n\n    for (const k of currentDependencies) {\n      if (\n        !previousDependencies.has(k) ||\n        currentVal.normalizedData[k] !== previousVal.normalizedData[k]\n      ) {\n        return false;\n      }\n    }\n  }\n\n  return true;\n};\n\nconst createCustomSelector = createSelectorCreator(\n  defaultMemoize,\n  isQueryEqual,\n);\n\nconst getData = (data, multiple, defaultData) => {\n  if (data !== null) {\n    return data;\n  }\n\n  if (defaultData !== undefined) {\n    return defaultData;\n  }\n\n  if (multiple) {\n    return [];\n  }\n\n  return data;\n};\n\nconst getQueryState = (state, type, requestKey = '') =>\n  state.requests.queries[type + requestKey];\n\nconst createQuerySelector = (type, requestKey) =>\n  createCustomSelector(\n    (state, defaultData, multiple) => {\n      // in order not to keep queryState.ref reference in selector memoize\n      const {\n        data,\n        pending,\n        error,\n        pristine,\n        normalized,\n        usedKeys,\n      } = getQueryState(state, type, requestKey);\n\n      return {\n        data,\n        pending,\n        error,\n        pristine,\n        normalized,\n        usedKeys,\n        multiple,\n        defaultData,\n        normalizedData: state.requests.normalizedData,\n        downloadProgress:\n          state.requests.downloadProgress[type + (requestKey || '')] ?? null,\n        uploadProgress:\n          state.requests.uploadProgress[type + (requestKey || '')] ?? null,\n      };\n    },\n    ({\n      data,\n      pending,\n      error,\n      pristine,\n      usedKeys,\n      normalized,\n      normalizedData,\n      defaultData,\n      multiple,\n      downloadProgress,\n      uploadProgress,\n    }) => ({\n      data: normalized\n        ? denormalize(\n            getData(data, multiple, defaultData),\n            normalizedData,\n            usedKeys,\n          )\n        : getData(data, multiple, defaultData),\n      pending,\n      loading: pending > 0,\n      error,\n      pristine,\n      downloadProgress,\n      uploadProgress,\n    }),\n  );\n\nconst defaultQuery = {\n  data: null,\n  pending: 0,\n  loading: false,\n  error: null,\n  pristine: true,\n  downloadProgress: null,\n  uploadProgress: null,\n};\n\nconst defaultQueryMultiple = {\n  ...defaultQuery,\n  data: [],\n};\n\nconst defaultQueriesWithCustomData = new Map();\n\nconst getDefaultQuery = (defaultData, multiple) => {\n  if (\n    defaultData !== undefined &&\n    defaultQueriesWithCustomData.get(defaultData)\n  ) {\n    return defaultQueriesWithCustomData.get(defaultData);\n  }\n\n  if (defaultData !== undefined) {\n    const query = { ...defaultQuery, data: defaultData };\n    defaultQueriesWithCustomData.set(defaultData, query);\n    return query;\n  }\n\n  return multiple ? defaultQueryMultiple : defaultQuery;\n};\n\nconst querySelectors = new WeakMap();\n\nexport default (state, { type, requestKey, defaultData, multiple = false }) => {\n  const queryState = getQueryState(state, type, requestKey);\n\n  if (!queryState) {\n    return getDefaultQuery(defaultData, multiple);\n  }\n\n  if (!querySelectors.get(queryState.ref)) {\n    querySelectors.set(queryState.ref, createQuerySelector(type, requestKey));\n  }\n\n  return querySelectors.get(queryState.ref)(state, defaultData, multiple);\n};\n","import deepmerge from 'deepmerge';\n\nconst mergeOptions = {\n  arrayMerge: (destinationArray, sourceArray) => sourceArray,\n  clone: false,\n};\n\nexport const mergeData = (oldData, newData) =>\n  deepmerge(oldData, newData, mergeOptions);\n","import defaultConfig from '../default-config';\n\nimport { mergeData } from './merge-data';\n\nconst stipFromDeps = (data, config, root = true) => {\n  if (Array.isArray(data)) {\n    return data.map(v => stipFromDeps(v, config));\n  }\n\n  if (data !== null && typeof data === 'object') {\n    if (config.shouldObjectBeNormalized(data) && root) {\n      return `@@${config.getNormalisationObjectKey(data)}`;\n    }\n\n    return Object.entries(data).reduce((prev, [k, v]) => {\n      prev[k] = stipFromDeps(v, config);\n      return prev;\n    }, {});\n  }\n\n  return data;\n};\n\nexport const getDependencies = (\n  data,\n  config = defaultConfig,\n  usedKeys,\n  path = '',\n) => {\n  usedKeys = usedKeys || {};\n\n  if (Array.isArray(data)) {\n    return [\n      data.reduce(\n        (prev, current) => [\n          ...prev,\n          ...getDependencies(current, config, usedKeys, path)[0],\n        ],\n        [],\n      ),\n      usedKeys,\n    ];\n  }\n\n  if (data !== null && typeof data === 'object') {\n    if (config.shouldObjectBeNormalized(data)) {\n      usedKeys[path] = Object.keys(data);\n    }\n\n    return [\n      Object.entries(data).reduce(\n        (prev, [k, v]) => [\n          ...prev,\n          ...getDependencies(v, config, usedKeys, `${path}.${k}`)[0],\n        ],\n        config.shouldObjectBeNormalized(data) ? [data] : [],\n      ),\n      usedKeys,\n    ];\n  }\n\n  return [[], usedKeys];\n};\n\nexport const normalize = (data, config = defaultConfig) => {\n  const [dependencies, usedKeys] = getDependencies(data, config);\n\n  return [\n    stipFromDeps(data, config, true),\n    dependencies.reduce((prev, v) => {\n      const key = config.getNormalisationObjectKey(v);\n      prev[`@@${key}`] = prev[`@@${key}`]\n        ? mergeData(prev[`@@${key}`], stipFromDeps(v, config, false))\n        : stipFromDeps(v, config, false);\n      return prev;\n    }, {}),\n    usedKeys,\n  ];\n};\n","import { isSuccessAction, isResponseAction } from '../actions';\n\nconst getDataUpdater = mutationConfig => {\n  if (typeof mutationConfig === 'function') {\n    return mutationConfig;\n  } else if (mutationConfig.updateData) {\n    return mutationConfig.updateData;\n  }\n\n  return null;\n};\n\nexport default (data, action, mutationConfig) => {\n  if (isResponseAction(action)) {\n    if (isSuccessAction(action)) {\n      const dataUpdater = getDataUpdater(mutationConfig);\n\n      return dataUpdater\n        ? dataUpdater(\n            data,\n            action.payload ? action.payload.data : action.response.data,\n          )\n        : data;\n    }\n\n    // error or abort case\n    return mutationConfig.revertData ? mutationConfig.revertData(data) : data;\n  }\n\n  if (mutationConfig.updateDataOptimistic) {\n    return mutationConfig.updateDataOptimistic(data);\n  }\n\n  if (mutationConfig.local) {\n    return getDataUpdater(mutationConfig)(data);\n  }\n\n  return data;\n};\n","import defaultConfig from '../default-config';\nimport {\n  success,\n  error,\n  abort,\n  isResponseAction,\n  getRequestActionFromResponse,\n  isErrorAction,\n  isSuccessAction,\n} from '../actions';\nimport { getQuery } from '../selectors';\nimport { normalize, mergeData } from '../normalizers';\n\nimport updateData from './update-data';\n\nconst getInitialQuery = normalized => ({\n  data: null,\n  pending: 0,\n  error: null,\n  pristine: true,\n  ref: {},\n  normalized,\n  usedKeys: normalized ? {} : null,\n});\n\nconst getDataFromResponseAction = action =>\n  action.payload ? action.payload.data : action.response.data;\n\nconst shouldBeNormalized = (action, config) =>\n  action.meta?.normalize !== undefined\n    ? action.meta.normalize\n    : config.normalize;\n\nconst queryReducer = (state, action, actionType, config, normalizedData) => {\n  if (state === undefined) {\n    state = getInitialQuery(shouldBeNormalized(action, config));\n  }\n\n  if (action.meta?.mutations?.[actionType]) {\n    const mutationConfig = action.meta.mutations[actionType];\n    const data = updateData(\n      state.normalized\n        ? getQuery(\n            {\n              requests: {\n                normalizedData,\n                queries: { [actionType]: state },\n                downloadProgress: {},\n                uploadProgress: {},\n              },\n            },\n            { type: actionType },\n          ).data\n        : state.data,\n      action,\n      mutationConfig,\n    );\n    return data === state.data ? state : { ...state, data };\n  }\n\n  switch (action.type) {\n    case success(actionType):\n      return action.meta?.ssrResponse || action.meta?.cacheResponse\n        ? state\n        : {\n            ...state,\n            data: getDataFromResponseAction(action),\n            pending: state.pending - 1,\n            error: null,\n          };\n\n    case error(actionType):\n      return action.meta?.ssrError\n        ? state\n        : {\n            ...state,\n            data: null,\n            pending: state.pending - 1,\n            error: action.payload ? action.payload : action.error,\n          };\n    case abort(actionType): {\n      if (state.pending === 1 && state.data === null && state.error === null) {\n        return undefined;\n      }\n\n      return {\n        ...state,\n        pending: state.pending - 1,\n      };\n    }\n    default:\n      return action.meta?.ssrResponse ||\n        action.meta?.ssrError ||\n        action.meta?.cacheResponse\n        ? state\n        : {\n            ...state,\n            pending: state.pending + 1,\n            error: null,\n            pristine: false,\n          };\n  }\n};\n\nconst maybeGetQueryActionType = (action, config) => {\n  if (config.isRequestAction(action) && config.isRequestActionQuery(action)) {\n    return action.type;\n  }\n\n  if (\n    isResponseAction(action) &&\n    config.isRequestActionQuery(getRequestActionFromResponse(action))\n  ) {\n    return getRequestActionFromResponse(action).type;\n  }\n\n  return null;\n};\n\nconst updateNormalizedData = (normalizedData, action, config) => {\n  if (config.isRequestAction(action) && action.meta?.optimisticData) {\n    const [, newNormalizedData] = normalize(action.meta.optimisticData, config);\n    return mergeData(normalizedData, newNormalizedData);\n  }\n\n  if (\n    isResponseAction(action) &&\n    isErrorAction(action) &&\n    action.meta.revertedData\n  ) {\n    const [, newNormalizedData] = normalize(action.meta.revertedData, config);\n    return mergeData(normalizedData, newNormalizedData);\n  }\n\n  if (\n    isResponseAction(action) &&\n    isSuccessAction(action) &&\n    shouldBeNormalized(action, config) &&\n    !config.isRequestActionQuery(getRequestActionFromResponse(action))\n  ) {\n    const [, newNormalizedData] = normalize(\n      getDataFromResponseAction(action),\n      config,\n    );\n    return mergeData(normalizedData, newNormalizedData);\n  }\n\n  if (action.meta?.localData) {\n    const [, newNormalizedData] = normalize(action.meta.localData, config);\n    return mergeData(normalizedData, newNormalizedData);\n  }\n\n  return normalizedData;\n};\n\nexport default (state, action, config = defaultConfig) => {\n  let normalizedData = updateNormalizedData(\n    state.normalizedData,\n    action,\n    config,\n  );\n\n  if (action.meta?.mutations) {\n    return {\n      queries: {\n        ...state.queries,\n        ...Object.keys(action.meta.mutations)\n          .filter(actionType => !!state.queries[actionType])\n          .reduce((prev, actionType) => {\n            const updatedQuery = queryReducer(\n              state.queries[actionType],\n              action,\n              actionType,\n              config,\n              normalizedData,\n            );\n\n            if (\n              updatedQuery.normalized &&\n              updatedQuery.data !== state.queries[actionType].data\n            ) {\n              const [newdata, newNormalizedData, usedKeys] = normalize(\n                updatedQuery.data,\n                config,\n              );\n              normalizedData = mergeData(normalizedData, newNormalizedData);\n              prev[actionType] = { ...updatedQuery, data: newdata, usedKeys };\n            } else {\n              prev[actionType] = updatedQuery;\n            }\n            return prev;\n          }, {}),\n      },\n      normalizedData,\n    };\n  }\n\n  const queryActionType = maybeGetQueryActionType(action, config);\n\n  if (queryActionType) {\n    const queryType =\n      action.meta?.requestKey !== undefined\n        ? queryActionType + action.meta.requestKey\n        : queryActionType;\n    const updatedQuery = queryReducer(\n      state.queries[queryType],\n      action,\n      queryActionType,\n      config,\n    );\n\n    if (updatedQuery === undefined) {\n      // eslint-disable-next-line no-unused-vars\n      const { [queryType]: toRemove, ...remainingQueries } = state.queries;\n\n      return {\n        queries: remainingQueries,\n        normalizedData,\n      };\n    }\n\n    if (\n      updatedQuery.normalized &&\n      updatedQuery.data &&\n      (!state.queries[queryType] ||\n        state.queries[queryType].data !== updatedQuery.data)\n    ) {\n      const [data, newNormalizedData, usedKeys] = normalize(\n        updatedQuery.data,\n        config,\n      );\n\n      return {\n        queries: {\n          ...state.queries,\n          [queryType]: { ...updatedQuery, data, usedKeys },\n        },\n        normalizedData: mergeData(normalizedData, newNormalizedData),\n      };\n    }\n\n    return {\n      queries: {\n        ...state.queries,\n        [queryType]: updatedQuery,\n      },\n      normalizedData,\n    };\n  }\n\n  return state.normalizedData === normalizedData\n    ? state\n    : {\n        ...state,\n        normalizedData,\n      };\n};\n","import { CLEAR_REQUESTS_CACHE } from '../constants';\nimport { isSuccessAction, getRequestActionFromResponse } from '../actions';\n\nconst getNewCacheTimeout = cache =>\n  cache === true ? null : cache * 1000 + Date.now();\n\nconst getRequestKey = action => action.type + (action.meta.requestKey || '');\n\nconst getRequestTypeString = requestType =>\n  typeof requestType === 'function' ? requestType.toString() : requestType;\n\nconst getRequestKeys = requests =>\n  requests.map(v =>\n    typeof v === 'object'\n      ? getRequestTypeString(v.requestType) + v.requestKey\n      : getRequestTypeString(v),\n  );\n\nexport default (state, action) => {\n  if (action.type === CLEAR_REQUESTS_CACHE) {\n    if (!action.requests) {\n      return {};\n    }\n\n    state = { ...state };\n    getRequestKeys(action.requests).forEach(requestKey => {\n      delete state[requestKey];\n    });\n\n    return state;\n  }\n\n  if (\n    isSuccessAction(action) &&\n    action.meta.cache &&\n    !action.meta.cacheResponse &&\n    !action.meta.ssrResponse\n  ) {\n    const requestAction = getRequestActionFromResponse(action);\n\n    return {\n      ...state,\n      [getRequestKey(requestAction)]: {\n        timeout: getNewCacheTimeout(action.meta.cache),\n        cacheKey: action.meta.cacheKey,\n      },\n    };\n  }\n\n  return state;\n};\n","export const mapRequest = (request, callback) =>\n  Array.isArray(request) ? request.map(callback) : callback(request);\n\nexport const mapObject = (obj, callback) =>\n  Object.entries(obj).reduce((prev, [k, v]) => {\n    const newValue = callback(k, v);\n\n    if (newValue === undefined) {\n      return prev;\n    }\n\n    prev[k] = newValue;\n    return prev;\n  }, {});\n","import { RESET_REQUESTS } from '../constants';\nimport { mapObject } from '../helpers';\n\nconst getRequestTypeString = requestType =>\n  typeof requestType === 'function' ? requestType.toString() : requestType;\n\nconst getKeys = requests =>\n  requests.map(v =>\n    typeof v === 'object'\n      ? getRequestTypeString(v.requestType) + (v.requestKey || '')\n      : getRequestTypeString(v),\n  );\n\nconst resetQuery = query =>\n  query.pending === 0\n    ? undefined\n    : {\n        ...query,\n        data: null,\n        error: null,\n        pristine: true,\n        usedKeys: query.normalized ? {} : null,\n      };\n\nconst resetMutation = mutation =>\n  mutation.pending === 0\n    ? undefined\n    : {\n        ...mutation,\n        error: null,\n      };\n\n// TODO: probably move a cache module\nconst isCacheValid = (cache, action) =>\n  cache.cacheKey === action.meta?.cacheKey &&\n  (cache.timeout === null || Date.now() <= cache.timeout);\n\nexport default (state, action) => {\n  if (action.type !== RESET_REQUESTS) {\n    return state;\n  }\n\n  let { queries, mutations, cache, downloadProgress, uploadProgress } = state;\n  const clearAll = !action.requests;\n  const keys = !clearAll && getKeys(action.requests);\n\n  queries = mapObject(queries, (k, v) => {\n    const cacheValue = cache[k];\n\n    if (\n      (clearAll || keys.includes(k)) &&\n      (action.resetCached ||\n        cacheValue === undefined ||\n        (cacheValue && !isCacheValid(cacheValue, action)))\n    ) {\n      return resetQuery(v);\n    }\n\n    return v;\n  });\n\n  mutations = mapObject(mutations, (k, v) =>\n    clearAll || keys.includes(k) ? resetMutation(v) : v,\n  );\n\n  cache =\n    clearAll && action.resetCached\n      ? {}\n      : mapObject(cache, (k, v) => {\n          const cacheValue = cache[k];\n\n          if (\n            (clearAll || keys.includes(k)) &&\n            (action.resetCached ||\n              cacheValue === undefined ||\n              (cacheValue && !isCacheValid(cacheValue, action)))\n          ) {\n            return undefined;\n          }\n\n          return v;\n        });\n\n  downloadProgress = clearAll\n    ? {}\n    : mapObject(downloadProgress, (k, v) =>\n        clearAll || keys.includes(k) ? resetMutation(v) : v,\n      );\n\n  uploadProgress = clearAll\n    ? {}\n    : mapObject(uploadProgress, (k, v) =>\n        clearAll || keys.includes(k) ? resetMutation(v) : v,\n      );\n\n  return { queries, mutations, cache, downloadProgress, uploadProgress };\n};\n","import defaultConfig from '../default-config';\nimport { getRequestActionFromResponse, isResponseAction } from '../actions';\nimport { JOIN_REQUEST } from '../constants';\n\nexport default (state = [], action, config = defaultConfig) => {\n  if (config.ssr === 'server' && isResponseAction(action)) {\n    return [\n      ...state,\n      getRequestActionFromResponse(action).type +\n        (action.meta.requestKey || ''),\n    ];\n  }\n\n  if (\n    config.ssr === 'server' &&\n    action.type === JOIN_REQUEST &&\n    action.rehydrate\n  ) {\n    return [...state, { requestType: action.requestType, duplicate: true }];\n  }\n\n  if (\n    config.ssr === 'client' &&\n    config.isRequestAction(action) &&\n    (action.meta?.ssrResponse || action.meta?.ssrError)\n  ) {\n    const indexToRemove = state.findIndex(\n      v =>\n        (v.requestType || v) === action.type + (action.meta.requestKey || ''),\n    );\n\n    if (indexToRemove >= 0) {\n      return state.filter((_, i) => i !== indexToRemove);\n    }\n  }\n\n  return state;\n};\n","import { ADD_WATCHER, REMOVE_WATCHER } from '../constants';\n\nexport default (state, action, config) => {\n  if (config.ssr === 'server') {\n    return state;\n  }\n\n  if (action.type === ADD_WATCHER) {\n    return {\n      ...state,\n      [action.requestType]:\n        state[action.requestType] === undefined\n          ? 1\n          : state[action.requestType] + 1,\n    };\n  }\n\n  if (action.type === REMOVE_WATCHER && state[action.requestType] === 1) {\n    // eslint-disable-next-line no-unused-vars\n    const { [action.requestType]: toRemove, ...remaining } = state;\n\n    return remaining;\n  }\n\n  if (action.type === REMOVE_WATCHER && state[action.requestType] !== 1) {\n    return {\n      ...state,\n      [action.requestType]: state[action.requestType] - 1,\n    };\n  }\n\n  return state;\n};\n","import { WEBSOCKET_OPENED, WEBSOCKET_CLOSED } from '../constants';\n\nexport default (state, action, config) => {\n  if (config.ssr === 'server') {\n    return state;\n  }\n\n  if (action.type === WEBSOCKET_OPENED) {\n    return {\n      pristine: false,\n      connected: true,\n    };\n  }\n\n  if (action.type === WEBSOCKET_CLOSED) {\n    return {\n      pristine: action.code === 1000,\n      connected: false,\n    };\n  }\n\n  return state;\n};\n","import defaultConfig from '../default-config';\nimport { isResponseAction, getRequestActionFromResponse } from '../actions';\n\nimport queriesReducer from './queries-reducer';\nimport mutationsReducer from './mutations-reducer';\nimport requestKeysReducer from './requests-keys-reducer';\nimport cacheReducer from './cache-reducer';\nimport progressReducer from './progress-reducer';\nimport requestsResetReducer from './requests-reset-reducer';\nimport ssrReducer from './ssr-reducer';\nimport watchersReducer from './watchers-reducer';\nimport websocketReducer from './websocket-reducer';\n\nconst defaultState = {\n  queries: {},\n  mutations: {},\n  normalizedData: {},\n  cache: {},\n  downloadProgress: {},\n  uploadProgress: {},\n  requestsKeys: {},\n  watchers: {},\n  websocket: { pristine: true, connected: false },\n};\n\nexport default (config = defaultConfig) => (state = defaultState, action) => {\n  const { queries, normalizedData } = queriesReducer(\n    { queries: state.queries, normalizedData: state.normalizedData },\n    action,\n    config,\n  );\n\n  let { mutations } = state;\n\n  if (\n    (config.isRequestAction(action) && !config.isRequestActionQuery(action)) ||\n    (isResponseAction(action) &&\n      !config.isRequestActionQuery(getRequestActionFromResponse(action)))\n  ) {\n    mutations = mutationsReducer(mutations, action);\n  }\n\n  return {\n    ...requestKeysReducer(\n      {\n        ...requestsResetReducer(\n          {\n            queries,\n            mutations,\n            cache: cacheReducer(state.cache, action),\n            ...progressReducer(\n              {\n                downloadProgress: state.downloadProgress,\n                uploadProgress: state.uploadProgress,\n              },\n              action,\n              config,\n            ),\n          },\n          action,\n        ),\n        requestsKeys: state.requestsKeys,\n      },\n      action,\n      config,\n    ),\n    normalizedData,\n    ssr: config.ssr ? ssrReducer(state.ssr, action, config) : null,\n    watchers: watchersReducer(state.watchers, action, config),\n    websocket: websocketReducer(state.websocket, action, config),\n  };\n};\n","import {\n  isErrorAction,\n  isAbortAction,\n  isResponseAction,\n  getRequestActionFromResponse,\n} from '../actions';\n\nexport default (state, action) => {\n  if (!isResponseAction(action)) {\n    const mutationType =\n      action.type + (action.meta?.requestKey ? action.meta.requestKey : '');\n\n    return {\n      ...state,\n      [mutationType]: {\n        error: null,\n        pending: (state[mutationType] ? state[mutationType].pending : 0) + 1,\n        ref: state[mutationType] ? state[mutationType].ref : {},\n      },\n    };\n  }\n\n  const requestAction = getRequestActionFromResponse(action);\n  const mutationType =\n    requestAction.type +\n    (action.meta?.requestKey ? action.meta.requestKey : '');\n\n  if (isErrorAction(action)) {\n    return {\n      ...state,\n      [mutationType]: {\n        error: action.payload ? action.payload : action.error,\n        pending: state[mutationType].pending - 1,\n        ref: state[mutationType].ref,\n      },\n    };\n  }\n\n  if (\n    isAbortAction(action) &&\n    state[mutationType].pending === 1 &&\n    state[mutationType].error === null\n  ) {\n    return state;\n  }\n\n  return {\n    ...state,\n    [mutationType]: {\n      error: null,\n      pending: state[mutationType].pending - 1,\n      ref: state[mutationType].ref,\n    },\n  };\n};\n","import defaultConfig from '../default-config';\n\n// TODO: this should be rewritten to more functional style, we need things like filter object helpers\nexport default (state, action, config = defaultConfig) => {\n  if (config.isRequestAction(action) && action.meta?.requestKey !== undefined) {\n    let { queries, mutations, cache, requestsKeys } = state;\n\n    if (!requestsKeys[action.type]) {\n      requestsKeys = {\n        ...requestsKeys,\n        [action.type]: [action.meta.requestKey],\n      };\n    } else {\n      requestsKeys = {\n        ...requestsKeys,\n        [action.type]: [\n          ...requestsKeys[action.type].filter(\n            k => k !== action.meta.requestKey,\n          ),\n          action.meta.requestKey,\n        ],\n      };\n    }\n\n    if (\n      action.meta.requestsCapacity &&\n      requestsKeys[action.type].length > action.meta.requestsCapacity\n    ) {\n      const isQuery = config.isRequestActionQuery(action);\n      const requestsStorage = isQuery ? queries : mutations;\n\n      const numberOfExceedingRequests =\n        requestsKeys[action.type].length - action.meta.requestsCapacity;\n\n      if (numberOfExceedingRequests > 0) {\n        const exceedingRequestsKeys = requestsKeys[action.type]\n          .slice(0, numberOfExceedingRequests)\n          .filter(k => {\n            const exceededRequest = requestsStorage[action.type + k];\n            return !exceededRequest || exceededRequest.pending === 0; // we dont want to remove pending requests\n          });\n\n        if (exceedingRequestsKeys.length > 0) {\n          requestsKeys = {\n            ...requestsKeys,\n            [action.type]: requestsKeys[action.type].filter(\n              k => !exceedingRequestsKeys.includes(k),\n            ),\n          };\n          const copiedStorage = { ...requestsStorage };\n\n          exceedingRequestsKeys.forEach(k => {\n            delete copiedStorage[action.type + k];\n          });\n\n          if (isQuery) {\n            queries = copiedStorage;\n\n            const copiedCache = { ...cache };\n\n            exceedingRequestsKeys.forEach(k => {\n              delete copiedCache[action.type + k];\n            });\n\n            cache = copiedCache;\n          } else {\n            mutations = copiedStorage;\n          }\n        }\n      }\n    }\n\n    return {\n      queries,\n      mutations,\n      cache,\n      requestsKeys,\n      downloadProgress: state.downloadProgress,\n      uploadProgress: state.uploadProgress,\n    };\n  }\n\n  return state;\n};\n","import { SET_DOWNLOAD_PROGRESS, SET_UPLOAD_PROGRESS } from '../constants';\n\nexport default (state, action, config) => {\n  if (action.type === SET_DOWNLOAD_PROGRESS) {\n    return {\n      ...state,\n      downloadProgress: {\n        ...state.downloadProgress,\n        [action.requestType]: action.progress,\n      },\n    };\n  }\n\n  if (action.type === SET_UPLOAD_PROGRESS) {\n    return {\n      ...state,\n      uploadProgress: {\n        ...state.uploadProgress,\n        [action.requestType]: action.progress,\n      },\n    };\n  }\n\n  if (config.isRequestAction(action) && action.meta?.measureDownloadProgress) {\n    return {\n      ...state,\n      downloadProgress: {\n        ...state.downloadProgress,\n        [action.type + (action.meta?.requestKey || '')]: 0,\n      },\n    };\n  }\n\n  if (config.isRequestAction(action) && action.meta?.measureUploadProgress) {\n    return {\n      ...state,\n      uploadProgress: {\n        ...state.uploadProgress,\n        [action.type + (action.meta?.requestKey || '')]: 0,\n      },\n    };\n  }\n\n  return state;\n};\n","export default store => {\n  return {\n    ...store,\n    dispatchRequest: store.dispatch,\n  };\n};\n","import { mapObject } from '../helpers';\nimport {\n  websocketOpened,\n  websocketClosed,\n  openWebsocket,\n  closeWebsocket,\n  getActionPayload,\n} from '../actions';\nimport {\n  GET_WEBSOCKET,\n  STOP_SUBSCRIPTIONS,\n  OPEN_WEBSOCKET,\n  CLOSE_WEBSOCKET,\n  WEBSOCKET_OPENED,\n} from '../constants';\n\nimport createRequestsStore from './create-requests-store';\n\nconst shouldBeNormalized = (action, globalNormalize) =>\n  action.meta?.normalize !== undefined\n    ? action.meta.normalize\n    : globalNormalize;\n\nconst transformIntoLocalMutation = (\n  subscriptionAction,\n  subscriptionData,\n  message,\n  globalNormalize,\n) => {\n  const meta = {};\n\n  if (shouldBeNormalized(subscriptionAction, globalNormalize)) {\n    meta.localData = subscriptionData;\n  }\n\n  if (subscriptionAction.meta?.mutations) {\n    meta.mutations = mapObject(subscriptionAction.meta.mutations, (k, v) => ({\n      local: true,\n      updateData: data => v(data, subscriptionData, message),\n    }));\n  }\n\n  return {\n    type: `${subscriptionAction.type}_MUTATION`,\n    meta,\n  };\n};\n\n/*\nThis wrapper is implemented to always call onClose when ws,close(1000) is called.\nSometimes onClose is not called at all in native implementation on network disconnection, sometimes it is called later.\nAbove makes things unpredictable.\nAlso it cleans all attached event handlers.\n*/\nclass CleanableWebsocket {\n  constructor(url, protocols, WS) {\n    this.ws = new WS(url, protocols);\n    this.onError = null;\n    this.onOpen = null;\n    this.onClose = null;\n    this.onMessage = null;\n    this.killed = false;\n    this.sentMessages = this.ws.sentMessages;\n  }\n\n  addEventListener(type, callback) {\n    if (type === 'error') {\n      this.onError = callback;\n    } else if (type === 'close') {\n      // we make sure onClose could be called only once\n      this.onClose = e => {\n        if (!this.killed) {\n          this.killed = true;\n          callback(e);\n          this.removeAllListeners();\n        }\n      };\n    } else if (type === 'open') {\n      this.onOpen = callback;\n    } else if (type === 'message') {\n      this.onMessage = callback;\n    }\n\n    this.ws.addEventListener(type, type === 'close' ? this.onClose : callback);\n  }\n\n  removeAllListeners() {\n    if (this.onError) {\n      this.ws.removeEventListener('error', this.onError);\n    }\n\n    if (this.onMessage) {\n      this.ws.removeEventListener('message', this.onMessage);\n    }\n\n    if (this.onOpen) {\n      this.ws.removeEventListener('open', this.onOpen);\n    }\n\n    if (this.onClose) {\n      this.ws.removeEventListener('close', this.onClose);\n    }\n  }\n\n  close(code) {\n    // for ws.close() we call onClose manually, to force this call always immediately\n    if (this.onClose) {\n      this.onClose({ code });\n    }\n\n    this.ws.close(code);\n  }\n\n  send(message) {\n    this.ws.send(message);\n  }\n\n  sendToClient(message) {\n    this.ws.sendToClient(message);\n  }\n\n  open() {\n    this.ws.open();\n  }\n\n  error(e) {\n    this.ws.error(e);\n  }\n}\n\nconst getDefaultWebSocket = () =>\n  typeof WebSocket === 'undefined' ? undefined : WebSocket;\n\nexport default ({\n  normalize = false,\n  subscriber: {\n    WS = getDefaultWebSocket(),\n    url,\n    protocols,\n    onOpen,\n    onClose,\n    onError,\n    onMessage,\n    onSend,\n    activateOn,\n    getData,\n    onStopSubscriptions,\n    lazy = false,\n    isHeartbeatMessage,\n    heartbeatTimeout = 20,\n    reconnectTimeout = 5,\n  } = {},\n}) => {\n  let subscriptions = {};\n  let ws;\n  let active = false;\n  let lastHeartbeatTimeout = null;\n  let lastReconnectTimeout = null;\n  let lastOpenWebsocketAction = null;\n\n  const clearLastReconnectTimeout = () => {\n    if (lastReconnectTimeout) {\n      clearTimeout(lastReconnectTimeout);\n      lastReconnectTimeout = null;\n    }\n  };\n\n  const clearLastHeartbeatTimeout = () => {\n    if (lastHeartbeatTimeout) {\n      clearTimeout(lastHeartbeatTimeout);\n      lastHeartbeatTimeout = null;\n    }\n  };\n\n  return store => next => action => {\n    if (action.type === OPEN_WEBSOCKET) {\n      lastOpenWebsocketAction = action;\n    }\n\n    if ((!ws && WS && url && !lazy) || action.type === OPEN_WEBSOCKET) {\n      const requestsStore = createRequestsStore(store);\n\n      clearLastReconnectTimeout();\n      clearLastHeartbeatTimeout();\n\n      if (ws) {\n        ws.close(1000);\n      }\n\n      ws = new CleanableWebsocket(url, protocols, WS);\n\n      ws.addEventListener('open', () => {\n        if (!activateOn) {\n          store.dispatch(websocketOpened());\n          active = true;\n        }\n\n        if (onOpen) {\n          onOpen(\n            requestsStore,\n            ws,\n            action.type === OPEN_WEBSOCKET ? action.props : null,\n          );\n        }\n\n        if (isHeartbeatMessage) {\n          clearLastHeartbeatTimeout();\n\n          lastHeartbeatTimeout = setTimeout(() => {\n            store.dispatch(closeWebsocket(3000));\n          }, heartbeatTimeout * 1000);\n        }\n      });\n\n      ws.addEventListener('error', e => {\n        if (onError) {\n          onError(e, requestsStore, ws);\n        }\n      });\n\n      ws.addEventListener('close', e => {\n        store.dispatch(websocketClosed(e.code));\n        active = false;\n        clearLastReconnectTimeout();\n        clearLastHeartbeatTimeout();\n\n        if (onClose) {\n          onClose(e, requestsStore, ws);\n        }\n\n        if (e.code !== 1000 && reconnectTimeout) {\n          lastReconnectTimeout = setTimeout(() => {\n            store.dispatch(lastOpenWebsocketAction ? action : openWebsocket());\n          }, reconnectTimeout * 1000);\n        }\n      });\n\n      ws.addEventListener('message', message => {\n        if (!active && activateOn && activateOn(message)) {\n          store.dispatch(websocketOpened());\n          active = true;\n        }\n\n        if (isHeartbeatMessage && isHeartbeatMessage(message)) {\n          clearLastHeartbeatTimeout();\n\n          lastHeartbeatTimeout = setTimeout(() => {\n            store.dispatch(closeWebsocket(3000));\n          }, heartbeatTimeout * 1000);\n        }\n\n        let data = JSON.parse(message.data);\n\n        if (getData) {\n          data = getData(data);\n        }\n\n        if (onMessage) {\n          onMessage(data, message, requestsStore);\n        }\n\n        const subscription = subscriptions[data.type];\n\n        if (subscription) {\n          if (subscription.meta?.getData) {\n            data = subscription.meta.getData(data);\n          }\n\n          if (subscription.meta?.onMessage) {\n            subscription.meta.onMessage(data, message, requestsStore);\n          }\n\n          if (\n            subscription.meta?.mutations ||\n            shouldBeNormalized(subscription, normalize)\n          ) {\n            store.dispatch(\n              transformIntoLocalMutation(\n                subscription,\n                data,\n                message,\n                normalize,\n              ),\n            );\n          }\n        }\n      });\n    }\n\n    if (action.type === GET_WEBSOCKET) {\n      return ws;\n    }\n\n    if (ws && action.type === CLOSE_WEBSOCKET) {\n      clearLastReconnectTimeout();\n      clearLastHeartbeatTimeout();\n      const response = next(action);\n      ws.close(action.code);\n      ws = null;\n      return response;\n    } else if (action.type === WEBSOCKET_OPENED) {\n      Object.values(subscriptions).forEach(subscriptionAction => {\n        const actionPayload = getActionPayload(subscriptionAction);\n\n        if (actionPayload.subscription) {\n          ws.send(\n            JSON.stringify(\n              onSend\n                ? onSend(actionPayload.subscription, subscriptionAction)\n                : actionPayload.subscription,\n            ),\n          );\n        }\n      });\n    } else if (action.type === STOP_SUBSCRIPTIONS) {\n      const requestsStore = createRequestsStore(store);\n\n      if (!action.subscriptions) {\n        if (onStopSubscriptions) {\n          onStopSubscriptions(\n            Object.keys(subscriptions),\n            action,\n            ws,\n            requestsStore,\n          );\n        }\n\n        subscriptions = {};\n      } else {\n        if (onStopSubscriptions) {\n          onStopSubscriptions(action.subscriptions, action, ws, requestsStore);\n        }\n\n        subscriptions = mapObject(subscriptions, (k, v) =>\n          action.subscriptions.includes(k) ? undefined : v,\n        );\n      }\n    } else if (\n      action.subscription !== undefined ||\n      action.payload?.subscription !== undefined\n    ) {\n      if (\n        action.meta?.onMessage ||\n        action.meta?.mutations ||\n        shouldBeNormalized(action, normalize)\n      ) {\n        subscriptions = {\n          ...subscriptions,\n          [action.type + (action.meta?.requestKey || '')]: action,\n        };\n      }\n\n      const actionPayload = getActionPayload(action);\n\n      if (actionPayload.subscription && ws && active) {\n        ws.send(\n          JSON.stringify(\n            onSend\n              ? onSend(actionPayload.subscription, action)\n              : actionPayload.subscription,\n          ),\n        );\n      }\n    }\n\n    return next(action);\n  };\n};\n","import defaultConfig from '../default-config';\nimport { STOP_POLLING, RESET_REQUESTS } from '../constants';\n\nconst getIntervalKey = action => action.type + (action.meta?.requestKey || '');\n\nconst getKeys = requests =>\n  requests.map(v =>\n    typeof v === 'object'\n      ? v.requestType.toString() + (v.requestKey || '')\n      : v.toString(),\n  );\n\nexport default (config = defaultConfig) => {\n  let intervals = {};\n\n  return store => next => action => {\n    if (action.type === STOP_POLLING || action.type === RESET_REQUESTS) {\n      if (!action.requests) {\n        Object.values(intervals).forEach(clearInterval);\n        intervals = {};\n      } else {\n        const keys = getKeys(action.requests);\n        const intervalsCopy = { ...intervals };\n\n        keys.forEach(k => {\n          clearInterval(intervalsCopy[k]);\n          delete intervalsCopy[k];\n        });\n\n        intervals = intervalsCopy;\n      }\n    } else if (\n      config.isRequestAction(action) &&\n      config.isRequestActionQuery(action) &&\n      !action.meta?.polled &&\n      intervals[getIntervalKey(action)]\n    ) {\n      const intervalsCopy = { ...intervals };\n      clearInterval(intervals[getIntervalKey(action)]);\n      delete intervalsCopy[getIntervalKey(action)];\n      intervals = intervalsCopy;\n    }\n\n    if (\n      config.isRequestAction(action) &&\n      config.isRequestActionQuery(action) &&\n      action.meta?.poll &&\n      !action.meta.polled\n    ) {\n      intervals[getIntervalKey(action)] = setInterval(() => {\n        store.dispatch({ ...action, meta: { ...action.meta, polled: true } });\n      }, action.meta.poll * 1000);\n    }\n\n    return next(action);\n  };\n};\n","import defaultConfig from '../default-config';\nimport { isResponseAction, isSuccessAction } from '../actions';\n\nexport default (requestsPromise, config = defaultConfig) => {\n  let index = 0;\n  const successActions = [];\n  const errorActions = [];\n\n  return () => next => action => {\n    if (config.isRequestAction(action)) {\n      index +=\n        action.meta?.dependentRequestsNumber !== undefined\n          ? action.meta.dependentRequestsNumber + 1\n          : 1;\n    } else if (isResponseAction(action)) {\n      action = next(action);\n\n      if (!isSuccessAction(action)) {\n        errorActions.push(action);\n        index -=\n          action.meta.dependentRequestsNumber !== undefined\n            ? action.meta.dependentRequestsNumber + 1\n            : 1;\n        index -= action.meta.isDependentRequest ? 1 : 0;\n      } else {\n        successActions.push(action);\n        index -= action.meta.isDependentRequest ? 2 : 1;\n      }\n\n      if (index === 0) {\n        if (errorActions.length > 0) {\n          requestsPromise.reject({ successActions, errorActions });\n        } else {\n          requestsPromise.resolve(successActions);\n        }\n      }\n\n      return action;\n    }\n\n    return next(action);\n  };\n};\n","import defaultConfig from '../default-config';\nimport { getQuery } from '../selectors';\n\nexport default (config = defaultConfig) => store => next => action => {\n  if (!config.isRequestAction(action)) {\n    return next(action);\n  }\n\n  const state = store.getState();\n  const actionsToIgnore = state.requests.ssr;\n  const actionToIgnore = actionsToIgnore.find(\n    v => (v.requestType || v) === action.type + (action.meta?.requestKey || ''),\n  );\n\n  if (!actionToIgnore) {\n    return next(action);\n  }\n\n  const query = getQuery(state, {\n    type: action.type,\n    requestKey: action.meta?.requestKey,\n  });\n\n  action.meta = actionToIgnore.duplicate\n    ? { ...action.meta, ssrDuplicate: true }\n    : action.meta;\n\n  if (query.error) {\n    return next({\n      ...action,\n      meta: {\n        ...action.meta,\n        ssrError: query.error,\n      },\n    });\n  }\n\n  return next({\n    ...action,\n    meta: {\n      ...action.meta,\n      ssrResponse: { data: query.data },\n    },\n  });\n};\n","import defaultConfig from '../default-config';\nimport { getQuery } from '../selectors';\n\nconst isCacheValid = (cache, action) =>\n  cache.cacheKey === action.meta.cacheKey &&\n  (cache.timeout === null || Date.now() <= cache.timeout);\n\nconst getKey = action => action.type + (action.meta.requestKey || '');\n\nexport default (config = defaultConfig) => store => next => action => {\n  if (\n    config.isRequestAction(action) &&\n    action.meta?.cache &&\n    !action.meta.ssrResponse\n  ) {\n    const key = getKey(action);\n    const state = store.getState();\n    const cacheValue = state.requests.cache[key];\n\n    if (cacheValue !== undefined && isCacheValid(cacheValue, action)) {\n      const query = getQuery(state, {\n        type: action.type,\n        requestKey: action.meta?.requestKey,\n      });\n\n      return next({\n        ...action,\n        meta: {\n          ...action.meta,\n          cacheResponse: { data: query.data },\n        },\n      });\n    }\n  }\n\n  return next(action);\n};\n","import {\n  getActionPayload,\n  createSuccessAction,\n  createErrorAction,\n  createAbortAction,\n  setDownloadProgress,\n  setUploadProgress,\n} from '../actions';\nimport { ABORT_REQUESTS, RESET_REQUESTS, JOIN_REQUEST } from '../constants';\nimport { getQuery } from '../selectors';\n\nimport createRequestsStore from './create-requests-store';\n\nconst getRequestTypeString = requestType =>\n  typeof requestType === 'function' ? requestType.toString() : requestType;\n\nconst getKeys = requests =>\n  requests.map(v =>\n    typeof v === 'object'\n      ? getRequestTypeString(v.requestType) + (v.requestKey || '')\n      : getRequestTypeString(v),\n  );\n\nconst getDriver = (config, action) =>\n  action.meta?.driver\n    ? config.driver[action.meta.driver]\n    : config.driver.default || config.driver;\n\nconst getLastActionKey = action =>\n  action.type + (action.meta?.requestKey ? action.meta.requestKey : '');\n\nconst isActionRehydrated = action =>\n  !!(\n    action.meta?.cacheResponse ||\n    action.meta?.ssrResponse ||\n    action.meta?.ssrError\n  );\n\n// TODO: remove to more functional style, we need object maps and filters\nconst abortPendingRequests = (action, pendingRequests) => {\n  const payload = getActionPayload(action);\n  const clearAll = !payload.requests;\n  const keys = !clearAll && getKeys(payload.requests);\n\n  if (!payload.requests) {\n    Object.values(pendingRequests).forEach(requests =>\n      requests.forEach(r => r.cancel()),\n    );\n  } else {\n    Object.entries(pendingRequests)\n      .filter(([k]) => keys.includes(k))\n      .forEach(([, requests]) => requests.forEach(r => r.cancel()));\n  }\n};\n\nconst isTakeLatest = (action, config) =>\n  action.meta?.takeLatest !== undefined\n    ? action.meta.takeLatest\n    : typeof config.takeLatest === 'function'\n    ? config.takeLatest(action)\n    : config.takeLatest;\n\nconst maybeCallOnRequestInterceptor = (action, config, store) => {\n  const payload = getActionPayload(action);\n\n  if (\n    config.onRequest &&\n    (!action.meta ||\n      (action.meta.runOnRequest !== false && !action.meta.ssrDuplicate))\n  ) {\n    if (action.request) {\n      return {\n        ...action,\n        request: config.onRequest(payload.request, action, store),\n      };\n    }\n\n    return {\n      ...action,\n      payload: {\n        ...action.payload,\n        request: config.onRequest(payload.request, action, store),\n      },\n    };\n  }\n\n  return action;\n};\n\nconst maybeCallOnRequestMeta = (action, store) => {\n  const payload = getActionPayload(action);\n\n  if (action.meta?.onRequest && !action.meta.ssrDuplicate) {\n    if (action.request) {\n      return {\n        ...action,\n        request: action.meta.onRequest(payload.request, action, store),\n      };\n    }\n\n    return {\n      ...action,\n      payload: {\n        ...action.payload,\n        request: action.meta.onRequest(payload.request, action, store),\n      },\n    };\n  }\n\n  return action;\n};\n\nconst maybeDispatchRequestAction = (action, next) => {\n  if (!action.meta || !action.meta.silent) {\n    action = next(action);\n  }\n\n  return action;\n};\n\nconst getDriverActions = (action, store) => {\n  const driverActions = {};\n\n  if (action.meta?.measureDownloadProgress) {\n    driverActions.setDownloadProgress = progress =>\n      store.dispatch(\n        setDownloadProgress(\n          action.type + (action.meta?.requestKey || ''),\n          progress,\n        ),\n      );\n  }\n\n  if (action.meta?.measureUploadProgress) {\n    driverActions.setUploadProgress = progress =>\n      store.dispatch(\n        setUploadProgress(\n          action.type + (action.meta?.requestKey || ''),\n          progress,\n        ),\n      );\n  }\n\n  return driverActions;\n};\n\n// TODO: move to helpers\nconst defer = () => {\n  let res;\n  let rej;\n  const promise = new Promise((resolve, reject) => {\n    res = resolve;\n    rej = reject;\n  });\n  promise.resolve = res;\n  promise.reject = rej;\n  return promise;\n};\n\nconst getResponsePromises = (action, config, pendingRequests, store) => {\n  const actionPayload = getActionPayload(action);\n  const isBatchedRequest = Array.isArray(actionPayload.request);\n\n  if (action.meta?.cacheResponse) {\n    return [Promise.resolve(action.meta.cacheResponse)];\n  } else if (action.meta?.ssrResponse) {\n    return [Promise.resolve(action.meta.ssrResponse)];\n  } else if (action.meta?.ssrError) {\n    return [Promise.reject(action.meta.ssrError)];\n  }\n\n  const driverActions = isBatchedRequest ? {} : getDriverActions(action, store);\n  const driver = getDriver(config, action);\n  const lastActionKey = getLastActionKey(action);\n  const takeLatest = isTakeLatest(action, config);\n\n  if (takeLatest && pendingRequests[lastActionKey]) {\n    pendingRequests[lastActionKey].forEach(r => r.cancel());\n  }\n\n  const responsePromises = isBatchedRequest\n    ? actionPayload.request.map(r => driver(r, action, driverActions))\n    : [driver(actionPayload.request, action, driverActions)];\n\n  if (responsePromises[0].cancel) {\n    pendingRequests[lastActionKey] = responsePromises;\n  }\n\n  return responsePromises;\n};\n\nconst maybeCallGetError = (action, error) => {\n  if (\n    error !== 'REQUEST_ABORTED' &&\n    !isActionRehydrated(action) &&\n    action.meta?.getError\n  ) {\n    throw action.meta.getError(error);\n  }\n\n  throw error;\n};\n\nconst maybeCallOnErrorInterceptor = (action, config, store, error) => {\n  if (\n    error !== 'REQUEST_ABORTED' &&\n    config.onError &&\n    (!action.meta ||\n      (action.meta.runOnError !== false && !action.meta.ssrDuplicate))\n  ) {\n    return Promise.all([config.onError(error, action, store)]);\n  }\n\n  throw error;\n};\n\nconst maybeCallOnErrorMeta = (action, store, error) => {\n  if (\n    error !== 'REQUEST_ABORTED' &&\n    action.meta?.onError &&\n    !action.meta.ssrDuplicate\n  ) {\n    return Promise.all([action.meta.onError(error, action, store)]);\n  }\n\n  throw error;\n};\n\nconst maybeCallOnAbortInterceptor = (action, config, store, error) => {\n  if (\n    error === 'REQUEST_ABORTED' &&\n    config.onAbort &&\n    (!action.meta || action.meta.runOnAbort !== false)\n  ) {\n    config.onAbort(action, store);\n  }\n\n  throw error;\n};\n\nconst maybeCallOnAbortMeta = (action, store, error) => {\n  if (error === 'REQUEST_ABORTED' && action.meta?.onAbort) {\n    action.meta.onAbort(action, store);\n  }\n\n  throw error;\n};\n\nconst getInitialBatchObject = responseKeys =>\n  responseKeys.reduce((prev, key) => {\n    prev[key] = [];\n    return prev;\n  }, {});\n\nconst maybeTransformBatchRequestResponse = (action, response) => {\n  const actionPayload = getActionPayload(action);\n  const isBatchedRequest = Array.isArray(actionPayload.request);\n  const responseKeys = Object.keys(response[0]);\n\n  return isBatchedRequest && !isActionRehydrated(action)\n    ? response.reduce((prev, current) => {\n        responseKeys.forEach(key => {\n          prev[key].push(current[key]);\n        });\n        return prev;\n      }, getInitialBatchObject(responseKeys))\n    : response[0];\n};\n\nconst maybeCallGetData = (action, store, response) => {\n  if (!isActionRehydrated(action) && action.meta?.getData) {\n    const query = getQuery(store.getState(), {\n      type: action.type,\n      requestKey: action.meta?.requestKey,\n    });\n\n    return {\n      ...response,\n      data: action.meta.getData(response.data, query.data),\n    };\n  }\n\n  return response;\n};\n\nconst maybeCallOnSuccessInterceptor = (action, config, store, response) => {\n  if (\n    config.onSuccess &&\n    (!action.meta ||\n      (action.meta.runOnSuccess !== false && !action.meta.ssrDuplicate))\n  ) {\n    const result = config.onSuccess(response, action, store);\n\n    if (!isActionRehydrated(action)) {\n      return result;\n    }\n  }\n\n  return response;\n};\n\nconst maybeCallOnSuccessMeta = (action, store, response) => {\n  if (action.meta?.onSuccess && !action.meta.ssrDuplicate) {\n    const result = action.meta.onSuccess(response, action, store);\n\n    if (!isActionRehydrated(action)) {\n      return result;\n    }\n  }\n\n  return response;\n};\n\nconst sleep = () => new Promise(resolve => setTimeout(resolve, 10));\n\nconst createSendRequestMiddleware = config => {\n  // TODO: clear not pending promises sometimes\n  const pendingRequests = {}; // for aborts\n  const allPendingRequests = {}; // for joining\n\n  return store => next => action => {\n    const payload = getActionPayload(action);\n    const requestsStore = createRequestsStore(store);\n\n    if (action.type === JOIN_REQUEST) {\n      next(action);\n      return allPendingRequests[action.requestType] || sleep();\n    }\n\n    if (\n      action.type === ABORT_REQUESTS ||\n      (action.type === RESET_REQUESTS && payload.abortPending)\n    ) {\n      abortPendingRequests(action, pendingRequests);\n      return next(action);\n    }\n\n    if (config.isRequestAction(action)) {\n      const lastActionKey = getLastActionKey(action);\n      allPendingRequests[lastActionKey] = defer();\n\n      action = maybeCallOnRequestInterceptor(action, config, requestsStore);\n      action = maybeCallOnRequestMeta(action, requestsStore);\n      action = maybeDispatchRequestAction(action, next);\n\n      const responsePromises = getResponsePromises(\n        action,\n        config,\n        pendingRequests,\n        store,\n      );\n\n      return Promise.all(responsePromises)\n        .catch(error => maybeCallGetError(action, error))\n        .catch(error =>\n          maybeCallOnErrorInterceptor(action, config, requestsStore, error),\n        )\n        .catch(error => maybeCallOnErrorMeta(action, requestsStore, error))\n        .catch(error =>\n          maybeCallOnAbortInterceptor(action, config, requestsStore, error),\n        )\n        .catch(error => maybeCallOnAbortMeta(action, requestsStore, error))\n        .catch(error => {\n          if (error === 'REQUEST_ABORTED') {\n            const abortAction = createAbortAction(action);\n\n            if (!action.meta || !action.meta.silent) {\n              store.dispatch(abortAction);\n            }\n\n            allPendingRequests[lastActionKey].resolve({\n              action: abortAction,\n              isAborted: true,\n            });\n\n            throw { action: abortAction, isAborted: true };\n          }\n\n          const errorAction = createErrorAction(action, error);\n\n          if (!action.meta || !action.meta.silent) {\n            store.dispatch(errorAction);\n          }\n\n          allPendingRequests[lastActionKey].resolve({\n            action: errorAction,\n            error,\n          });\n\n          throw { action: errorAction, error };\n        })\n        .then(response => {\n          response = maybeTransformBatchRequestResponse(action, response);\n          return maybeCallGetData(action, store, response);\n        })\n        .then(response =>\n          maybeCallOnSuccessInterceptor(\n            action,\n            config,\n            requestsStore,\n            response,\n          ),\n        )\n        .then(response =>\n          maybeCallOnSuccessMeta(action, requestsStore, response),\n        )\n        .then(response => {\n          const successAction = createSuccessAction(action, response);\n\n          if (!action.meta || !action.meta.silent) {\n            store.dispatch(successAction);\n          }\n\n          allPendingRequests[lastActionKey].resolve({\n            action: successAction,\n            ...response,\n          });\n\n          return { action: successAction, ...response };\n        })\n        .catch(error => {\n          if (error && error.action) {\n            return error;\n          }\n\n          throw error;\n        });\n    }\n\n    return next(action);\n  };\n};\n\nexport default createSendRequestMiddleware;\n","import { requestsReducer } from './reducers';\nimport {\n  createRequestsCacheMiddleware,\n  createClientSsrMiddleware,\n  createServerSsrMiddleware,\n  createSendRequestsMiddleware,\n  createPollingMiddleware,\n  createSubscriptionsMiddleware,\n} from './middleware';\nimport defaultConfig from './default-config';\n\nconst defer = () => {\n  let res;\n  let rej;\n  const promise = new Promise((resolve, reject) => {\n    res = resolve;\n    rej = reject;\n  });\n  promise.resolve = res;\n  promise.reject = rej;\n  return promise;\n};\n\nconst handleRequests = userConfig => {\n  const config = { ...defaultConfig, ...userConfig };\n  const requestsPromise =\n    config.ssr === 'server' && !config.disableRequestsPromise ? defer() : null;\n\n  return {\n    requestsReducer: requestsReducer(config),\n    requestsMiddleware: [\n      config.ssr !== 'server' &&\n        config.subscriber &&\n        createSubscriptionsMiddleware(config),\n      config.ssr !== 'server' && createPollingMiddleware(config),\n      config.ssr === 'server' &&\n        !config.disableRequestsPromise &&\n        createServerSsrMiddleware(requestsPromise, config),\n      config.ssr === 'client' && createClientSsrMiddleware(config),\n      config.cache && createRequestsCacheMiddleware(config),\n      createSendRequestsMiddleware(config),\n    ].filter(Boolean),\n    requestsPromise,\n  };\n};\n\nexport default handleRequests;\n","import { createSelector } from 'reselect';\n\nconst defaultMutation = {\n  loading: false,\n  pending: 0,\n  error: null,\n  downloadProgress: null,\n  uploadProgress: null,\n};\n\nconst getMutationState = (state, type, requestKey = '') =>\n  state.requests.mutations[type + requestKey];\n\nconst mutationSelectors = new WeakMap();\n\nconst createMutationSelector = (type, requestKey) =>\n  createSelector(\n    state => getMutationState(state, type, requestKey),\n    state => state.requests.downloadProgress[type + (requestKey || '')] ?? null,\n    state => state.requests.uploadProgress[type + (requestKey || '')] ?? null,\n    (mutationState, downloadProgress, uploadProgress) => ({\n      pending: mutationState.pending,\n      loading: mutationState.pending > 0,\n      error: mutationState.error,\n      downloadProgress,\n      uploadProgress,\n    }),\n  );\n\nexport default (state, { type, requestKey }) => {\n  const mutationState = getMutationState(state, type, requestKey);\n\n  if (!mutationState) {\n    return defaultMutation;\n  }\n\n  if (!mutationSelectors.get(mutationState.ref)) {\n    mutationSelectors.set(\n      mutationState.ref,\n      createMutationSelector(type, requestKey),\n    );\n  }\n\n  return mutationSelectors.get(mutationState.ref)(state);\n};\n","import getQuery from './get-query';\n\nexport default props => state => getQuery(state, props);\n","import getMutation from './get-mutation';\n\nexport default props => state => getMutation(state, props);\n","export default state => state.requests.websocket;\n","'use strict';\n\nvar isMergeableObject = function isMergeableObject(value) {\n\treturn isNonNullObject(value)\n\t\t&& !isSpecial(value)\n};\n\nfunction isNonNullObject(value) {\n\treturn !!value && typeof value === 'object'\n}\n\nfunction isSpecial(value) {\n\tvar stringValue = Object.prototype.toString.call(value);\n\n\treturn stringValue === '[object RegExp]'\n\t\t|| stringValue === '[object Date]'\n\t\t|| isReactElement(value)\n}\n\n// see https://github.com/facebook/react/blob/b5ac963fb791d1298e7f396236383bc955f916c1/src/isomorphic/classic/element/ReactElement.js#L21-L25\nvar canUseSymbol = typeof Symbol === 'function' && Symbol.for;\nvar REACT_ELEMENT_TYPE = canUseSymbol ? Symbol.for('react.element') : 0xeac7;\n\nfunction isReactElement(value) {\n\treturn value.$$typeof === REACT_ELEMENT_TYPE\n}\n\nfunction emptyTarget(val) {\n\treturn Array.isArray(val) ? [] : {}\n}\n\nfunction cloneUnlessOtherwiseSpecified(value, options) {\n\treturn (options.clone !== false && options.isMergeableObject(value))\n\t\t? deepmerge(emptyTarget(value), value, options)\n\t\t: value\n}\n\nfunction defaultArrayMerge(target, source, options) {\n\treturn target.concat(source).map(function(element) {\n\t\treturn cloneUnlessOtherwiseSpecified(element, options)\n\t})\n}\n\nfunction getMergeFunction(key, options) {\n\tif (!options.customMerge) {\n\t\treturn deepmerge\n\t}\n\tvar customMerge = options.customMerge(key);\n\treturn typeof customMerge === 'function' ? customMerge : deepmerge\n}\n\nfunction getEnumerableOwnPropertySymbols(target) {\n\treturn Object.getOwnPropertySymbols\n\t\t? Object.getOwnPropertySymbols(target).filter(function(symbol) {\n\t\t\treturn target.propertyIsEnumerable(symbol)\n\t\t})\n\t\t: []\n}\n\nfunction getKeys(target) {\n\treturn Object.keys(target).concat(getEnumerableOwnPropertySymbols(target))\n}\n\nfunction propertyIsOnObject(object, property) {\n\ttry {\n\t\treturn property in object\n\t} catch(_) {\n\t\treturn false\n\t}\n}\n\n// Protects from prototype poisoning and unexpected merging up the prototype chain.\nfunction propertyIsUnsafe(target, key) {\n\treturn propertyIsOnObject(target, key) // Properties are safe to merge if they don't exist in the target yet,\n\t\t&& !(Object.hasOwnProperty.call(target, key) // unsafe if they exist up the prototype chain,\n\t\t\t&& Object.propertyIsEnumerable.call(target, key)) // and also unsafe if they're nonenumerable.\n}\n\nfunction mergeObject(target, source, options) {\n\tvar destination = {};\n\tif (options.isMergeableObject(target)) {\n\t\tgetKeys(target).forEach(function(key) {\n\t\t\tdestination[key] = cloneUnlessOtherwiseSpecified(target[key], options);\n\t\t});\n\t}\n\tgetKeys(source).forEach(function(key) {\n\t\tif (propertyIsUnsafe(target, key)) {\n\t\t\treturn\n\t\t}\n\n\t\tif (propertyIsOnObject(target, key) && options.isMergeableObject(source[key])) {\n\t\t\tdestination[key] = getMergeFunction(key, options)(target[key], source[key], options);\n\t\t} else {\n\t\t\tdestination[key] = cloneUnlessOtherwiseSpecified(source[key], options);\n\t\t}\n\t});\n\treturn destination\n}\n\nfunction deepmerge(target, source, options) {\n\toptions = options || {};\n\toptions.arrayMerge = options.arrayMerge || defaultArrayMerge;\n\toptions.isMergeableObject = options.isMergeableObject || isMergeableObject;\n\t// cloneUnlessOtherwiseSpecified is added to `options` so that custom arrayMerge()\n\t// implementations can use it. The caller may not replace it.\n\toptions.cloneUnlessOtherwiseSpecified = cloneUnlessOtherwiseSpecified;\n\n\tvar sourceIsArray = Array.isArray(source);\n\tvar targetIsArray = Array.isArray(target);\n\tvar sourceAndTargetTypesMatch = sourceIsArray === targetIsArray;\n\n\tif (!sourceAndTargetTypesMatch) {\n\t\treturn cloneUnlessOtherwiseSpecified(source, options)\n\t} else if (sourceIsArray) {\n\t\treturn options.arrayMerge(target, source, options)\n\t} else {\n\t\treturn mergeObject(target, source, options)\n\t}\n}\n\ndeepmerge.all = function deepmergeAll(array, options) {\n\tif (!Array.isArray(array)) {\n\t\tthrow new Error('first argument should be an array')\n\t}\n\n\treturn array.reduce(function(prev, next) {\n\t\treturn deepmerge(prev, next, options)\n\t}, {})\n};\n\nvar deepmerge_1 = deepmerge;\n\nmodule.exports = deepmerge_1;\n","module.exports = __WEBPACK_EXTERNAL_MODULE__573__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// module exports must be returned from runtime so entry inlining is disabled\n// startup\n// Load entry module and return exports\nreturn __webpack_require__(103);\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => module['default'] :\n\t\t() => module;\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop)","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};"],"sourceRoot":""}