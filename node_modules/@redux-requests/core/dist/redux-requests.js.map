{"version":3,"sources":["webpack://ReduxRequests/webpack/universalModuleDefinition","webpack://ReduxRequests/../node_modules/@babel/runtime/helpers/extends.js","webpack://ReduxRequests/../node_modules/@babel/runtime/helpers/objectWithoutPropertiesLoose.js","webpack://ReduxRequests/./src/actions.js","webpack://ReduxRequests/./src/constants.js","webpack://ReduxRequests/./src/default-config.js","webpack://ReduxRequests/./src/handle-requests.js","webpack://ReduxRequests/./src/helpers.js","webpack://ReduxRequests/./src/index.js","webpack://ReduxRequests/./src/middleware/create-client-ssr-middleware.js","webpack://ReduxRequests/./src/middleware/create-polling-middleware.js","webpack://ReduxRequests/./src/middleware/create-requests-cache-middleware.js","webpack://ReduxRequests/./src/middleware/create-requests-store.js","webpack://ReduxRequests/./src/middleware/create-send-requests-middleware.js","webpack://ReduxRequests/./src/middleware/create-server-ssr-middleware.js","webpack://ReduxRequests/./src/middleware/create-subscriptions-middleware.js","webpack://ReduxRequests/./src/normalizers/denormalize.js","webpack://ReduxRequests/./src/normalizers/get-dependent-keys.js","webpack://ReduxRequests/./src/normalizers/merge-data.js","webpack://ReduxRequests/./src/normalizers/normalize.js","webpack://ReduxRequests/./src/reducers/cache-reducer.js","webpack://ReduxRequests/./src/reducers/mutations-reducer.js","webpack://ReduxRequests/./src/reducers/progress-reducer.js","webpack://ReduxRequests/./src/reducers/queries-reducer.js","webpack://ReduxRequests/./src/reducers/requests-keys-reducer.js","webpack://ReduxRequests/./src/reducers/requests-reducer.js","webpack://ReduxRequests/./src/reducers/requests-reset-reducer.js","webpack://ReduxRequests/./src/reducers/ssr-reducer.js","webpack://ReduxRequests/./src/reducers/update-data.js","webpack://ReduxRequests/./src/reducers/watchers-reducer.js","webpack://ReduxRequests/./src/reducers/websocket-reducer.js","webpack://ReduxRequests/./src/selectors/get-mutation-selector.js","webpack://ReduxRequests/./src/selectors/get-mutation.js","webpack://ReduxRequests/./src/selectors/get-query-selector.js","webpack://ReduxRequests/./src/selectors/get-query.js","webpack://ReduxRequests/./src/selectors/get-websocket-state.js","webpack://ReduxRequests/../node_modules/deepmerge/dist/cjs.js","webpack://ReduxRequests/external {\"commonjs\":\"reselect\",\"commonjs2\":\"reselect\",\"amd\":\"reselect\",\"root\":\"Reselect\"}","webpack://ReduxRequests/webpack/bootstrap","webpack://ReduxRequests/webpack/runtime/compat get default export","webpack://ReduxRequests/webpack/runtime/define property getters","webpack://ReduxRequests/webpack/runtime/hasOwnProperty shorthand","webpack://ReduxRequests/webpack/runtime/make namespace object","webpack://ReduxRequests/webpack/startup"],"names":["getActionWithSuffix","suffix","actionType","success","SUCCESS_SUFFIX","error","ERROR_SUFFIX","abort","ABORT_SUFFIX","isFSA","action","payload","createSuccessAction","response","type","meta","requestAction","createErrorAction","errorData","createAbortAction","getActionPayload","undefined","getResponseFromSuccessAction","isRequestAction","actionPayload","request","Array","isArray","url","query","promise","Error","isResponseAction","getRequestActionFromResponse","isSuccessAction","endsWith","isErrorAction","isAbortAction","isRequestQuery","method","toLowerCase","trim","startsWith","isRequestActionQuery","asMutation","every","clearRequestsCache","requests","CLEAR_REQUESTS_CACHE","resetRequests","abortPending","resetCached","RESET_REQUESTS","abortRequests","ABORT_REQUESTS","stopPolling","STOP_POLLING","setDownloadProgress","requestType","progress","SET_DOWNLOAD_PROGRESS","setUploadProgress","SET_UPLOAD_PROGRESS","addWatcher","ADD_WATCHER","removeWatcher","REMOVE_WATCHER","joinRequest","rehydrate","JOIN_REQUEST","websocketOpened","WEBSOCKET_OPENED","websocketClosed","code","WEBSOCKET_CLOSED","getWebsocket","GET_WEBSOCKET","openWebsocket","props","OPEN_WEBSOCKET","closeWebsocket","CLOSE_WEBSOCKET","stopSubscriptions","subscriptions","STOP_SUBSCRIPTIONS","driver","onRequest","onSuccess","onError","onAbort","cache","ssr","disableRequestsPromise","takeLatest","normalize","getNormalisationObjectKey","obj","id","shouldObjectBeNormalized","subscriber","defer","res","rej","Promise","resolve","reject","handleRequests","userConfig","config","defaultConfig","requestsPromise","requestsReducer","requestsMiddleware","createSubscriptionsMiddleware","createPollingMiddleware","createServerSsrMiddleware","createClientSsrMiddleware","createRequestsCacheMiddleware","createSendRequestsMiddleware","filter","Boolean","mapRequest","callback","map","mapObject","Object","entries","reduce","prev","k","v","newValue","store","next","state","getState","actionsToIgnore","actionToIgnore","find","requestKey","getQuery","duplicate","ssrDuplicate","ssrError","ssrResponse","data","getIntervalKey","getKeys","toString","intervals","values","forEach","clearInterval","keys","intervalsCopy","polled","poll","setInterval","dispatch","isCacheValid","cacheKey","timeout","Date","now","getKey","key","cacheValue","cacheResponse","dispatchRequest","getRequestTypeString","getDriver","getLastActionKey","isActionRehydrated","abortPendingRequests","pendingRequests","clearAll","r","cancel","includes","isTakeLatest","maybeCallOnRequestInterceptor","runOnRequest","maybeCallOnRequestMeta","maybeDispatchRequestAction","silent","getDriverActions","driverActions","measureDownloadProgress","measureUploadProgress","getResponsePromises","isBatchedRequest","lastActionKey","responsePromises","maybeCallGetError","getError","maybeCallOnErrorInterceptor","runOnError","all","maybeCallOnErrorMeta","maybeCallOnAbortInterceptor","runOnAbort","maybeCallOnAbortMeta","getInitialBatchObject","responseKeys","maybeTransformBatchRequestResponse","current","push","maybeCallGetData","getData","maybeCallOnSuccessInterceptor","runOnSuccess","result","maybeCallOnSuccessMeta","sleep","setTimeout","createSendRequestMiddleware","allPendingRequests","requestsStore","createRequestsStore","abortAction","isAborted","errorAction","then","successAction","index","successActions","errorActions","dependentRequestsNumber","isDependentRequest","length","shouldBeNormalized","globalNormalize","transformIntoLocalMutation","subscriptionAction","subscriptionData","message","localData","mutations","local","updateData","CleanableWebsocket","protocols","WS","ws","onOpen","onClose","onMessage","killed","sentMessages","addEventListener","e","removeAllListeners","removeEventListener","close","send","sendToClient","open","getDefaultWebSocket","WebSocket","onSend","activateOn","onStopSubscriptions","lazy","isHeartbeatMessage","heartbeatTimeout","reconnectTimeout","active","lastHeartbeatTimeout","lastReconnectTimeout","lastOpenWebsocketAction","clearLastReconnectTimeout","clearTimeout","clearLastHeartbeatTimeout","JSON","parse","subscription","stringify","denormalize","normalizedData","usedKeys","path","objectEntries","getDependentKeys","dependentKeys","Set","add","mergeOptions","arrayMerge","destinationArray","sourceArray","clone","mergeData","oldData","newData","deepmerge","stipFromDeps","root","getDependencies","dependencies","getNewCacheTimeout","getRequestKey","getRequestKeys","mutationType","pending","ref","downloadProgress","uploadProgress","getInitialQuery","normalized","pristine","getDataFromResponseAction","queryReducer","mutationConfig","queries","maybeGetQueryActionType","updateNormalizedData","optimisticData","newNormalizedData","revertedData","updatedQuery","newdata","queryActionType","queryType","toRemove","remainingQueries","requestsKeys","requestsCapacity","isQuery","requestsStorage","numberOfExceedingRequests","exceedingRequestsKeys","slice","exceededRequest","copiedStorage","copiedCache","defaultState","watchers","websocket","connected","queriesReducer","mutationsReducer","requestKeysReducer","requestsResetReducer","cacheReducer","progressReducer","ssrReducer","watchersReducer","websocketReducer","resetQuery","resetMutation","mutation","indexToRemove","findIndex","_","i","getDataUpdater","dataUpdater","revertData","updateDataOptimistic","remaining","getMutation","defaultMutation","loading","getMutationState","mutationSelectors","WeakMap","createMutationSelector","createSelector","mutationState","get","set","isQueryEqual","currentVal","previousVal","multiple","defaultData","currentDependencies","previousDependencies","size","has","createCustomSelector","createSelectorCreator","defaultMemoize","getQueryState","createQuerySelector","defaultQuery","defaultQueryMultiple","defaultQueriesWithCustomData","Map","getDefaultQuery","querySelectors","queryState"],"mappings":"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ZD,E;;;;;;;;;;;;;;;;;;;AC9KA,iEAAe,UAAAhP,KAAK;AAAA,SAAIA,KAAK,CAACvF,QAAN,CAAekS,SAAnB;AAAA,CAApB,E;;;;;;;;;;;;;;ACAa;;AAEb;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,EAAE;AACF;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA,EAAE;AACF;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,EAAE;AACF;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,EAAE,IAAI;AACN;;AAEA;;AAEA;;;;;;;;;;;;;;;;ACpIA,sD;;;;;;UCAA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;WCrBA;WACA;WACA;WACA;WACA;WACA,gCAAgC,YAAY;WAC5C;WACA,E;;;;;WCPA;WACA;WACA;WACA;WACA,wCAAwC,yCAAyC;WACjF;WACA;WACA,E;;;;;WCPA,sF;;;;;WCAA;WACA;WACA;WACA,sDAAsD,kBAAkB;WACxE;WACA,+CAA+C,cAAc;WAC7D,E;;;;UCNA;UACA;UACA;UACA","file":"redux-requests.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"reselect\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"reselect\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ReduxRequests\"] = factory(require(\"reselect\"));\n\telse\n\t\troot[\"ReduxRequests\"] = factory(root[\"Reselect\"]);\n})(self, function(__WEBPACK_EXTERNAL_MODULE_reselect__) {\nreturn ","function _extends() {\n  module.exports = _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nmodule.exports = _extends;","function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nmodule.exports = _objectWithoutPropertiesLoose;","import {\n  SUCCESS_SUFFIX,\n  ERROR_SUFFIX,\n  ABORT_SUFFIX,\n  CLEAR_REQUESTS_CACHE,\n  RESET_REQUESTS,\n  ABORT_REQUESTS,\n  SET_DOWNLOAD_PROGRESS,\n  SET_UPLOAD_PROGRESS,\n  ADD_WATCHER,\n  REMOVE_WATCHER,\n  JOIN_REQUEST,\n  STOP_POLLING,\n  WEBSOCKET_OPENED,\n  WEBSOCKET_CLOSED,\n  GET_WEBSOCKET,\n  OPEN_WEBSOCKET,\n  CLOSE_WEBSOCKET,\n  STOP_SUBSCRIPTIONS,\n} from './constants';\n\nconst getActionWithSuffix = suffix => actionType => actionType + suffix;\n\nexport const success = getActionWithSuffix(SUCCESS_SUFFIX);\n\nexport const error = getActionWithSuffix(ERROR_SUFFIX);\n\nexport const abort = getActionWithSuffix(ABORT_SUFFIX);\n\nconst isFSA = action => !!action.payload;\n\nexport const createSuccessAction = (action, response) => ({\n  type: success(action.type),\n  ...(isFSA(action) ? { payload: response } : { response }),\n  meta: {\n    ...action.meta,\n    requestAction: action,\n  },\n});\n\nexport const createErrorAction = (action, errorData) => ({\n  type: error(action.type),\n  ...(isFSA(action)\n    ? {\n        payload: errorData,\n        error: true,\n      }\n    : {\n        error: errorData,\n      }),\n  meta: {\n    ...action.meta,\n    requestAction: action,\n  },\n});\n\nexport const createAbortAction = action => ({\n  type: abort(action.type),\n  meta: {\n    ...action.meta,\n    requestAction: action,\n  },\n});\n\nexport const getActionPayload = action =>\n  action.payload === undefined ? action : action.payload;\n\n// eslint-disable-next-line import/no-unused-modules\nexport const getResponseFromSuccessAction = action =>\n  action.payload ? action.payload : action.response;\n\nexport const isRequestAction = action => {\n  const actionPayload = getActionPayload(action);\n\n  return (\n    !!actionPayload?.request &&\n    !!(\n      Array.isArray(actionPayload.request) ||\n      actionPayload.request.url ||\n      actionPayload.request.query ||\n      actionPayload.request.promise ||\n      actionPayload.request.response ||\n      actionPayload.request.error\n    ) &&\n    !actionPayload.response &&\n    !(actionPayload instanceof Error)\n  );\n};\n\nexport const isResponseAction = action => !!action.meta?.requestAction;\n\nexport const getRequestActionFromResponse = action => action.meta.requestAction;\n\nexport const isSuccessAction = action =>\n  isResponseAction(action) && action.type.endsWith(SUCCESS_SUFFIX);\n\nexport const isErrorAction = action =>\n  isResponseAction(action) && action.type.endsWith(ERROR_SUFFIX);\n\nexport const isAbortAction = action =>\n  isResponseAction(action) && action.type.endsWith(ABORT_SUFFIX);\n\nconst isRequestQuery = request =>\n  (!request.query &&\n    (!request.method || request.method.toLowerCase() === 'get')) ||\n  (request.query && !request.query.trim().startsWith('mutation'));\n\nexport const isRequestActionQuery = action => {\n  const { request } = getActionPayload(action);\n\n  if (action.meta?.asMutation !== undefined) {\n    return !action.meta.asMutation;\n  }\n\n  return !!(Array.isArray(request)\n    ? request.every(isRequestQuery)\n    : isRequestQuery(request));\n};\n\nexport const clearRequestsCache = (requests = null) => ({\n  type: CLEAR_REQUESTS_CACHE,\n  requests,\n});\n\nexport const resetRequests = (\n  requests = null,\n  abortPending = true,\n  resetCached = true,\n) => ({\n  type: RESET_REQUESTS,\n  requests,\n  abortPending,\n  resetCached,\n});\n\nexport const abortRequests = (requests = null) => ({\n  type: ABORT_REQUESTS,\n  requests,\n});\n\nexport const stopPolling = (requests = null) => ({\n  type: STOP_POLLING,\n  requests,\n});\n\nexport const setDownloadProgress = (requestType, progress) => ({\n  type: SET_DOWNLOAD_PROGRESS,\n  requestType,\n  progress,\n});\n\nexport const setUploadProgress = (requestType, progress) => ({\n  type: SET_UPLOAD_PROGRESS,\n  requestType,\n  progress,\n});\n\nexport const addWatcher = requestType => ({\n  type: ADD_WATCHER,\n  requestType,\n});\n\nexport const removeWatcher = requestType => ({\n  type: REMOVE_WATCHER,\n  requestType,\n});\n\nexport const joinRequest = (requestType, rehydrate = false) => ({\n  type: JOIN_REQUEST,\n  requestType,\n  rehydrate,\n});\n\nexport const websocketOpened = () => ({ type: WEBSOCKET_OPENED });\n\nexport const websocketClosed = code => ({ type: WEBSOCKET_CLOSED, code });\n\nexport const getWebsocket = () => ({ type: GET_WEBSOCKET });\n\nexport const openWebsocket = (props = null) => ({\n  type: OPEN_WEBSOCKET,\n  props,\n});\n\nexport const closeWebsocket = (code = 1000) => ({\n  type: CLOSE_WEBSOCKET,\n  code,\n});\n\nexport const stopSubscriptions = (subscriptions = null) => ({\n  type: STOP_SUBSCRIPTIONS,\n  subscriptions,\n});\n","export const SUCCESS_SUFFIX = '_SUCCESS';\nexport const ERROR_SUFFIX = '_ERROR';\nexport const ABORT_SUFFIX = '_ABORT';\nexport const CLEAR_REQUESTS_CACHE = 'CLEAR_REQUESTS_CACHE';\nexport const RESET_REQUESTS = 'RESET_REQUESTS';\nexport const ABORT_REQUESTS = 'ABORT_REQUESTS';\nexport const SET_DOWNLOAD_PROGRESS = 'SET_DOWNLOAD_PROGRESS';\nexport const SET_UPLOAD_PROGRESS = 'SET_UPLOAD_PROGRESS';\nexport const ADD_WATCHER = 'ADD_WATCHER';\nexport const REMOVE_WATCHER = 'REMOVE_WATCHER';\nexport const JOIN_REQUEST = 'JOIN_REQUEST';\nexport const STOP_POLLING = 'STOP_POLLING';\nexport const WEBSOCKET_OPENED = 'WEBSOCKET_OPENED';\nexport const WEBSOCKET_CLOSED = 'WEBSOCKET_CLOSED';\nexport const GET_WEBSOCKET = 'GET_WEBSOCKET';\nexport const OPEN_WEBSOCKET = 'OPEN_WEBSOCKET';\nexport const CLOSE_WEBSOCKET = 'CLOSE_WEBSOCKET';\nexport const STOP_SUBSCRIPTIONS = 'STOP_SUBSCRIPTIONS';\n","import { isRequestActionQuery, isRequestAction } from './actions';\n\nexport default {\n  driver: null,\n  onRequest: null,\n  onSuccess: null,\n  onError: null,\n  onAbort: null,\n  cache: false,\n  ssr: null,\n  disableRequestsPromise: false,\n  isRequestAction,\n  isRequestActionQuery,\n  takeLatest: isRequestActionQuery,\n  normalize: false,\n  getNormalisationObjectKey: obj => obj.id,\n  shouldObjectBeNormalized: obj => obj.id !== undefined,\n  subscriber: null,\n};\n","import { requestsReducer } from './reducers';\nimport {\n  createRequestsCacheMiddleware,\n  createClientSsrMiddleware,\n  createServerSsrMiddleware,\n  createSendRequestsMiddleware,\n  createPollingMiddleware,\n  createSubscriptionsMiddleware,\n} from './middleware';\nimport defaultConfig from './default-config';\n\nconst defer = () => {\n  let res;\n  let rej;\n  const promise = new Promise((resolve, reject) => {\n    res = resolve;\n    rej = reject;\n  });\n  promise.resolve = res;\n  promise.reject = rej;\n  return promise;\n};\n\nconst handleRequests = userConfig => {\n  const config = { ...defaultConfig, ...userConfig };\n  const requestsPromise =\n    config.ssr === 'server' && !config.disableRequestsPromise ? defer() : null;\n\n  return {\n    requestsReducer: requestsReducer(config),\n    requestsMiddleware: [\n      config.ssr !== 'server' &&\n        config.subscriber &&\n        createSubscriptionsMiddleware(config),\n      config.ssr !== 'server' && createPollingMiddleware(config),\n      config.ssr === 'server' &&\n        !config.disableRequestsPromise &&\n        createServerSsrMiddleware(requestsPromise, config),\n      config.ssr === 'client' && createClientSsrMiddleware(config),\n      config.cache && createRequestsCacheMiddleware(config),\n      createSendRequestsMiddleware(config),\n    ].filter(Boolean),\n    requestsPromise,\n  };\n};\n\nexport default handleRequests;\n","export const mapRequest = (request, callback) =>\n  Array.isArray(request) ? request.map(callback) : callback(request);\n\nexport const mapObject = (obj, callback) =>\n  Object.entries(obj).reduce((prev, [k, v]) => {\n    const newValue = callback(k, v);\n\n    if (newValue === undefined) {\n      return prev;\n    }\n\n    prev[k] = newValue;\n    return prev;\n  }, {});\n","export {\n  success,\n  error,\n  abort,\n  clearRequestsCache,\n  resetRequests,\n  stopPolling,\n  abortRequests,\n  isRequestActionQuery,\n  isRequestAction,\n  isResponseAction,\n  addWatcher,\n  removeWatcher,\n  joinRequest,\n  stopSubscriptions,\n  openWebsocket,\n  closeWebsocket,\n} from './actions';\nexport { default as handleRequests } from './handle-requests';\nexport {\n  getQuery,\n  getMutation,\n  getQuerySelector,\n  getMutationSelector,\n  getWebsocketState,\n} from './selectors';\nexport { createRequestsStore } from './middleware';\n","import defaultConfig from '../default-config';\nimport { getQuery } from '../selectors';\n\nexport default (config = defaultConfig) => store => next => action => {\n  if (!config.isRequestAction(action)) {\n    return next(action);\n  }\n\n  const state = store.getState();\n  const actionsToIgnore = state.requests.ssr;\n  const actionToIgnore = actionsToIgnore.find(\n    v => (v.requestType || v) === action.type + (action.meta?.requestKey || ''),\n  );\n\n  if (!actionToIgnore) {\n    return next(action);\n  }\n\n  const query = getQuery(state, {\n    type: action.type,\n    requestKey: action.meta?.requestKey,\n  });\n\n  action.meta = actionToIgnore.duplicate\n    ? { ...action.meta, ssrDuplicate: true }\n    : action.meta;\n\n  if (query.error) {\n    return next({\n      ...action,\n      meta: {\n        ...action.meta,\n        ssrError: query.error,\n      },\n    });\n  }\n\n  return next({\n    ...action,\n    meta: {\n      ...action.meta,\n      ssrResponse: { data: query.data },\n    },\n  });\n};\n","import defaultConfig from '../default-config';\nimport { STOP_POLLING, RESET_REQUESTS } from '../constants';\n\nconst getIntervalKey = action => action.type + (action.meta?.requestKey || '');\n\nconst getKeys = requests =>\n  requests.map(v =>\n    typeof v === 'object'\n      ? v.requestType.toString() + (v.requestKey || '')\n      : v.toString(),\n  );\n\nexport default (config = defaultConfig) => {\n  let intervals = {};\n\n  return store => next => action => {\n    if (action.type === STOP_POLLING || action.type === RESET_REQUESTS) {\n      if (!action.requests) {\n        Object.values(intervals).forEach(clearInterval);\n        intervals = {};\n      } else {\n        const keys = getKeys(action.requests);\n        const intervalsCopy = { ...intervals };\n\n        keys.forEach(k => {\n          clearInterval(intervalsCopy[k]);\n          delete intervalsCopy[k];\n        });\n\n        intervals = intervalsCopy;\n      }\n    } else if (\n      config.isRequestAction(action) &&\n      config.isRequestActionQuery(action) &&\n      !action.meta?.polled &&\n      intervals[getIntervalKey(action)]\n    ) {\n      const intervalsCopy = { ...intervals };\n      clearInterval(intervals[getIntervalKey(action)]);\n      delete intervalsCopy[getIntervalKey(action)];\n      intervals = intervalsCopy;\n    }\n\n    if (\n      config.isRequestAction(action) &&\n      config.isRequestActionQuery(action) &&\n      action.meta?.poll &&\n      !action.meta.polled\n    ) {\n      intervals[getIntervalKey(action)] = setInterval(() => {\n        store.dispatch({ ...action, meta: { ...action.meta, polled: true } });\n      }, action.meta.poll * 1000);\n    }\n\n    return next(action);\n  };\n};\n","import defaultConfig from '../default-config';\nimport { getQuery } from '../selectors';\n\nconst isCacheValid = (cache, action) =>\n  cache.cacheKey === action.meta.cacheKey &&\n  (cache.timeout === null || Date.now() <= cache.timeout);\n\nconst getKey = action => action.type + (action.meta.requestKey || '');\n\nexport default (config = defaultConfig) => store => next => action => {\n  if (\n    config.isRequestAction(action) &&\n    action.meta?.cache &&\n    !action.meta.ssrResponse\n  ) {\n    const key = getKey(action);\n    const state = store.getState();\n    const cacheValue = state.requests.cache[key];\n\n    if (cacheValue !== undefined && isCacheValid(cacheValue, action)) {\n      const query = getQuery(state, {\n        type: action.type,\n        requestKey: action.meta?.requestKey,\n      });\n\n      return next({\n        ...action,\n        meta: {\n          ...action.meta,\n          cacheResponse: { data: query.data },\n        },\n      });\n    }\n  }\n\n  return next(action);\n};\n","export default store => {\n  return {\n    ...store,\n    dispatchRequest: store.dispatch,\n  };\n};\n","import {\n  getActionPayload,\n  createSuccessAction,\n  createErrorAction,\n  createAbortAction,\n  setDownloadProgress,\n  setUploadProgress,\n} from '../actions';\nimport { ABORT_REQUESTS, RESET_REQUESTS, JOIN_REQUEST } from '../constants';\nimport { getQuery } from '../selectors';\n\nimport createRequestsStore from './create-requests-store';\n\nconst getRequestTypeString = requestType =>\n  typeof requestType === 'function' ? requestType.toString() : requestType;\n\nconst getKeys = requests =>\n  requests.map(v =>\n    typeof v === 'object'\n      ? getRequestTypeString(v.requestType) + (v.requestKey || '')\n      : getRequestTypeString(v),\n  );\n\nconst getDriver = (config, action) =>\n  action.meta?.driver\n    ? config.driver[action.meta.driver]\n    : config.driver.default || config.driver;\n\nconst getLastActionKey = action =>\n  action.type + (action.meta?.requestKey ? action.meta.requestKey : '');\n\nconst isActionRehydrated = action =>\n  !!(\n    action.meta?.cacheResponse ||\n    action.meta?.ssrResponse ||\n    action.meta?.ssrError\n  );\n\n// TODO: remove to more functional style, we need object maps and filters\nconst abortPendingRequests = (action, pendingRequests) => {\n  const payload = getActionPayload(action);\n  const clearAll = !payload.requests;\n  const keys = !clearAll && getKeys(payload.requests);\n\n  if (!payload.requests) {\n    Object.values(pendingRequests).forEach(requests =>\n      requests.forEach(r => r.cancel()),\n    );\n  } else {\n    Object.entries(pendingRequests)\n      .filter(([k]) => keys.includes(k))\n      .forEach(([, requests]) => requests.forEach(r => r.cancel()));\n  }\n};\n\nconst isTakeLatest = (action, config) =>\n  action.meta?.takeLatest !== undefined\n    ? action.meta.takeLatest\n    : typeof config.takeLatest === 'function'\n    ? config.takeLatest(action)\n    : config.takeLatest;\n\nconst maybeCallOnRequestInterceptor = (action, config, store) => {\n  const payload = getActionPayload(action);\n\n  if (\n    config.onRequest &&\n    (!action.meta ||\n      (action.meta.runOnRequest !== false && !action.meta.ssrDuplicate))\n  ) {\n    if (action.request) {\n      return {\n        ...action,\n        request: config.onRequest(payload.request, action, store),\n      };\n    }\n\n    return {\n      ...action,\n      payload: {\n        ...action.payload,\n        request: config.onRequest(payload.request, action, store),\n      },\n    };\n  }\n\n  return action;\n};\n\nconst maybeCallOnRequestMeta = (action, store) => {\n  const payload = getActionPayload(action);\n\n  if (action.meta?.onRequest && !action.meta.ssrDuplicate) {\n    if (action.request) {\n      return {\n        ...action,\n        request: action.meta.onRequest(payload.request, action, store),\n      };\n    }\n\n    return {\n      ...action,\n      payload: {\n        ...action.payload,\n        request: action.meta.onRequest(payload.request, action, store),\n      },\n    };\n  }\n\n  return action;\n};\n\nconst maybeDispatchRequestAction = (action, next) => {\n  if (!action.meta || !action.meta.silent) {\n    action = next(action);\n  }\n\n  return action;\n};\n\nconst getDriverActions = (action, store) => {\n  const driverActions = {};\n\n  if (action.meta?.measureDownloadProgress) {\n    driverActions.setDownloadProgress = progress =>\n      store.dispatch(\n        setDownloadProgress(\n          action.type + (action.meta?.requestKey || ''),\n          progress,\n        ),\n      );\n  }\n\n  if (action.meta?.measureUploadProgress) {\n    driverActions.setUploadProgress = progress =>\n      store.dispatch(\n        setUploadProgress(\n          action.type + (action.meta?.requestKey || ''),\n          progress,\n        ),\n      );\n  }\n\n  return driverActions;\n};\n\n// TODO: move to helpers\nconst defer = () => {\n  let res;\n  let rej;\n  const promise = new Promise((resolve, reject) => {\n    res = resolve;\n    rej = reject;\n  });\n  promise.resolve = res;\n  promise.reject = rej;\n  return promise;\n};\n\nconst getResponsePromises = (action, config, pendingRequests, store) => {\n  const actionPayload = getActionPayload(action);\n  const isBatchedRequest = Array.isArray(actionPayload.request);\n\n  if (action.meta?.cacheResponse) {\n    return [Promise.resolve(action.meta.cacheResponse)];\n  } else if (action.meta?.ssrResponse) {\n    return [Promise.resolve(action.meta.ssrResponse)];\n  } else if (action.meta?.ssrError) {\n    return [Promise.reject(action.meta.ssrError)];\n  }\n\n  const driverActions = isBatchedRequest ? {} : getDriverActions(action, store);\n  const driver = getDriver(config, action);\n  const lastActionKey = getLastActionKey(action);\n  const takeLatest = isTakeLatest(action, config);\n\n  if (takeLatest && pendingRequests[lastActionKey]) {\n    pendingRequests[lastActionKey].forEach(r => r.cancel());\n  }\n\n  const responsePromises = isBatchedRequest\n    ? actionPayload.request.map(r => driver(r, action, driverActions))\n    : [driver(actionPayload.request, action, driverActions)];\n\n  if (responsePromises[0].cancel) {\n    pendingRequests[lastActionKey] = responsePromises;\n  }\n\n  return responsePromises;\n};\n\nconst maybeCallGetError = (action, error) => {\n  if (\n    error !== 'REQUEST_ABORTED' &&\n    !isActionRehydrated(action) &&\n    action.meta?.getError\n  ) {\n    throw action.meta.getError(error);\n  }\n\n  throw error;\n};\n\nconst maybeCallOnErrorInterceptor = (action, config, store, error) => {\n  if (\n    error !== 'REQUEST_ABORTED' &&\n    config.onError &&\n    (!action.meta ||\n      (action.meta.runOnError !== false && !action.meta.ssrDuplicate))\n  ) {\n    return Promise.all([config.onError(error, action, store)]);\n  }\n\n  throw error;\n};\n\nconst maybeCallOnErrorMeta = (action, store, error) => {\n  if (\n    error !== 'REQUEST_ABORTED' &&\n    action.meta?.onError &&\n    !action.meta.ssrDuplicate\n  ) {\n    return Promise.all([action.meta.onError(error, action, store)]);\n  }\n\n  throw error;\n};\n\nconst maybeCallOnAbortInterceptor = (action, config, store, error) => {\n  if (\n    error === 'REQUEST_ABORTED' &&\n    config.onAbort &&\n    (!action.meta || action.meta.runOnAbort !== false)\n  ) {\n    config.onAbort(action, store);\n  }\n\n  throw error;\n};\n\nconst maybeCallOnAbortMeta = (action, store, error) => {\n  if (error === 'REQUEST_ABORTED' && action.meta?.onAbort) {\n    action.meta.onAbort(action, store);\n  }\n\n  throw error;\n};\n\nconst getInitialBatchObject = responseKeys =>\n  responseKeys.reduce((prev, key) => {\n    prev[key] = [];\n    return prev;\n  }, {});\n\nconst maybeTransformBatchRequestResponse = (action, response) => {\n  const actionPayload = getActionPayload(action);\n  const isBatchedRequest = Array.isArray(actionPayload.request);\n  const responseKeys = Object.keys(response[0]);\n\n  return isBatchedRequest && !isActionRehydrated(action)\n    ? response.reduce((prev, current) => {\n        responseKeys.forEach(key => {\n          prev[key].push(current[key]);\n        });\n        return prev;\n      }, getInitialBatchObject(responseKeys))\n    : response[0];\n};\n\nconst maybeCallGetData = (action, store, response) => {\n  if (!isActionRehydrated(action) && action.meta?.getData) {\n    const query = getQuery(store.getState(), {\n      type: action.type,\n      requestKey: action.meta?.requestKey,\n    });\n\n    return {\n      ...response,\n      data: action.meta.getData(response.data, query.data),\n    };\n  }\n\n  return response;\n};\n\nconst maybeCallOnSuccessInterceptor = (action, config, store, response) => {\n  if (\n    config.onSuccess &&\n    (!action.meta ||\n      (action.meta.runOnSuccess !== false && !action.meta.ssrDuplicate))\n  ) {\n    const result = config.onSuccess(response, action, store);\n\n    if (!isActionRehydrated(action)) {\n      return result;\n    }\n  }\n\n  return response;\n};\n\nconst maybeCallOnSuccessMeta = (action, store, response) => {\n  if (action.meta?.onSuccess && !action.meta.ssrDuplicate) {\n    const result = action.meta.onSuccess(response, action, store);\n\n    if (!isActionRehydrated(action)) {\n      return result;\n    }\n  }\n\n  return response;\n};\n\nconst sleep = () => new Promise(resolve => setTimeout(resolve, 10));\n\nconst createSendRequestMiddleware = config => {\n  // TODO: clear not pending promises sometimes\n  const pendingRequests = {}; // for aborts\n  const allPendingRequests = {}; // for joining\n\n  return store => next => action => {\n    const payload = getActionPayload(action);\n    const requestsStore = createRequestsStore(store);\n\n    if (action.type === JOIN_REQUEST) {\n      next(action);\n      return allPendingRequests[action.requestType] || sleep();\n    }\n\n    if (\n      action.type === ABORT_REQUESTS ||\n      (action.type === RESET_REQUESTS && payload.abortPending)\n    ) {\n      abortPendingRequests(action, pendingRequests);\n      return next(action);\n    }\n\n    if (config.isRequestAction(action)) {\n      const lastActionKey = getLastActionKey(action);\n      allPendingRequests[lastActionKey] = defer();\n\n      action = maybeCallOnRequestInterceptor(action, config, requestsStore);\n      action = maybeCallOnRequestMeta(action, requestsStore);\n      action = maybeDispatchRequestAction(action, next);\n\n      const responsePromises = getResponsePromises(\n        action,\n        config,\n        pendingRequests,\n        store,\n      );\n\n      return Promise.all(responsePromises)\n        .catch(error => maybeCallGetError(action, error))\n        .catch(error =>\n          maybeCallOnErrorInterceptor(action, config, requestsStore, error),\n        )\n        .catch(error => maybeCallOnErrorMeta(action, requestsStore, error))\n        .catch(error =>\n          maybeCallOnAbortInterceptor(action, config, requestsStore, error),\n        )\n        .catch(error => maybeCallOnAbortMeta(action, requestsStore, error))\n        .catch(error => {\n          if (error === 'REQUEST_ABORTED') {\n            const abortAction = createAbortAction(action);\n\n            if (!action.meta || !action.meta.silent) {\n              store.dispatch(abortAction);\n            }\n\n            allPendingRequests[lastActionKey].resolve({\n              action: abortAction,\n              isAborted: true,\n            });\n\n            throw { action: abortAction, isAborted: true };\n          }\n\n          const errorAction = createErrorAction(action, error);\n\n          if (!action.meta || !action.meta.silent) {\n            store.dispatch(errorAction);\n          }\n\n          allPendingRequests[lastActionKey].resolve({\n            action: errorAction,\n            error,\n          });\n\n          throw { action: errorAction, error };\n        })\n        .then(response => {\n          response = maybeTransformBatchRequestResponse(action, response);\n          return maybeCallGetData(action, store, response);\n        })\n        .then(response =>\n          maybeCallOnSuccessInterceptor(\n            action,\n            config,\n            requestsStore,\n            response,\n          ),\n        )\n        .then(response =>\n          maybeCallOnSuccessMeta(action, requestsStore, response),\n        )\n        .then(response => {\n          const successAction = createSuccessAction(action, response);\n\n          if (!action.meta || !action.meta.silent) {\n            store.dispatch(successAction);\n          }\n\n          allPendingRequests[lastActionKey].resolve({\n            action: successAction,\n            ...response,\n          });\n\n          return { action: successAction, ...response };\n        })\n        .catch(error => {\n          if (error && error.action) {\n            return error;\n          }\n\n          throw error;\n        });\n    }\n\n    return next(action);\n  };\n};\n\nexport default createSendRequestMiddleware;\n","import defaultConfig from '../default-config';\nimport { isResponseAction, isSuccessAction } from '../actions';\n\nexport default (requestsPromise, config = defaultConfig) => {\n  let index = 0;\n  const successActions = [];\n  const errorActions = [];\n\n  return () => next => action => {\n    if (config.isRequestAction(action)) {\n      index +=\n        action.meta?.dependentRequestsNumber !== undefined\n          ? action.meta.dependentRequestsNumber + 1\n          : 1;\n    } else if (isResponseAction(action)) {\n      action = next(action);\n\n      if (!isSuccessAction(action)) {\n        errorActions.push(action);\n        index -=\n          action.meta.dependentRequestsNumber !== undefined\n            ? action.meta.dependentRequestsNumber + 1\n            : 1;\n        index -= action.meta.isDependentRequest ? 1 : 0;\n      } else {\n        successActions.push(action);\n        index -= action.meta.isDependentRequest ? 2 : 1;\n      }\n\n      if (index === 0) {\n        if (errorActions.length > 0) {\n          requestsPromise.reject({ successActions, errorActions });\n        } else {\n          requestsPromise.resolve(successActions);\n        }\n      }\n\n      return action;\n    }\n\n    return next(action);\n  };\n};\n","import { mapObject } from '../helpers';\nimport {\n  websocketOpened,\n  websocketClosed,\n  openWebsocket,\n  closeWebsocket,\n  getActionPayload,\n} from '../actions';\nimport {\n  GET_WEBSOCKET,\n  STOP_SUBSCRIPTIONS,\n  OPEN_WEBSOCKET,\n  CLOSE_WEBSOCKET,\n  WEBSOCKET_OPENED,\n} from '../constants';\n\nimport createRequestsStore from './create-requests-store';\n\nconst shouldBeNormalized = (action, globalNormalize) =>\n  action.meta?.normalize !== undefined\n    ? action.meta.normalize\n    : globalNormalize;\n\nconst transformIntoLocalMutation = (\n  subscriptionAction,\n  subscriptionData,\n  message,\n  globalNormalize,\n) => {\n  const meta = {};\n\n  if (shouldBeNormalized(subscriptionAction, globalNormalize)) {\n    meta.localData = subscriptionData;\n  }\n\n  if (subscriptionAction.meta?.mutations) {\n    meta.mutations = mapObject(subscriptionAction.meta.mutations, (k, v) => ({\n      local: true,\n      updateData: data => v(data, subscriptionData, message),\n    }));\n  }\n\n  return {\n    type: `${subscriptionAction.type}_MUTATION`,\n    meta,\n  };\n};\n\n/*\nThis wrapper is implemented to always call onClose when ws,close(1000) is called.\nSometimes onClose is not called at all in native implementation on network disconnection, sometimes it is called later.\nAbove makes things unpredictable.\nAlso it cleans all attached event handlers.\n*/\nclass CleanableWebsocket {\n  constructor(url, protocols, WS) {\n    this.ws = new WS(url, protocols);\n    this.onError = null;\n    this.onOpen = null;\n    this.onClose = null;\n    this.onMessage = null;\n    this.killed = false;\n    this.sentMessages = this.ws.sentMessages;\n  }\n\n  addEventListener(type, callback) {\n    if (type === 'error') {\n      this.onError = callback;\n    } else if (type === 'close') {\n      // we make sure onClose could be called only once\n      this.onClose = e => {\n        if (!this.killed) {\n          this.killed = true;\n          callback(e);\n          this.removeAllListeners();\n        }\n      };\n    } else if (type === 'open') {\n      this.onOpen = callback;\n    } else if (type === 'message') {\n      this.onMessage = callback;\n    }\n\n    this.ws.addEventListener(type, type === 'close' ? this.onClose : callback);\n  }\n\n  removeAllListeners() {\n    if (this.onError) {\n      this.ws.removeEventListener('error', this.onError);\n    }\n\n    if (this.onMessage) {\n      this.ws.removeEventListener('message', this.onMessage);\n    }\n\n    if (this.onOpen) {\n      this.ws.removeEventListener('open', this.onOpen);\n    }\n\n    if (this.onClose) {\n      this.ws.removeEventListener('close', this.onClose);\n    }\n  }\n\n  close(code) {\n    // for ws.close() we call onClose manually, to force this call always immediately\n    if (this.onClose) {\n      this.onClose({ code });\n    }\n\n    this.ws.close(code);\n  }\n\n  send(message) {\n    this.ws.send(message);\n  }\n\n  sendToClient(message) {\n    this.ws.sendToClient(message);\n  }\n\n  open() {\n    this.ws.open();\n  }\n\n  error(e) {\n    this.ws.error(e);\n  }\n}\n\nconst getDefaultWebSocket = () =>\n  typeof WebSocket === 'undefined' ? undefined : WebSocket;\n\nexport default ({\n  normalize = false,\n  subscriber: {\n    WS = getDefaultWebSocket(),\n    url,\n    protocols,\n    onOpen,\n    onClose,\n    onError,\n    onMessage,\n    onSend,\n    activateOn,\n    getData,\n    onStopSubscriptions,\n    lazy = false,\n    isHeartbeatMessage,\n    heartbeatTimeout = 20,\n    reconnectTimeout = 5,\n  } = {},\n}) => {\n  let subscriptions = {};\n  let ws;\n  let active = false;\n  let lastHeartbeatTimeout = null;\n  let lastReconnectTimeout = null;\n  let lastOpenWebsocketAction = null;\n\n  const clearLastReconnectTimeout = () => {\n    if (lastReconnectTimeout) {\n      clearTimeout(lastReconnectTimeout);\n      lastReconnectTimeout = null;\n    }\n  };\n\n  const clearLastHeartbeatTimeout = () => {\n    if (lastHeartbeatTimeout) {\n      clearTimeout(lastHeartbeatTimeout);\n      lastHeartbeatTimeout = null;\n    }\n  };\n\n  return store => next => action => {\n    if (action.type === OPEN_WEBSOCKET) {\n      lastOpenWebsocketAction = action;\n    }\n\n    if ((!ws && WS && url && !lazy) || action.type === OPEN_WEBSOCKET) {\n      const requestsStore = createRequestsStore(store);\n\n      clearLastReconnectTimeout();\n      clearLastHeartbeatTimeout();\n\n      if (ws) {\n        ws.close(1000);\n      }\n\n      ws = new CleanableWebsocket(url, protocols, WS);\n\n      ws.addEventListener('open', () => {\n        if (!activateOn) {\n          store.dispatch(websocketOpened());\n          active = true;\n        }\n\n        if (onOpen) {\n          onOpen(\n            requestsStore,\n            ws,\n            action.type === OPEN_WEBSOCKET ? action.props : null,\n          );\n        }\n\n        if (isHeartbeatMessage) {\n          clearLastHeartbeatTimeout();\n\n          lastHeartbeatTimeout = setTimeout(() => {\n            store.dispatch(closeWebsocket(3000));\n          }, heartbeatTimeout * 1000);\n        }\n      });\n\n      ws.addEventListener('error', e => {\n        if (onError) {\n          onError(e, requestsStore, ws);\n        }\n      });\n\n      ws.addEventListener('close', e => {\n        store.dispatch(websocketClosed(e.code));\n        active = false;\n        clearLastReconnectTimeout();\n        clearLastHeartbeatTimeout();\n\n        if (onClose) {\n          onClose(e, requestsStore, ws);\n        }\n\n        if (e.code !== 1000 && reconnectTimeout) {\n          lastReconnectTimeout = setTimeout(() => {\n            store.dispatch(lastOpenWebsocketAction ? action : openWebsocket());\n          }, reconnectTimeout * 1000);\n        }\n      });\n\n      ws.addEventListener('message', message => {\n        if (!active && activateOn && activateOn(message)) {\n          store.dispatch(websocketOpened());\n          active = true;\n        }\n\n        if (isHeartbeatMessage && isHeartbeatMessage(message)) {\n          clearLastHeartbeatTimeout();\n\n          lastHeartbeatTimeout = setTimeout(() => {\n            store.dispatch(closeWebsocket(3000));\n          }, heartbeatTimeout * 1000);\n        }\n\n        let data = JSON.parse(message.data);\n\n        if (getData) {\n          data = getData(data);\n        }\n\n        if (onMessage) {\n          onMessage(data, message, requestsStore);\n        }\n\n        const subscription = subscriptions[data.type];\n\n        if (subscription) {\n          if (subscription.meta?.getData) {\n            data = subscription.meta.getData(data);\n          }\n\n          if (subscription.meta?.onMessage) {\n            subscription.meta.onMessage(data, message, requestsStore);\n          }\n\n          if (\n            subscription.meta?.mutations ||\n            shouldBeNormalized(subscription, normalize)\n          ) {\n            store.dispatch(\n              transformIntoLocalMutation(\n                subscription,\n                data,\n                message,\n                normalize,\n              ),\n            );\n          }\n        }\n      });\n    }\n\n    if (action.type === GET_WEBSOCKET) {\n      return ws;\n    }\n\n    if (ws && action.type === CLOSE_WEBSOCKET) {\n      clearLastReconnectTimeout();\n      clearLastHeartbeatTimeout();\n      const response = next(action);\n      ws.close(action.code);\n      ws = null;\n      return response;\n    } else if (action.type === WEBSOCKET_OPENED) {\n      Object.values(subscriptions).forEach(subscriptionAction => {\n        const actionPayload = getActionPayload(subscriptionAction);\n\n        if (actionPayload.subscription) {\n          ws.send(\n            JSON.stringify(\n              onSend\n                ? onSend(actionPayload.subscription, subscriptionAction)\n                : actionPayload.subscription,\n            ),\n          );\n        }\n      });\n    } else if (action.type === STOP_SUBSCRIPTIONS) {\n      const requestsStore = createRequestsStore(store);\n\n      if (!action.subscriptions) {\n        if (onStopSubscriptions) {\n          onStopSubscriptions(\n            Object.keys(subscriptions),\n            action,\n            ws,\n            requestsStore,\n          );\n        }\n\n        subscriptions = {};\n      } else {\n        if (onStopSubscriptions) {\n          onStopSubscriptions(action.subscriptions, action, ws, requestsStore);\n        }\n\n        subscriptions = mapObject(subscriptions, (k, v) =>\n          action.subscriptions.includes(k) ? undefined : v,\n        );\n      }\n    } else if (\n      action.subscription !== undefined ||\n      action.payload?.subscription !== undefined\n    ) {\n      if (\n        action.meta?.onMessage ||\n        action.meta?.mutations ||\n        shouldBeNormalized(action, normalize)\n      ) {\n        subscriptions = {\n          ...subscriptions,\n          [action.type + (action.meta?.requestKey || '')]: action,\n        };\n      }\n\n      const actionPayload = getActionPayload(action);\n\n      if (actionPayload.subscription && ws && active) {\n        ws.send(\n          JSON.stringify(\n            onSend\n              ? onSend(actionPayload.subscription, action)\n              : actionPayload.subscription,\n          ),\n        );\n      }\n    }\n\n    return next(action);\n  };\n};\n","export const denormalize = (data, normalizedData, usedKeys, path = '') => {\n  if (typeof data === 'string' && data.startsWith('@@')) {\n    return denormalize(normalizedData[data], normalizedData, usedKeys, path);\n  }\n\n  if (Array.isArray(data)) {\n    return data.map(v => denormalize(v, normalizedData, usedKeys, path));\n  }\n\n  if (data !== null && typeof data === 'object') {\n    const objectEntries = usedKeys[path]\n      ? Object.entries(data).filter(([k]) => usedKeys[path].includes(k))\n      : Object.entries(data);\n\n    return objectEntries.reduce((prev, [k, v]) => {\n      prev[k] = denormalize(v, normalizedData, usedKeys, `${path}.${k}`);\n      return prev;\n    }, {});\n  }\n\n  return data;\n};\n","export const getDependentKeys = (\n  data,\n  normalizedData,\n  usedKeys,\n  dependentKeys,\n  path = '',\n) => {\n  if (!dependentKeys) {\n    dependentKeys = new Set();\n  }\n\n  if (typeof data === 'string' && data.startsWith('@@')) {\n    dependentKeys.add(data);\n    getDependentKeys(\n      normalizedData[data],\n      normalizedData,\n      usedKeys,\n      dependentKeys,\n      path,\n    );\n  } else if (Array.isArray(data)) {\n    data.forEach(v =>\n      getDependentKeys(v, normalizedData, usedKeys, dependentKeys, path),\n    );\n  } else if (data !== null && typeof data === 'object') {\n    const objectEntries = usedKeys[path]\n      ? Object.entries(data).filter(([k]) => usedKeys[path].includes(k))\n      : Object.entries(data);\n\n    objectEntries.forEach(([k, v]) => {\n      getDependentKeys(\n        v,\n        normalizedData,\n        usedKeys,\n        dependentKeys,\n        `${path}.${k}`,\n      );\n    });\n  }\n\n  return dependentKeys;\n};\n","import deepmerge from 'deepmerge';\n\nconst mergeOptions = {\n  arrayMerge: (destinationArray, sourceArray) => sourceArray,\n  clone: false,\n};\n\nexport const mergeData = (oldData, newData) =>\n  deepmerge(oldData, newData, mergeOptions);\n","import defaultConfig from '../default-config';\n\nimport { mergeData } from './merge-data';\n\nconst stipFromDeps = (data, config, root = true) => {\n  if (Array.isArray(data)) {\n    return data.map(v => stipFromDeps(v, config));\n  }\n\n  if (data !== null && typeof data === 'object') {\n    if (config.shouldObjectBeNormalized(data) && root) {\n      return `@@${config.getNormalisationObjectKey(data)}`;\n    }\n\n    return Object.entries(data).reduce((prev, [k, v]) => {\n      prev[k] = stipFromDeps(v, config);\n      return prev;\n    }, {});\n  }\n\n  return data;\n};\n\nexport const getDependencies = (\n  data,\n  config = defaultConfig,\n  usedKeys,\n  path = '',\n) => {\n  usedKeys = usedKeys || {};\n\n  if (Array.isArray(data)) {\n    return [\n      data.reduce(\n        (prev, current) => [\n          ...prev,\n          ...getDependencies(current, config, usedKeys, path)[0],\n        ],\n        [],\n      ),\n      usedKeys,\n    ];\n  }\n\n  if (data !== null && typeof data === 'object') {\n    if (config.shouldObjectBeNormalized(data)) {\n      usedKeys[path] = Object.keys(data);\n    }\n\n    return [\n      Object.entries(data).reduce(\n        (prev, [k, v]) => [\n          ...prev,\n          ...getDependencies(v, config, usedKeys, `${path}.${k}`)[0],\n        ],\n        config.shouldObjectBeNormalized(data) ? [data] : [],\n      ),\n      usedKeys,\n    ];\n  }\n\n  return [[], usedKeys];\n};\n\nexport const normalize = (data, config = defaultConfig) => {\n  const [dependencies, usedKeys] = getDependencies(data, config);\n\n  return [\n    stipFromDeps(data, config, true),\n    dependencies.reduce((prev, v) => {\n      const key = config.getNormalisationObjectKey(v);\n      prev[`@@${key}`] = prev[`@@${key}`]\n        ? mergeData(prev[`@@${key}`], stipFromDeps(v, config, false))\n        : stipFromDeps(v, config, false);\n      return prev;\n    }, {}),\n    usedKeys,\n  ];\n};\n","import { CLEAR_REQUESTS_CACHE } from '../constants';\nimport { isSuccessAction, getRequestActionFromResponse } from '../actions';\n\nconst getNewCacheTimeout = cache =>\n  cache === true ? null : cache * 1000 + Date.now();\n\nconst getRequestKey = action => action.type + (action.meta.requestKey || '');\n\nconst getRequestTypeString = requestType =>\n  typeof requestType === 'function' ? requestType.toString() : requestType;\n\nconst getRequestKeys = requests =>\n  requests.map(v =>\n    typeof v === 'object'\n      ? getRequestTypeString(v.requestType) + v.requestKey\n      : getRequestTypeString(v),\n  );\n\nexport default (state, action) => {\n  if (action.type === CLEAR_REQUESTS_CACHE) {\n    if (!action.requests) {\n      return {};\n    }\n\n    state = { ...state };\n    getRequestKeys(action.requests).forEach(requestKey => {\n      delete state[requestKey];\n    });\n\n    return state;\n  }\n\n  if (\n    isSuccessAction(action) &&\n    action.meta.cache &&\n    !action.meta.cacheResponse &&\n    !action.meta.ssrResponse\n  ) {\n    const requestAction = getRequestActionFromResponse(action);\n\n    return {\n      ...state,\n      [getRequestKey(requestAction)]: {\n        timeout: getNewCacheTimeout(action.meta.cache),\n        cacheKey: action.meta.cacheKey,\n      },\n    };\n  }\n\n  return state;\n};\n","import {\n  isErrorAction,\n  isAbortAction,\n  isResponseAction,\n  getRequestActionFromResponse,\n} from '../actions';\n\nexport default (state, action) => {\n  if (!isResponseAction(action)) {\n    const mutationType =\n      action.type + (action.meta?.requestKey ? action.meta.requestKey : '');\n\n    return {\n      ...state,\n      [mutationType]: {\n        error: null,\n        pending: (state[mutationType] ? state[mutationType].pending : 0) + 1,\n        ref: state[mutationType] ? state[mutationType].ref : {},\n      },\n    };\n  }\n\n  const requestAction = getRequestActionFromResponse(action);\n  const mutationType =\n    requestAction.type +\n    (action.meta?.requestKey ? action.meta.requestKey : '');\n\n  if (isErrorAction(action)) {\n    return {\n      ...state,\n      [mutationType]: {\n        error: action.payload ? action.payload : action.error,\n        pending: state[mutationType].pending - 1,\n        ref: state[mutationType].ref,\n      },\n    };\n  }\n\n  if (\n    isAbortAction(action) &&\n    state[mutationType].pending === 1 &&\n    state[mutationType].error === null\n  ) {\n    return state;\n  }\n\n  return {\n    ...state,\n    [mutationType]: {\n      error: null,\n      pending: state[mutationType].pending - 1,\n      ref: state[mutationType].ref,\n    },\n  };\n};\n","import { SET_DOWNLOAD_PROGRESS, SET_UPLOAD_PROGRESS } from '../constants';\n\nexport default (state, action, config) => {\n  if (action.type === SET_DOWNLOAD_PROGRESS) {\n    return {\n      ...state,\n      downloadProgress: {\n        ...state.downloadProgress,\n        [action.requestType]: action.progress,\n      },\n    };\n  }\n\n  if (action.type === SET_UPLOAD_PROGRESS) {\n    return {\n      ...state,\n      uploadProgress: {\n        ...state.uploadProgress,\n        [action.requestType]: action.progress,\n      },\n    };\n  }\n\n  if (config.isRequestAction(action) && action.meta?.measureDownloadProgress) {\n    return {\n      ...state,\n      downloadProgress: {\n        ...state.downloadProgress,\n        [action.type + (action.meta?.requestKey || '')]: 0,\n      },\n    };\n  }\n\n  if (config.isRequestAction(action) && action.meta?.measureUploadProgress) {\n    return {\n      ...state,\n      uploadProgress: {\n        ...state.uploadProgress,\n        [action.type + (action.meta?.requestKey || '')]: 0,\n      },\n    };\n  }\n\n  return state;\n};\n","import defaultConfig from '../default-config';\nimport {\n  success,\n  error,\n  abort,\n  isResponseAction,\n  getRequestActionFromResponse,\n  isErrorAction,\n  isSuccessAction,\n} from '../actions';\nimport { getQuery } from '../selectors';\nimport { normalize, mergeData } from '../normalizers';\n\nimport updateData from './update-data';\n\nconst getInitialQuery = normalized => ({\n  data: null,\n  pending: 0,\n  error: null,\n  pristine: true,\n  ref: {},\n  normalized,\n  usedKeys: normalized ? {} : null,\n});\n\nconst getDataFromResponseAction = action =>\n  action.payload ? action.payload.data : action.response.data;\n\nconst shouldBeNormalized = (action, config) =>\n  action.meta?.normalize !== undefined\n    ? action.meta.normalize\n    : config.normalize;\n\nconst queryReducer = (state, action, actionType, config, normalizedData) => {\n  if (state === undefined) {\n    state = getInitialQuery(shouldBeNormalized(action, config));\n  }\n\n  if (action.meta?.mutations?.[actionType]) {\n    const mutationConfig = action.meta.mutations[actionType];\n    const data = updateData(\n      state.normalized\n        ? getQuery(\n            {\n              requests: {\n                normalizedData,\n                queries: { [actionType]: state },\n                downloadProgress: {},\n                uploadProgress: {},\n              },\n            },\n            { type: actionType },\n          ).data\n        : state.data,\n      action,\n      mutationConfig,\n    );\n    return data === state.data ? state : { ...state, data };\n  }\n\n  switch (action.type) {\n    case success(actionType):\n      return action.meta?.ssrResponse || action.meta?.cacheResponse\n        ? state\n        : {\n            ...state,\n            data: getDataFromResponseAction(action),\n            pending: state.pending - 1,\n            error: null,\n          };\n\n    case error(actionType):\n      return action.meta?.ssrError\n        ? state\n        : {\n            ...state,\n            data: null,\n            pending: state.pending - 1,\n            error: action.payload ? action.payload : action.error,\n          };\n    case abort(actionType): {\n      if (state.pending === 1 && state.data === null && state.error === null) {\n        return undefined;\n      }\n\n      return {\n        ...state,\n        pending: state.pending - 1,\n      };\n    }\n    default:\n      return action.meta?.ssrResponse ||\n        action.meta?.ssrError ||\n        action.meta?.cacheResponse\n        ? state\n        : {\n            ...state,\n            pending: state.pending + 1,\n            error: null,\n            pristine: false,\n          };\n  }\n};\n\nconst maybeGetQueryActionType = (action, config) => {\n  if (config.isRequestAction(action) && config.isRequestActionQuery(action)) {\n    return action.type;\n  }\n\n  if (\n    isResponseAction(action) &&\n    config.isRequestActionQuery(getRequestActionFromResponse(action))\n  ) {\n    return getRequestActionFromResponse(action).type;\n  }\n\n  return null;\n};\n\nconst updateNormalizedData = (normalizedData, action, config) => {\n  if (config.isRequestAction(action) && action.meta?.optimisticData) {\n    const [, newNormalizedData] = normalize(action.meta.optimisticData, config);\n    return mergeData(normalizedData, newNormalizedData);\n  }\n\n  if (\n    isResponseAction(action) &&\n    isErrorAction(action) &&\n    action.meta.revertedData\n  ) {\n    const [, newNormalizedData] = normalize(action.meta.revertedData, config);\n    return mergeData(normalizedData, newNormalizedData);\n  }\n\n  if (\n    isResponseAction(action) &&\n    isSuccessAction(action) &&\n    shouldBeNormalized(action, config) &&\n    !config.isRequestActionQuery(getRequestActionFromResponse(action))\n  ) {\n    const [, newNormalizedData] = normalize(\n      getDataFromResponseAction(action),\n      config,\n    );\n    return mergeData(normalizedData, newNormalizedData);\n  }\n\n  if (action.meta?.localData) {\n    const [, newNormalizedData] = normalize(action.meta.localData, config);\n    return mergeData(normalizedData, newNormalizedData);\n  }\n\n  return normalizedData;\n};\n\nexport default (state, action, config = defaultConfig) => {\n  let normalizedData = updateNormalizedData(\n    state.normalizedData,\n    action,\n    config,\n  );\n\n  if (action.meta?.mutations) {\n    return {\n      queries: {\n        ...state.queries,\n        ...Object.keys(action.meta.mutations)\n          .filter(actionType => !!state.queries[actionType])\n          .reduce((prev, actionType) => {\n            const updatedQuery = queryReducer(\n              state.queries[actionType],\n              action,\n              actionType,\n              config,\n              normalizedData,\n            );\n\n            if (\n              updatedQuery.normalized &&\n              updatedQuery.data !== state.queries[actionType].data\n            ) {\n              const [newdata, newNormalizedData, usedKeys] = normalize(\n                updatedQuery.data,\n                config,\n              );\n              normalizedData = mergeData(normalizedData, newNormalizedData);\n              prev[actionType] = { ...updatedQuery, data: newdata, usedKeys };\n            } else {\n              prev[actionType] = updatedQuery;\n            }\n            return prev;\n          }, {}),\n      },\n      normalizedData,\n    };\n  }\n\n  const queryActionType = maybeGetQueryActionType(action, config);\n\n  if (queryActionType) {\n    const queryType =\n      action.meta?.requestKey !== undefined\n        ? queryActionType + action.meta.requestKey\n        : queryActionType;\n    const updatedQuery = queryReducer(\n      state.queries[queryType],\n      action,\n      queryActionType,\n      config,\n    );\n\n    if (updatedQuery === undefined) {\n      // eslint-disable-next-line no-unused-vars\n      const { [queryType]: toRemove, ...remainingQueries } = state.queries;\n\n      return {\n        queries: remainingQueries,\n        normalizedData,\n      };\n    }\n\n    if (\n      updatedQuery.normalized &&\n      updatedQuery.data &&\n      (!state.queries[queryType] ||\n        state.queries[queryType].data !== updatedQuery.data)\n    ) {\n      const [data, newNormalizedData, usedKeys] = normalize(\n        updatedQuery.data,\n        config,\n      );\n\n      return {\n        queries: {\n          ...state.queries,\n          [queryType]: { ...updatedQuery, data, usedKeys },\n        },\n        normalizedData: mergeData(normalizedData, newNormalizedData),\n      };\n    }\n\n    return {\n      queries: {\n        ...state.queries,\n        [queryType]: updatedQuery,\n      },\n      normalizedData,\n    };\n  }\n\n  return state.normalizedData === normalizedData\n    ? state\n    : {\n        ...state,\n        normalizedData,\n      };\n};\n","import defaultConfig from '../default-config';\n\n// TODO: this should be rewritten to more functional style, we need things like filter object helpers\nexport default (state, action, config = defaultConfig) => {\n  if (config.isRequestAction(action) && action.meta?.requestKey !== undefined) {\n    let { queries, mutations, cache, requestsKeys } = state;\n\n    if (!requestsKeys[action.type]) {\n      requestsKeys = {\n        ...requestsKeys,\n        [action.type]: [action.meta.requestKey],\n      };\n    } else {\n      requestsKeys = {\n        ...requestsKeys,\n        [action.type]: [\n          ...requestsKeys[action.type].filter(\n            k => k !== action.meta.requestKey,\n          ),\n          action.meta.requestKey,\n        ],\n      };\n    }\n\n    if (\n      action.meta.requestsCapacity &&\n      requestsKeys[action.type].length > action.meta.requestsCapacity\n    ) {\n      const isQuery = config.isRequestActionQuery(action);\n      const requestsStorage = isQuery ? queries : mutations;\n\n      const numberOfExceedingRequests =\n        requestsKeys[action.type].length - action.meta.requestsCapacity;\n\n      if (numberOfExceedingRequests > 0) {\n        const exceedingRequestsKeys = requestsKeys[action.type]\n          .slice(0, numberOfExceedingRequests)\n          .filter(k => {\n            const exceededRequest = requestsStorage[action.type + k];\n            return !exceededRequest || exceededRequest.pending === 0; // we dont want to remove pending requests\n          });\n\n        if (exceedingRequestsKeys.length > 0) {\n          requestsKeys = {\n            ...requestsKeys,\n            [action.type]: requestsKeys[action.type].filter(\n              k => !exceedingRequestsKeys.includes(k),\n            ),\n          };\n          const copiedStorage = { ...requestsStorage };\n\n          exceedingRequestsKeys.forEach(k => {\n            delete copiedStorage[action.type + k];\n          });\n\n          if (isQuery) {\n            queries = copiedStorage;\n\n            const copiedCache = { ...cache };\n\n            exceedingRequestsKeys.forEach(k => {\n              delete copiedCache[action.type + k];\n            });\n\n            cache = copiedCache;\n          } else {\n            mutations = copiedStorage;\n          }\n        }\n      }\n    }\n\n    return {\n      queries,\n      mutations,\n      cache,\n      requestsKeys,\n      downloadProgress: state.downloadProgress,\n      uploadProgress: state.uploadProgress,\n    };\n  }\n\n  return state;\n};\n","import defaultConfig from '../default-config';\nimport { isResponseAction, getRequestActionFromResponse } from '../actions';\n\nimport queriesReducer from './queries-reducer';\nimport mutationsReducer from './mutations-reducer';\nimport requestKeysReducer from './requests-keys-reducer';\nimport cacheReducer from './cache-reducer';\nimport progressReducer from './progress-reducer';\nimport requestsResetReducer from './requests-reset-reducer';\nimport ssrReducer from './ssr-reducer';\nimport watchersReducer from './watchers-reducer';\nimport websocketReducer from './websocket-reducer';\n\nconst defaultState = {\n  queries: {},\n  mutations: {},\n  normalizedData: {},\n  cache: {},\n  downloadProgress: {},\n  uploadProgress: {},\n  requestsKeys: {},\n  watchers: {},\n  websocket: { pristine: true, connected: false },\n};\n\nexport default (config = defaultConfig) => (state = defaultState, action) => {\n  const { queries, normalizedData } = queriesReducer(\n    { queries: state.queries, normalizedData: state.normalizedData },\n    action,\n    config,\n  );\n\n  let { mutations } = state;\n\n  if (\n    (config.isRequestAction(action) && !config.isRequestActionQuery(action)) ||\n    (isResponseAction(action) &&\n      !config.isRequestActionQuery(getRequestActionFromResponse(action)))\n  ) {\n    mutations = mutationsReducer(mutations, action);\n  }\n\n  return {\n    ...requestKeysReducer(\n      {\n        ...requestsResetReducer(\n          {\n            queries,\n            mutations,\n            cache: cacheReducer(state.cache, action),\n            ...progressReducer(\n              {\n                downloadProgress: state.downloadProgress,\n                uploadProgress: state.uploadProgress,\n              },\n              action,\n              config,\n            ),\n          },\n          action,\n        ),\n        requestsKeys: state.requestsKeys,\n      },\n      action,\n      config,\n    ),\n    normalizedData,\n    ssr: config.ssr ? ssrReducer(state.ssr, action, config) : null,\n    watchers: watchersReducer(state.watchers, action, config),\n    websocket: websocketReducer(state.websocket, action, config),\n  };\n};\n","import { RESET_REQUESTS } from '../constants';\nimport { mapObject } from '../helpers';\n\nconst getRequestTypeString = requestType =>\n  typeof requestType === 'function' ? requestType.toString() : requestType;\n\nconst getKeys = requests =>\n  requests.map(v =>\n    typeof v === 'object'\n      ? getRequestTypeString(v.requestType) + (v.requestKey || '')\n      : getRequestTypeString(v),\n  );\n\nconst resetQuery = query =>\n  query.pending === 0\n    ? undefined\n    : {\n        ...query,\n        data: null,\n        error: null,\n        pristine: true,\n        usedKeys: query.normalized ? {} : null,\n      };\n\nconst resetMutation = mutation =>\n  mutation.pending === 0\n    ? undefined\n    : {\n        ...mutation,\n        error: null,\n      };\n\n// TODO: probably move a cache module\nconst isCacheValid = (cache, action) =>\n  cache.cacheKey === action.meta?.cacheKey &&\n  (cache.timeout === null || Date.now() <= cache.timeout);\n\nexport default (state, action) => {\n  if (action.type !== RESET_REQUESTS) {\n    return state;\n  }\n\n  let { queries, mutations, cache, downloadProgress, uploadProgress } = state;\n  const clearAll = !action.requests;\n  const keys = !clearAll && getKeys(action.requests);\n\n  queries = mapObject(queries, (k, v) => {\n    const cacheValue = cache[k];\n\n    if (\n      (clearAll || keys.includes(k)) &&\n      (action.resetCached ||\n        cacheValue === undefined ||\n        (cacheValue && !isCacheValid(cacheValue, action)))\n    ) {\n      return resetQuery(v);\n    }\n\n    return v;\n  });\n\n  mutations = mapObject(mutations, (k, v) =>\n    clearAll || keys.includes(k) ? resetMutation(v) : v,\n  );\n\n  cache =\n    clearAll && action.resetCached\n      ? {}\n      : mapObject(cache, (k, v) => {\n          const cacheValue = cache[k];\n\n          if (\n            (clearAll || keys.includes(k)) &&\n            (action.resetCached ||\n              cacheValue === undefined ||\n              (cacheValue && !isCacheValid(cacheValue, action)))\n          ) {\n            return undefined;\n          }\n\n          return v;\n        });\n\n  downloadProgress = clearAll\n    ? {}\n    : mapObject(downloadProgress, (k, v) =>\n        clearAll || keys.includes(k) ? resetMutation(v) : v,\n      );\n\n  uploadProgress = clearAll\n    ? {}\n    : mapObject(uploadProgress, (k, v) =>\n        clearAll || keys.includes(k) ? resetMutation(v) : v,\n      );\n\n  return { queries, mutations, cache, downloadProgress, uploadProgress };\n};\n","import defaultConfig from '../default-config';\nimport { getRequestActionFromResponse, isResponseAction } from '../actions';\nimport { JOIN_REQUEST } from '../constants';\n\nexport default (state = [], action, config = defaultConfig) => {\n  if (config.ssr === 'server' && isResponseAction(action)) {\n    return [\n      ...state,\n      getRequestActionFromResponse(action).type +\n        (action.meta.requestKey || ''),\n    ];\n  }\n\n  if (\n    config.ssr === 'server' &&\n    action.type === JOIN_REQUEST &&\n    action.rehydrate\n  ) {\n    return [...state, { requestType: action.requestType, duplicate: true }];\n  }\n\n  if (\n    config.ssr === 'client' &&\n    config.isRequestAction(action) &&\n    (action.meta?.ssrResponse || action.meta?.ssrError)\n  ) {\n    const indexToRemove = state.findIndex(\n      v =>\n        (v.requestType || v) === action.type + (action.meta.requestKey || ''),\n    );\n\n    if (indexToRemove >= 0) {\n      return state.filter((_, i) => i !== indexToRemove);\n    }\n  }\n\n  return state;\n};\n","import { isSuccessAction, isResponseAction } from '../actions';\n\nconst getDataUpdater = mutationConfig => {\n  if (typeof mutationConfig === 'function') {\n    return mutationConfig;\n  } else if (mutationConfig.updateData) {\n    return mutationConfig.updateData;\n  }\n\n  return null;\n};\n\nexport default (data, action, mutationConfig) => {\n  if (isResponseAction(action)) {\n    if (isSuccessAction(action)) {\n      const dataUpdater = getDataUpdater(mutationConfig);\n\n      return dataUpdater\n        ? dataUpdater(\n            data,\n            action.payload ? action.payload.data : action.response.data,\n          )\n        : data;\n    }\n\n    // error or abort case\n    return mutationConfig.revertData ? mutationConfig.revertData(data) : data;\n  }\n\n  if (mutationConfig.updateDataOptimistic) {\n    return mutationConfig.updateDataOptimistic(data);\n  }\n\n  if (mutationConfig.local) {\n    return getDataUpdater(mutationConfig)(data);\n  }\n\n  return data;\n};\n","import { ADD_WATCHER, REMOVE_WATCHER } from '../constants';\n\nexport default (state, action, config) => {\n  if (config.ssr === 'server') {\n    return state;\n  }\n\n  if (action.type === ADD_WATCHER) {\n    return {\n      ...state,\n      [action.requestType]:\n        state[action.requestType] === undefined\n          ? 1\n          : state[action.requestType] + 1,\n    };\n  }\n\n  if (action.type === REMOVE_WATCHER && state[action.requestType] === 1) {\n    // eslint-disable-next-line no-unused-vars\n    const { [action.requestType]: toRemove, ...remaining } = state;\n\n    return remaining;\n  }\n\n  if (action.type === REMOVE_WATCHER && state[action.requestType] !== 1) {\n    return {\n      ...state,\n      [action.requestType]: state[action.requestType] - 1,\n    };\n  }\n\n  return state;\n};\n","import { WEBSOCKET_OPENED, WEBSOCKET_CLOSED } from '../constants';\n\nexport default (state, action, config) => {\n  if (config.ssr === 'server') {\n    return state;\n  }\n\n  if (action.type === WEBSOCKET_OPENED) {\n    return {\n      pristine: false,\n      connected: true,\n    };\n  }\n\n  if (action.type === WEBSOCKET_CLOSED) {\n    return {\n      pristine: action.code === 1000,\n      connected: false,\n    };\n  }\n\n  return state;\n};\n","import getMutation from './get-mutation';\n\nexport default props => state => getMutation(state, props);\n","import { createSelector } from 'reselect';\n\nconst defaultMutation = {\n  loading: false,\n  pending: 0,\n  error: null,\n  downloadProgress: null,\n  uploadProgress: null,\n};\n\nconst getMutationState = (state, type, requestKey = '') =>\n  state.requests.mutations[type + requestKey];\n\nconst mutationSelectors = new WeakMap();\n\nconst createMutationSelector = (type, requestKey) =>\n  createSelector(\n    state => getMutationState(state, type, requestKey),\n    state => state.requests.downloadProgress[type + (requestKey || '')] ?? null,\n    state => state.requests.uploadProgress[type + (requestKey || '')] ?? null,\n    (mutationState, downloadProgress, uploadProgress) => ({\n      pending: mutationState.pending,\n      loading: mutationState.pending > 0,\n      error: mutationState.error,\n      downloadProgress,\n      uploadProgress,\n    }),\n  );\n\nexport default (state, { type, requestKey }) => {\n  const mutationState = getMutationState(state, type, requestKey);\n\n  if (!mutationState) {\n    return defaultMutation;\n  }\n\n  if (!mutationSelectors.get(mutationState.ref)) {\n    mutationSelectors.set(\n      mutationState.ref,\n      createMutationSelector(type, requestKey),\n    );\n  }\n\n  return mutationSelectors.get(mutationState.ref)(state);\n};\n","import getQuery from './get-query';\n\nexport default props => state => getQuery(state, props);\n","import { createSelectorCreator, defaultMemoize } from 'reselect';\n\nimport { denormalize, getDependentKeys } from '../normalizers';\n\nconst isQueryEqual = (currentVal, previousVal) => {\n  if (\n    currentVal.data !== previousVal.data ||\n    currentVal.pending !== previousVal.pending ||\n    currentVal.error !== previousVal.error ||\n    currentVal.pristine !== previousVal.pristine ||\n    currentVal.downloadProgress !== previousVal.downloadProgress ||\n    currentVal.uploadProgress !== previousVal.uploadProgress\n  ) {\n    return false;\n  }\n\n  if (\n    currentVal.data === null &&\n    (currentVal.multiple !== previousVal.multiple ||\n      currentVal.defaultData !== previousVal.defaultData)\n  ) {\n    return false;\n  }\n\n  if (\n    currentVal.normalized &&\n    currentVal.normalizedData !== previousVal.normalizedData\n  ) {\n    const currentDependencies = getDependentKeys(\n      currentVal.data,\n      currentVal.normalizedData,\n      currentVal.usedKeys,\n    );\n    const previousDependencies = getDependentKeys(\n      previousVal.data,\n      previousVal.normalizedData,\n      previousVal.usedKeys,\n    );\n\n    if (currentDependencies.size !== previousDependencies.size) {\n      return false;\n    }\n\n    for (const k of currentDependencies) {\n      if (\n        !previousDependencies.has(k) ||\n        currentVal.normalizedData[k] !== previousVal.normalizedData[k]\n      ) {\n        return false;\n      }\n    }\n  }\n\n  return true;\n};\n\nconst createCustomSelector = createSelectorCreator(\n  defaultMemoize,\n  isQueryEqual,\n);\n\nconst getData = (data, multiple, defaultData) => {\n  if (data !== null) {\n    return data;\n  }\n\n  if (defaultData !== undefined) {\n    return defaultData;\n  }\n\n  if (multiple) {\n    return [];\n  }\n\n  return data;\n};\n\nconst getQueryState = (state, type, requestKey = '') =>\n  state.requests.queries[type + requestKey];\n\nconst createQuerySelector = (type, requestKey) =>\n  createCustomSelector(\n    (state, defaultData, multiple) => {\n      // in order not to keep queryState.ref reference in selector memoize\n      const {\n        data,\n        pending,\n        error,\n        pristine,\n        normalized,\n        usedKeys,\n      } = getQueryState(state, type, requestKey);\n\n      return {\n        data,\n        pending,\n        error,\n        pristine,\n        normalized,\n        usedKeys,\n        multiple,\n        defaultData,\n        normalizedData: state.requests.normalizedData,\n        downloadProgress:\n          state.requests.downloadProgress[type + (requestKey || '')] ?? null,\n        uploadProgress:\n          state.requests.uploadProgress[type + (requestKey || '')] ?? null,\n      };\n    },\n    ({\n      data,\n      pending,\n      error,\n      pristine,\n      usedKeys,\n      normalized,\n      normalizedData,\n      defaultData,\n      multiple,\n      downloadProgress,\n      uploadProgress,\n    }) => ({\n      data: normalized\n        ? denormalize(\n            getData(data, multiple, defaultData),\n            normalizedData,\n            usedKeys,\n          )\n        : getData(data, multiple, defaultData),\n      pending,\n      loading: pending > 0,\n      error,\n      pristine,\n      downloadProgress,\n      uploadProgress,\n    }),\n  );\n\nconst defaultQuery = {\n  data: null,\n  pending: 0,\n  loading: false,\n  error: null,\n  pristine: true,\n  downloadProgress: null,\n  uploadProgress: null,\n};\n\nconst defaultQueryMultiple = {\n  ...defaultQuery,\n  data: [],\n};\n\nconst defaultQueriesWithCustomData = new Map();\n\nconst getDefaultQuery = (defaultData, multiple) => {\n  if (\n    defaultData !== undefined &&\n    defaultQueriesWithCustomData.get(defaultData)\n  ) {\n    return defaultQueriesWithCustomData.get(defaultData);\n  }\n\n  if (defaultData !== undefined) {\n    const query = { ...defaultQuery, data: defaultData };\n    defaultQueriesWithCustomData.set(defaultData, query);\n    return query;\n  }\n\n  return multiple ? defaultQueryMultiple : defaultQuery;\n};\n\nconst querySelectors = new WeakMap();\n\nexport default (state, { type, requestKey, defaultData, multiple = false }) => {\n  const queryState = getQueryState(state, type, requestKey);\n\n  if (!queryState) {\n    return getDefaultQuery(defaultData, multiple);\n  }\n\n  if (!querySelectors.get(queryState.ref)) {\n    querySelectors.set(queryState.ref, createQuerySelector(type, requestKey));\n  }\n\n  return querySelectors.get(queryState.ref)(state, defaultData, multiple);\n};\n","export default state => state.requests.websocket;\n","'use strict';\n\nvar isMergeableObject = function isMergeableObject(value) {\n\treturn isNonNullObject(value)\n\t\t&& !isSpecial(value)\n};\n\nfunction isNonNullObject(value) {\n\treturn !!value && typeof value === 'object'\n}\n\nfunction isSpecial(value) {\n\tvar stringValue = Object.prototype.toString.call(value);\n\n\treturn stringValue === '[object RegExp]'\n\t\t|| stringValue === '[object Date]'\n\t\t|| isReactElement(value)\n}\n\n// see https://github.com/facebook/react/blob/b5ac963fb791d1298e7f396236383bc955f916c1/src/isomorphic/classic/element/ReactElement.js#L21-L25\nvar canUseSymbol = typeof Symbol === 'function' && Symbol.for;\nvar REACT_ELEMENT_TYPE = canUseSymbol ? Symbol.for('react.element') : 0xeac7;\n\nfunction isReactElement(value) {\n\treturn value.$$typeof === REACT_ELEMENT_TYPE\n}\n\nfunction emptyTarget(val) {\n\treturn Array.isArray(val) ? [] : {}\n}\n\nfunction cloneUnlessOtherwiseSpecified(value, options) {\n\treturn (options.clone !== false && options.isMergeableObject(value))\n\t\t? deepmerge(emptyTarget(value), value, options)\n\t\t: value\n}\n\nfunction defaultArrayMerge(target, source, options) {\n\treturn target.concat(source).map(function(element) {\n\t\treturn cloneUnlessOtherwiseSpecified(element, options)\n\t})\n}\n\nfunction getMergeFunction(key, options) {\n\tif (!options.customMerge) {\n\t\treturn deepmerge\n\t}\n\tvar customMerge = options.customMerge(key);\n\treturn typeof customMerge === 'function' ? customMerge : deepmerge\n}\n\nfunction getEnumerableOwnPropertySymbols(target) {\n\treturn Object.getOwnPropertySymbols\n\t\t? Object.getOwnPropertySymbols(target).filter(function(symbol) {\n\t\t\treturn target.propertyIsEnumerable(symbol)\n\t\t})\n\t\t: []\n}\n\nfunction getKeys(target) {\n\treturn Object.keys(target).concat(getEnumerableOwnPropertySymbols(target))\n}\n\nfunction propertyIsOnObject(object, property) {\n\ttry {\n\t\treturn property in object\n\t} catch(_) {\n\t\treturn false\n\t}\n}\n\n// Protects from prototype poisoning and unexpected merging up the prototype chain.\nfunction propertyIsUnsafe(target, key) {\n\treturn propertyIsOnObject(target, key) // Properties are safe to merge if they don't exist in the target yet,\n\t\t&& !(Object.hasOwnProperty.call(target, key) // unsafe if they exist up the prototype chain,\n\t\t\t&& Object.propertyIsEnumerable.call(target, key)) // and also unsafe if they're nonenumerable.\n}\n\nfunction mergeObject(target, source, options) {\n\tvar destination = {};\n\tif (options.isMergeableObject(target)) {\n\t\tgetKeys(target).forEach(function(key) {\n\t\t\tdestination[key] = cloneUnlessOtherwiseSpecified(target[key], options);\n\t\t});\n\t}\n\tgetKeys(source).forEach(function(key) {\n\t\tif (propertyIsUnsafe(target, key)) {\n\t\t\treturn\n\t\t}\n\n\t\tif (propertyIsOnObject(target, key) && options.isMergeableObject(source[key])) {\n\t\t\tdestination[key] = getMergeFunction(key, options)(target[key], source[key], options);\n\t\t} else {\n\t\t\tdestination[key] = cloneUnlessOtherwiseSpecified(source[key], options);\n\t\t}\n\t});\n\treturn destination\n}\n\nfunction deepmerge(target, source, options) {\n\toptions = options || {};\n\toptions.arrayMerge = options.arrayMerge || defaultArrayMerge;\n\toptions.isMergeableObject = options.isMergeableObject || isMergeableObject;\n\t// cloneUnlessOtherwiseSpecified is added to `options` so that custom arrayMerge()\n\t// implementations can use it. The caller may not replace it.\n\toptions.cloneUnlessOtherwiseSpecified = cloneUnlessOtherwiseSpecified;\n\n\tvar sourceIsArray = Array.isArray(source);\n\tvar targetIsArray = Array.isArray(target);\n\tvar sourceAndTargetTypesMatch = sourceIsArray === targetIsArray;\n\n\tif (!sourceAndTargetTypesMatch) {\n\t\treturn cloneUnlessOtherwiseSpecified(source, options)\n\t} else if (sourceIsArray) {\n\t\treturn options.arrayMerge(target, source, options)\n\t} else {\n\t\treturn mergeObject(target, source, options)\n\t}\n}\n\ndeepmerge.all = function deepmergeAll(array, options) {\n\tif (!Array.isArray(array)) {\n\t\tthrow new Error('first argument should be an array')\n\t}\n\n\treturn array.reduce(function(prev, next) {\n\t\treturn deepmerge(prev, next, options)\n\t}, {})\n};\n\nvar deepmerge_1 = deepmerge;\n\nmodule.exports = deepmerge_1;\n","module.exports = __WEBPACK_EXTERNAL_MODULE_reselect__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => module['default'] :\n\t\t() => module;\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop)","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// module exports must be returned from runtime so entry inlining is disabled\n// startup\n// Load entry module and return exports\nreturn __webpack_require__(\"./src/index.js\");\n"],"sourceRoot":""}